!function e(n,t,r){function a(i,l){if(!t[i]){if(!n[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[i]={exports:{}};n[i][0].call(u.exports,function(e){var t=n[i][1][e];return a(t?t:e)},u,u.exports,e,n,t,r)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(){r(this,o),this.date=Date.now()};t["default"]=a},{}],2:[function(e,n,t){n.exports='<navbar></navbar>\n\n<ng-view></ng-view>\n\n<footer class="footer">\n  <div class="container">\n    <div class="pull-left">\n      <small>\n        &copy; {{:: $ctrl.date | date:\'yyyy\' }} The Love is our Weapon Campaign\n      </small>\n    </div>\n    <div class="pull-right">\n      <small>\n        <ul class="list-inline">\n          <li>\n            Need help?\n            <a href="mailto:hello@loveisourweapon.com?subject=Hello!">Say hello!</a>\n          </li>\n          <!-- TODO: add Help, Privacy & Terms links -->\n          <!--<li><a href="#">Help</a></li>\n          <li><a href="#">Privacy &amp; Terms</a></li>-->\n        </ul>\n      </small>\n    </div>\n  </div>\n</footer>\n'},{}],3:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a),i=e("angular-route"),l=r(i),s=e("ui-select"),c=r(s),u=e("../navbar"),d=r(u),f=e("../home"),p=e("../global-feed"),m=e("../deed"),h=e("../group"),g=e("../user"),v=e("../confirm-email"),b=e("../reset-password"),$=e("./AppCtrl"),y=r($),w=e("./app.html"),k=r(w);t["default"]=o["default"].module("app",[l["default"],c["default"],d["default"],f.home,p.globalFeed,m.deed,h.group,g.user,v.confirmEmail,b.resetPassword]).component("app",{controller:y["default"],template:k["default"]}).config(["$routeProvider","$locationProvider","uiSelectConfig",function(e,n,t){e.when("/",{controller:"HomeCtrl",controllerAs:"$ctrl",template:f.homeTpl}).when("/global",{controller:"GlobalFeedCtrl",controllerAs:"$ctrl",template:p.globalFeedTpl}).when("/d/:deed",{controller:"DeedCtrl",controllerAs:"$ctrl",template:m.deedTpl}).when("/g/:group",{controller:"GroupCtrl",controllerAs:"$ctrl",template:h.groupTpl}).when("/u/:user",{controller:"UserCtrl",controllerAs:"$ctrl",template:g.userTpl}).when("/confirm/:token",{controller:"ConfirmEmailCtrl",controllerAs:"$ctrl",template:v.confirmEmailTpl}).when("/reset/:token",{controller:"ResetPasswordCtrl",controllerAs:"$ctrl",template:b.resetPasswordTpl}).otherwise("/"),n.html5Mode(!0),t.theme="bootstrap",t.appendToBody=!0}]).name},{"../confirm-email":6,"../deed":9,"../global-feed":15,"../group":18,"../home":24,"../navbar":30,"../reset-password":33,"../user":36,"./AppCtrl":1,"./app.html":2,angular:"angular","angular-route":"angular-route","ui-select":"ui-select"}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(e,n,t,a,i){r(this,o),e.title="Confirming Email Address",i.confirmEmail(n.token).then(function(){return a.success("Confirmed email address")})["catch"](function(){return a.error("Failed confirming email address")}).then(function(){return t.url("/")})};t["default"]=a,a.$inject=["$rootScope","$routeParams","$location","Alertify","User"]},{}],5:[function(e,n,t){n.exports='<jumbotron jumbo-background="\'/images/header.jpg\'"></jumbotron>\n\n<div class="container container-pad">\n  <div class="row">\n    <div class="col-xs-12">\n      <i class="fa fa-fw fa-cog fa-2x fa-spin middle"></i>\n      Confirming your email address\n    </div>\n  </div>\n</div>\n'},{}],6:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.confirmEmail=t.confirmEmailTpl=void 0;var a=e("angular"),o=r(a),i=e("../../services/Alertify"),l=r(i),s=e("../../services/User"),c=r(s),u=e("../jumbotron"),d=r(u),f=e("./ConfirmEmailCtrl"),p=r(f),m=e("./confirmEmail.html"),h=r(m);t.confirmEmailTpl=h["default"],t.confirmEmail=o["default"].module("app.component.confirmEmail",[l["default"],c["default"],d["default"]]).controller("ConfirmEmailCtrl",p["default"]).name},{"../../services/Alertify":45,"../../services/User":70,"../jumbotron":27,"./ConfirmEmailCtrl":4,"./confirmEmail.html":5,angular:"angular"}],7:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n,t,o,i,l,s,c,u,d){var f=this;r(this,e),a(this,{Alertify:o,User:i,Group:l,Deed:s,Act:c,Feed:u,Modal:d}),this.feedItems=null,this.activeTab=0,this.loadDeed(t.deed).then(function(){return n.title=f.Deed.current?f.Deed.current.title:null})}return o(e,[{key:"loadDeed",value:function(e){var n=this;return this.loading=!0,this.Deed.findOne({urlTitle:e}).then(function(e){n.Deed.current=e,n.Act.count({deed:e._id}),n.loadFeed(e)})["catch"](function(e){n.error=e.message,n.Deed.current=null}).then(function(){return n.loading=!1})}},{key:"loadFeed",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.loadingFeed=!0,this.Feed.find(_.merge({"target.deed":e._id},t)).then(function(e){_.has(t,"before")?n.feedItems=n.feedItems.concat(e.data):_.has(t,"after")?n.feedItems=e.data.concat(n.feedItems):n.feedItems=e.data})["catch"](function(){return null}).then(function(){return n.loadingFeed=!1})}},{key:"done",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.doing=!0,this.Act.done(e,t).then(function(){n.Act.count(),n.Act.count({deed:e._id}),n.loadFeed(e),n.Alertify.success("Deed done!"),n.activeTab=1})["catch"](function(){return n.Alertify.error("Failed registering deed")}).then(function(){return n.doing=!1})}},{key:"testimony",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.Modal.openCommentEdit("Leave a Testimony for ",e,t).then(function(){n.loadFeed(e),n.activeTab=1})["catch"](function(){return null})}}]),e}();t["default"]=i,i.$inject=["$rootScope","$routeParams","Alertify","User","Group","Deed","Act","Feed","Modal"]},{}],8:[function(e,n,t){n.exports='<videotron video-url="$ctrl.Deed.current.videoUrl"></videotron>\n\n<div class="container container-pad">\n  <div class="row">\n    <div ng-hide="$ctrl.loading || $ctrl.error">\n      <div class="col-sm-3 col-sm-push-9 m-b-sm">\n        <button type="button"\n                class="btn btn-primary btn-block btn-lg"\n                ng-click="$ctrl.done($ctrl.Deed.current, $ctrl.User.group)"\n                ng-if="$ctrl.User.isAuthenticated()"\n                ng-disabled="$ctrl.doing">\n          <img src="/images/logo-invert.png" class="img-responsive img-btn" ng-hide="$ctrl.doing">\n          <i class="fa fa-cog fa-lg fa-spin" ng-show="$ctrl.doing"></i>\n          Done\n        </button>\n        <button type="button"\n                class="btn btn-primary btn-block"\n                ng-click="$ctrl.testimony($ctrl.Deed.current, $ctrl.User.group)"\n                ng-if="$ctrl.User.isAuthenticated()">\n          <i class="fa fa-fw fa-comment"></i>\n          Leave a Testimony\n        </button>\n\n        <button type="button"\n                class="btn btn-primary btn-block btn-lg"\n                ng-click="$ctrl.Modal.openLogin()"\n                ng-if="!$ctrl.User.isAuthenticated()">\n          <i class="fa fa-fw fa-user"></i>\n          Login\n        </button>\n      </div>\n\n      <div class="col-sm-9 col-sm-pull-3">\n        <div class="deed-header m-b-md">\n          <img src="/images/deed.png" class="img-responsive img-circle pull-left m-t-xxs m-r-sm">\n          <h1 class="m-none">\n            {{ $ctrl.Deed.current.title }}\n          </h1>\n          <p class="m-none">\n            <span class="f-lg">\n              {{ $ctrl.Act.counters[$ctrl.Deed.current._id] | number }}\n            </span>\n            acts of love\n          </p>\n        </div>\n\n        <uib-tabset active="$ctrl.activeTab"\n                    type="pills">\n          <span class="pull-right">\n            <button type="button"\n                    ng-click="$ctrl.loadFeed($ctrl.Deed.current, { after: $ctrl.feedItems[0].created })"\n                    ng-show="$ctrl.activeTab === 1"\n                    ng-disabled="$ctrl.loadingFeed || $ctrl.feedItems === null"\n                    class="btn btn-link">\n              <i class="fa fa-refresh fa-lg"\n                 ng-class="{ \'fa-spin\': $ctrl.loadingFeed }"></i>\n            </button>\n          </span>\n\n          <uib-tab>\n            <uib-tab-heading>\n              <i class="fa fa-fw fa-book"></i>\n              Devotional\n            </uib-tab-heading>\n\n            <div marked="$ctrl.Deed.current.content"></div>\n          </uib-tab>\n\n          <uib-tab>\n            <uib-tab-heading>\n              <i class="fa fa-fw fa-list"></i>\n              Activity Feed\n            </uib-tab-heading>\n\n            <feed feed-items="$ctrl.feedItems"\n                  loading="$ctrl.loadingFeed"\n                  load-more="$ctrl.loadFeed(\n                    $ctrl.Deed.current,\n                    { before: $ctrl.feedItems[$ctrl.feedItems.length - 1].created }\n                  )"\n                  ng-hide="$ctrl.feedItems === null"></feed>\n\n            <p class="text-center"\n               ng-show="$ctrl.feedItems === null">\n              <i class="fa fa-cog fa-5x fa-spin"></i>\n            </p>\n          </uib-tab>\n        </uib-tabset>\n      </div>\n    </div>\n\n    <div class="col-xs-12" ng-show="$ctrl.loading">\n      <p class="text-center">\n        <i class="fa fa-cog fa-5x fa-spin"></i>\n      </p>\n    </div>\n\n    <div class="col-xs-12" ng-show="$ctrl.error">\n      <uib-alert type="danger">\n        <i class="fa fa-exclamation-triangle"></i>\n        {{ $ctrl.error }}\n      </uib-alert>\n    </div>\n  </div>\n</div>\n'},{}],9:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.deed=t.deedTpl=void 0;var a=e("angular"),o=r(a),i=e("angular-marked"),l=r(i),s=e("angular-ui-bootstrap"),c=r(s),u=e("../../services/User"),d=r(u),f=e("../../services/Group"),p=r(f),m=e("../../services/Deed"),h=r(m),g=e("../../services/Act"),v=r(g),b=e("../../services/Feed"),$=(r(b),e("../../services/Modal")),y=r($),w=e("../videotron"),k=r(w),_=e("../feed"),j=r(_),O=e("./DeedCtrl"),M=r(O),A=e("./deed.html"),C=r(A);t.deedTpl=C["default"],t.deed=o["default"].module("app.components.deed",[l["default"],c["default"],d["default"],p["default"],h["default"],v["default"],y["default"],k["default"],j["default"]]).controller("DeedCtrl",M["default"]).name},{"../../services/Act":44,"../../services/Deed":48,"../../services/Feed":49,"../../services/Group":50,"../../services/Modal":65,"../../services/User":70,"../feed":12,"../videotron":38,"./DeedCtrl":7,"./deed.html":8,angular:"angular","angular-marked":"angular-marked","angular-ui-bootstrap":"angular-ui-bootstrap"}],10:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function i(e){r(this,i),a(this,{User:e})};t["default"]=o,o.$inject=["User"]},{}],11:[function(e,n,t){n.exports='<div class="feed-wrapper">\n  <div class="feed-item clearfix"\n       ng-repeat="item in $ctrl.feedItems track by item._id"\n       in-view="$index === $ctrl.feedItems.length - 1 && $inview && $ctrl.loadMore()"\n       in-view-options="{ debounce: 100 }">\n    <div class="feed-item-type">\n      <span class="fa-stack fa-lg">\n        <i class="fa fa-circle fa-stack-2x text-muted"></i>\n        <i class="fa fa-stack-1x fa-inverse"\n           ng-class="{\n             \'fa-heart\': item.act,\n             \'fa-quote-right\': item.comment && item.target.deed,\n             \'fa-bullhorn\': item.comment && item.target.group\n           }"></i>\n      </span>\n    </div>\n\n    <div class="feed-item-image">\n      <img ng-src="{{ ::item.user.picture || $ctrl.User.getDefaultUserImage(item.user._id) }}"\n           class="img-circle">\n    </div>\n\n    <div class="feed-item-content">\n      <h6 class="m-t-none">\n        <a ng-href="/u/{{ ::item.user._id }}"\n           ng-show="$ctrl.User.isMemberOfGroup(item.group)">\n          {{ ::item.user.firstName }}\n        </a>\n        <span ng-hide="$ctrl.User.isMemberOfGroup(item.group)">Someone</span>\n\n        <span ng-if="::item.group && !item.target.group">\n          from\n          <a ng-href="/g/{{ ::item.group.urlName }}">{{ ::item.group.name }}</a>\n        </span>\n\n        <span ng-if="::item.act">did the act of love</span>\n        <span ng-if="::item.comment && item.target.deed">left a testimony on</span>\n        <span ng-if="::item.comment && item.target.group">wrote a message to</span>\n\n        <a ng-href="/d/{{ ::item.target.deed.urlTitle }}"\n           ng-if="::item.target.deed">{{ ::item.target.deed.title }}</a>\n\n        <a ng-href="/g/{{ ::item.target.group.urlName }}"\n           ng-if="::item.target.group">{{ ::item.target.group.name }}</a>\n      </h6>\n\n      <div marked="::item.comment.content.text"\n           class="feed-item-comment"\n           ng-if="::item.comment.content.text"></div>\n\n      <p class="small m-b-none">\n        <a href>\n          {{ ::item.created | fromNow }}\n        </a>\n        &middot;\n        {{ ::item.created | moment:\'ddd, D MMM YYYY [at] HH:mm\' }}\n      </p>\n    </div>\n  </div>\n\n  <div class="feed-item feed-item-narrow text-center"\n       ng-show="$ctrl.loading">\n    <i class="fa fa-ellipsis-h fa-2x"></i>\n  </div>\n\n  <div class="feed-item"\n       ng-show="$ctrl.feedItems.length === 0">\n    No feed items to show.\n  </div>\n</div>\n'},{}],12:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a),i=e("angular-marked"),l=r(i),s=e("angular-inview"),c=r(s),u=e("../../filters/moment"),d=r(u),f=e("../../services/User"),p=r(f),m=e("./FeedCtrl"),h=r(m),g=e("./feed.html"),v=r(g);t["default"]=o["default"].module("app.components.feed",[l["default"],c["default"].name,d["default"],p["default"]]).component("feed",{controller:h["default"],template:v["default"],bindings:{feedItems:"<",loading:"<",loadMore:"&"}}).name},{"../../filters/moment":43,"../../services/User":70,"./FeedCtrl":10,"./feed.html":11,angular:"angular","angular-inview":"angular-inview","angular-marked":"angular-marked"}],13:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=function(){function e(n,t){a(this,e),o(this,{Feed:t}),this.feedItems=null,this.loadFeed(),n.title="Global Activity Feed"}return i(e,[{key:"loadFeed",value:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.loading=!0,this.Feed.find(s["default"].merge({"target.group":"null"},n)).then(function(t){s["default"].has(n,"before")?e.feedItems=e.feedItems.concat(t.data):s["default"].has(n,"after")?e.feedItems=t.data.concat(e.feedItems):e.feedItems=t.data})["catch"](function(){return null}).then(function(){return e.loading=!1})}}]),e}();t["default"]=c,c.$inject=["$rootScope","Feed"]},{lodash:"lodash"}],14:[function(e,n,t){n.exports='<jumbotron jumbo-background="\'/images/header.jpg\'"></jumbotron>\n\n<div class="container container-pad">\n  <div class="row">\n    <div class="col-xs-12">\n      <span class="pull-right">\n        <button type="button"\n                ng-click="$ctrl.loadFeed({ after: $ctrl.feedItems[0].created })"\n                ng-disabled="$ctrl.loading || $ctrl.feedItems === null"\n                class="btn btn-link">\n          <i class="fa fa-refresh fa-lg"\n             ng-class="{ \'fa-spin\': $ctrl.loading }"></i>\n        </button>\n      </span>\n\n      <h3 class="m-t-none m-b-md">\n        <i class="fa fa-fw fa-list"></i>\n        Global Activity Feed\n      </h3>\n\n      <feed feed-items="$ctrl.feedItems"\n            loading="$ctrl.loading"\n            load-more="$ctrl.loadFeed({ before: $ctrl.feedItems[$ctrl.feedItems.length - 1].created })"\n            ng-hide="$ctrl.feedItems === null"></feed>\n    </div>\n  </div>\n</div>\n'},{}],15:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.globalFeed=t.globalFeedTpl=void 0;var a=e("angular"),o=r(a),i=e("../jumbotron"),l=r(i),s=e("../feed"),c=r(s),u=e("./GlobalFeedCtrl"),d=r(u),f=e("./globalFeed.html"),p=r(f);t.globalFeedTpl=p["default"],t.globalFeed=o["default"].module("app.components.globalFeed",[l["default"],c["default"]]).controller("GlobalFeedCtrl",d["default"]).name},{"../feed":12,"../jumbotron":27,"./GlobalFeedCtrl":13,"./globalFeed.html":14,angular:"angular"}],16:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("seedrandom"),u=r(c),d=e("fast-json-patch"),f=r(d),p=6,m=function(){function e(n,t,r,i,l,s,c,d,f,m){var h=this;a(this,e),o(this,{Alertify:i,User:l,Group:s,Campaign:c,Act:d,Feed:f,Modal:m}),this.jumbotronBackground="/images/header"+Math.floor((0,u["default"])(r.group)()*p)+".jpg",this.activeTab=0,this.campaign=null,this.feedItems=null,this.loadGroup(r.group).then(function(){return n.title=h.Group.current?h.Group.current.name:null});var g=this.User.on("login",function(e){h.Group.current&&h.loadFeed(h.Group.current),h.setCampaignAlert(h.campaign,h.Group.current,e),h.User.isMemberOfGroup(h.Group.current)&&(h.activeTab=1)}),v=this.User.on("logout",function(){h.feedItems=null,h.setCampaignAlert(h.campaign,h.Group.current,null),h.activeTab=0});t.$on("$destroy",function(){return g()&&v()})}return i(e,[{key:"loadGroup",value:function(e){var n=this;return this.loading=!0,this.Group.findOne({urlName:e}).then(function(e){n.Group.current=e,n.User.isMemberOfGroup(n.Group.current)&&(n.activeTab=1),n.Act.count({group:e._id}),n.loadCampaign(e),n.User.isAuthenticated()&&n.loadFeed(e)})["catch"](function(e){n.error=e.message,n.Group.current=null}).then(function(){return n.loading=!1})}},{key:"loadCampaign",value:function(e){var n=this;this.Campaign.findOne({group:e._id,active:!0})["catch"](function(){return null}).then(function(e){n.campaign=e,n.campaign&&(n.Act.count({campaign:n.campaign._id}),n.currentDeed=s["default"].findLast(n.campaign.deeds,{published:!0})),n.setCampaignAlert(n.campaign,n.Group.current,n.User.current)})}},{key:"loadFeed",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.loadingFeed=!0,this.Feed.find(s["default"].merge({group:e._id},t)).then(function(e){s["default"].has(t,"before")?n.feedItems=n.feedItems.concat(e.data):s["default"].has(t,"after")?n.feedItems=e.data.concat(n.feedItems):n.feedItems=e.data})["catch"](function(){return null}).then(function(){return n.loadingFeed=!1})}},{key:"setCampaignAlert",value:function(e,n,t){this.showCampaignAlert=s["default"].isNull(e)&&s["default"].has(n,"admins")&&s["default"].has(t,"_id")&&~n.admins.indexOf(t._id)}},{key:"editCampaign",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"create":arguments[0],n=this,t=arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this.Modal.openCampaignEdit(e,t,r).then(function(){return n.loadCampaign(t)})["catch"](function(e){return null})}},{key:"finishCampaign",value:function(e){var n=this;this.Modal.openConfirm("<p>Are you sure you want to finish this campaign?</p>").then(function(){var t=f["default"].observe(e);return e.active=!1,e.dateEnd=new Date,n.Campaign.update(e,f["default"].generate(t))}).then(function(){return n.Alertify.success("Finished campaign")}).then(function(){return n.loadCampaign(n.Group.current)})["catch"](function(){return e.active=!0})}},{key:"setPublished",value:function(e,n){var t=this,r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],a=f["default"].observe(e),o=s["default"].find(e.deeds,{deed:{_id:n._id}});o.published=r,this.Campaign.update(e,f["default"].generate(a)).then(function(){return t.Alertify.success((r?"Published":"Unpublished")+" deed <strong>"+o.deed.title+"</strong>")}).then(function(){return t.loadCampaign(t.Group.current)})["catch"](function(){return o.published=!r})}},{key:"joinGroup",value:function(e,n){var t=this,r=f["default"].observe(e);e.groups.push(n._id),this.User.update(e,f["default"].generate(r)).then(function(){return t.Alertify.success("Joined group <strong>"+n.name+"</strong>")}).then(function(){return t.User.group=n}).then(function(){return t.activeTab=1})["catch"](function(){return e.groups.splice(e.groups.indexOf(groups._id))})}},{key:"leaveGroup",value:function(e,n){var t=this;return n.owner===e._id?this.Modal.openAlert("\n        <p>You are the current owner of <strong>"+n.name+"</strong>.</p>\n        <p>You'll need to make someone else the owner before leaving.</p>\n      "):this.Group.isAdmin(n,e)?this.Modal.openAlert("\n        <p>You are currently an admin of <strong>"+n.name+"</strong>.</p>\n        <p>You'll need to remove yourself as an admin before leaving.</p>\n      "):this.Modal.openConfirm("<p>Are you sure you want to leave <strong>"+n.name+"</strong>?</p>").then(function(){var r=f["default"].observe(e);return e.groups.splice(e.groups.indexOf(n._id)),t.User.update(e,f["default"].generate(r))}).then(function(){return t.Alertify.success("Left group <strong>"+n.name+"</strong>")}).then(function(){return t.activeTab=0})["catch"](function(){return e.groups.push(n)})}}]),e}();t["default"]=m,m.$inject=["$rootScope","$scope","$routeParams","Alertify","User","Group","Campaign","Act","Feed","Modal"]},{"fast-json-patch":74,lodash:"lodash",seedrandom:"seedrandom"}],17:[function(e,n,t){n.exports='<jumbotron jumbo-image="\'/images/group.png\'"\n           jumbo-background="$ctrl.jumbotronBackground"\n           jumbo-title="$ctrl.Group.current.name"\n           jumbo-text="\n             <span class=\'f-lg\'>\n               {{ $ctrl.Act.counters[$ctrl.Group.current._id] | number }}\n             </span> acts of love\n           "></jumbotron>\n\n<div class="container container-pad">\n  <div class="row">\n    <div ng-hide="$ctrl.loading || $ctrl.error">\n      <div class="col-sm-4 col-md-3 col-sm-push-8 col-md-push-9 m-b-lg">\n        <div class="well well-sm"\n             ng-if="$ctrl.User.isMemberOfGroup($ctrl.Group.current) && $ctrl.campaign !== null">\n          <h5 class="text-center">\n            Current Campaign\n            <br>\n            <small>\n              <span class=\'f-lg\'>\n                {{ $ctrl.Act.counters[$ctrl.campaign._id] | number }}\n              </span>\n              acts of love\n            </small>\n          </h5>\n\n          <!-- TODO: move buttons to a directive -->\n          <!-- Show buttons with publish/unpublish menu for admins -->\n          <div class="btn-group btn-block"\n               ng-repeat="item in $ctrl.campaign.deeds"\n               ng-if="$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)">\n            <a class="btn col-xs-10"\n               ng-class="{\n                 \'btn-primary\': item.published,\n                 \'btn-default\': !item.published,\n                 \'btn-lg\': item.deed._id === $ctrl.currentDeed.deed._id\n               }"\n               ng-href="/d/{{ item.deed.urlTitle }}">\n              {{ item.deed.title }}\n            </a>\n            <button type="button"\n                    class="btn dropdown-toggle col-xs-2"\n                    ng-class="{\n                      \'btn-primary\': item.published,\n                      \'btn-default\': !item.published,\n                      \'btn-lg\': item.deed._id === $ctrl.currentDeed.deed._id\n                    }"\n                    data-toggle="dropdown"\n                    aria-haspopup="true"\n                    aria-expanded="false">\n              <span class="caret"></span>\n              <span class="sr-only">Toggle Dropdown</span>\n            </button>\n            <ul class="dropdown-menu dropdown-menu-right">\n              <li ng-hide="item.published">\n                <a ng-click="$ctrl.setPublished($ctrl.campaign, item.deed, true)" href>\n                  <i class="fa fa-fw fa-thumbs-up"></i>\n                  Publish\n                </a>\n              </li>\n              <li ng-show="item.published">\n                <a ng-click="$ctrl.setPublished($ctrl.campaign, item.deed, false)" href>\n                  <i class="fa fa-fw fa-thumbs-down"></i>\n                  Unpublish\n                </a>\n              </li>\n            </ul>\n          </div>\n          <div ng-if="$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)">\n            <hr>\n            <button type="button"\n                    class="btn btn-default btn-block"\n                    ng-click="$ctrl.editCampaign(\'update\', $ctrl.Group.current, $ctrl.campaign)">\n              <i class="fa fa-fw fa-edit"></i>\n              Update campaign\n            </button>\n            <button type="button"\n                    class="btn btn-default btn-block"\n                    ng-click="$ctrl.finishCampaign($ctrl.campaign)">\n              <i class="fa fa-fw fa-flag-checkered"></i>\n              Finish campaign\n            </button>\n          </div>\n\n          <!-- Show a normal button for non-admins -->\n          <a class="btn btn-block"\n             ng-repeat="item in $ctrl.campaign.deeds"\n             ng-href="/d/{{ item.deed.urlTitle }}"\n             ng-class="{\n               \'btn-primary\': item.published,\n               \'btn-default\': !item.published,\n               \'btn-lg\': item.deed._id === $ctrl.currentDeed.deed._id\n             }"\n             ng-if="!$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)">\n            {{ item.deed.title }}\n          </a>\n        </div>\n        <button type="button"\n                class="btn btn-primary btn-block btn-lg"\n                ng-click="$ctrl.User.isAuthenticated() ?\n                  $ctrl.joinGroup($ctrl.User.current, $ctrl.Group.current) :\n                  $ctrl.Modal.openLogin()"\n                ng-if="!$ctrl.User.isMemberOfGroup($ctrl.Group.current)">\n          <i class="fa fa-fw fa-users"></i>\n          <span ng-hide="$ctrl.User.isAuthenticated()">Login &amp; </span>\n          Join us\n        </button>\n        <button type="button"\n                class="btn btn-default btn-block"\n                ng-click="$ctrl.editCampaign(\'create\', $ctrl.Group.current)"\n                ng-if="$ctrl.showCampaignAlert">\n          <i class="fa fa-fw fa-bullhorn"></i>\n          Setup campaign\n        </button>\n        <button type="button"\n                class="btn btn-default btn-block"\n                ng-click="$ctrl.Modal.openGroupEdit(\'update\', $ctrl.Group.current)"\n                ng-if="$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)">\n          <i class="fa fa-fw fa-edit"></i>\n          Update group\n        </button>\n        <button type="button"\n                class="btn btn-default btn-block"\n                ng-click="$ctrl.leaveGroup($ctrl.User.current, $ctrl.Group.current)"\n                ng-if="$ctrl.User.isMemberOfGroup($ctrl.Group.current)">\n          <i class="fa fa-fw fa-sign-out"></i>\n          Leave group\n        </button>\n      </div>\n\n      <div class="col-sm-8 col-md-9 col-sm-pull-4 col-md-pull-3">\n        <uib-alert type="info"\n                   ng-show="$ctrl.showCampaignAlert"\n                   close="$ctrl.showCampaignAlert = false">\n          You haven\'t got an active campaign, would you like to set one up now?&nbsp;\n          <button class="btn btn-info btn-inline m-t-xs p-xs"\n                  ng-click="$ctrl.editCampaign(\'create\', $ctrl.Group.current)">\n            Setup Campaign\n          </button>\n        </uib-alert>\n\n        <uib-tabset active="$ctrl.activeTab"\n                    type="pills">\n          <span class="pull-right">\n            <button type="button"\n                    ng-click="$ctrl.loadFeed($ctrl.Group.current, { after: $ctrl.feedItems[0].created })"\n                    ng-show="$ctrl.activeTab === 1 && $ctrl.User.isAuthenticated()"\n                    ng-disabled="$ctrl.loadingFeed || $ctrl.feedItems === null"\n                    class="btn btn-link">\n              <i class="fa fa-refresh fa-lg"\n                 ng-class="{ \'fa-spin\': $ctrl.loadingFeed }"></i>\n            </button>\n          </span>\n\n          <uib-tab>\n            <uib-tab-heading>\n              <i class="fa fa-fw fa-commenting"></i>\n              Welcome\n            </uib-tab-heading>\n\n            <blockquote marked="$ctrl.Group.current.welcomeMessage"\n                        ng-show="$ctrl.Group.current.welcomeMessage"></blockquote>\n\n            <div ng-hide="$ctrl.Group.current.welcomeMessage">\n              <h2>\n                The Love is our Weapon Campaign is a youth movement that exists to\n                change cities through the love of Jesus by doing strategic practical\n                acts of love.\n              </h2>\n              <p>\n                Thousands of people, doing thousands of acts of love, bringing\n                change, value, healing and hope throughout cities and communities\n                everywhere.\n              </p>\n            </div>\n          </uib-tab>\n\n          <uib-tab>\n            <uib-tab-heading>\n              <i class="fa fa-fw fa-list"></i>\n              Activity Feed\n            </uib-tab-heading>\n\n            <feed feed-items="$ctrl.feedItems"\n                  loading="$ctrl.loadingFeed"\n                  load-more="$ctrl.loadFeed(\n                    $ctrl.Group.current,\n                    { before: $ctrl.feedItems[$ctrl.feedItems.length - 1].created }\n                  )"\n                  ng-hide="$ctrl.feedItems === null || !$ctrl.User.isAuthenticated()"></feed>\n\n            <p ng-hide="$ctrl.User.isAuthenticated()">\n              You must <a ng-click="$ctrl.Modal.openLogin()" href>login</a> to see {{ $ctrl.Group.current.name }}\'s Activity Feed.\n            </p>\n\n            <p class="text-center"\n               ng-show="$ctrl.feedItems === null && $ctrl.User.isAuthenticated()">\n              <i class="fa fa-cog fa-5x fa-spin"></i>\n            </p>\n          </uib-tab>\n        </uib-tabset>\n      </div>\n    </div>\n\n    <div class="col-xs-12" ng-show="$ctrl.loading">\n      <p class="text-center">\n        <i class="fa fa-cog fa-5x fa-spin"></i>\n      </p>\n    </div>\n\n    <div class="col-xs-12" ng-show="$ctrl.error">\n      <uib-alert type="danger">\n        <i class="fa fa-exclamation-triangle"></i>\n        {{ $ctrl.error }}\n      </uib-alert>\n    </div>\n  </div>\n</div>\n';
},{}],18:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.group=t.groupTpl=void 0;var a=e("angular"),o=r(a),i=e("angular-marked"),l=r(i),s=e("angular-ui-bootstrap"),c=r(s),u=e("../../services/Alertify"),d=r(u),f=e("../../services/User"),p=r(f),m=e("../../services/Group"),h=r(m),g=e("../../services/Campaign"),v=r(g),b=e("../../services/Act"),$=r(b),y=e("../../services/Feed"),w=r(y),k=e("../../services/Modal"),_=r(k),j=e("../jumbotron"),O=r(j),M=e("../feed"),A=r(M),C=e("./GroupCtrl"),U=r(C),x=e("./group.html"),P=r(x);t.groupTpl=P["default"],t.group=o["default"].module("app.components.group",[l["default"],c["default"],d["default"],p["default"],h["default"],v["default"],$["default"],w["default"],_["default"],O["default"],A["default"]]).controller("GroupCtrl",U["default"]).name},{"../../services/Act":44,"../../services/Alertify":45,"../../services/Campaign":46,"../../services/Feed":49,"../../services/Group":50,"../../services/Modal":65,"../../services/User":70,"../feed":12,"../jumbotron":27,"./GroupCtrl":16,"./group.html":17,angular:"angular","angular-marked":"angular-marked","angular-ui-bootstrap":"angular-ui-bootstrap"}],19:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function i(e,n){r(this,i),a(this,{User:n}),e.title=null};t["default"]=o,o.$inject=["$rootScope","User"]},{}],20:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=function(){function e(n,t,r,i){var l=this;a(this,e),o(this,{User:t,Act:r,Feed:i}),this.feedItems=null,this.User.isAuthenticated()&&this.User.current&&(this.loadFeed(this.User.current),this.countAllGroupActs(this.User.current.groups));var s=this.User.on("login",function(e){l.loadFeed(e),l.countAllGroupActs(e.groups)}),c=this.User.on("logout",function(){return l.feedItems=null});n.$on("$destroy",function(){return s()&&c()})}return i(e,[{key:"loadFeed",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r={user:e._id};e.groups.length&&(r.group=s["default"].map(e.groups,"_id").join(",")),this.loading=!0,this.Feed.find(r,t).then(function(e){s["default"].has(t,"before")?n.feedItems=n.feedItems.concat(e.data):s["default"].has(t,"after")?n.feedItems=e.data.concat(n.feedItems):n.feedItems=e.data})["catch"](function(){return null}).then(function(){return n.loading=!1})}},{key:"countAllGroupActs",value:function(e){var n=this;s["default"].each(e,function(e){return n.Act.count({group:e._id})})}}]),e}();t["default"]=c,c.$inject=["$scope","User","Act","Feed"]},{lodash:"lodash"}],21:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function i(e,n,t,o){var l=this;r(this,i),a(this,{Act:t,Modal:o}),n.find({count:!0}).then(function(e){return l.numberOfGroups=Number(e.data)}),e.find({count:!0}).then(function(e){return l.numberOfUsers=Number(e.data)})};t["default"]=o,o.$inject=["User","Group","Act","Modal"]},{}],22:[function(e,n,t){n.exports='<jumbotron jumbo-background="\'/images/header.jpg\'"></jumbotron>\n\n<welcome ng-hide="$ctrl.User.isAuthenticated()"></welcome>\n\n<home-feed ng-show="$ctrl.User.isAuthenticated()"></home-feed>\n'},{}],23:[function(e,n,t){n.exports='<div class="container container-pad">\n  <div class="row">\n    <div class="col-sm-4 col-sm-push-8 m-b-lg">\n      <h3 class="m-t-none m-b-md">\n        <i class="fa fa-users"></i>\n        Groups\n      </h3>\n      <div class="list-group group-list">\n        <a class="list-group-item clearfix"\n           ng-repeat="group in $ctrl.User.current.groups track by group._id"\n           ng-href="/g/{{ ::group.urlName }}">\n          <div class="group-list-img">\n            <img ng-src="{{ ::group.logo || \'/images/group.png\' }}"\n                 class="img-circle">\n          </div>\n          <div class="group-list-content">\n            <h4 class="m-none">{{ ::group.name }}</h4>\n            <p class="m-b-none">\n              <span class=\'f-lg\'>\n                {{ $ctrl.Act.counters[group._id] | number }}\n              </span> acts of love\n            </p>\n          </div>\n        </a>\n      </div>\n    </div>\n\n    <div class="col-sm-8 col-sm-pull-4">\n      <span class="pull-right">\n          <button type="button"\n                  ng-click="$ctrl.loadFeed($ctrl.User.current, { after: $ctrl.feedItems[0].created })"\n                  ng-disabled="$ctrl.loadingFeed || $ctrl.feedItems === null"\n                  class="btn btn-link">\n            <i class="fa fa-refresh fa-lg"\n               ng-class="{ \'fa-spin\': $ctrl.loadingFeed }"></i>\n          </button>\n        </span>\n\n      <h3 class="m-t-none m-b-md">\n        <i class="fa fa-fw fa-list"></i>\n        Activity Feed\n      </h3>\n\n      <feed feed-items="$ctrl.feedItems"\n            loading="$ctrl.loadingFeed"\n            load-more="$ctrl.loadFeed($ctrl.User.current, { before: $ctrl.feedItems[$ctrl.feedItems.length - 1].created })"\n            ng-hide="$ctrl.feedItems === null"></feed>\n\n      <p class="text-center"\n         ng-show="$ctrl.feedItems === null">\n        <i class="fa fa-cog fa-5x fa-spin"></i>\n      </p>\n    </div>\n  </div>\n</div>\n'},{}],24:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.home=t.homeTpl=void 0;var a=e("angular"),o=r(a),i=e("../../services/User"),l=r(i),s=e("../../services/Group"),c=r(s),u=e("../../services/Act"),d=r(u),f=e("../../services/Modal"),p=r(f),m=e("../jumbotron"),h=r(m),g=e("../feed"),v=r(g),b=e("./HomeCtrl"),$=r(b),y=e("./home.html"),w=r(y),k=e("./WelcomeCtrl"),_=r(k),j=e("./welcome.html"),O=r(j),M=e("./HomeFeedCtrl"),A=r(M),C=e("./homeFeed.html"),U=r(C);t.homeTpl=w["default"],t.home=o["default"].module("app.components.home",[l["default"],c["default"],d["default"],p["default"],h["default"],v["default"]]).controller("HomeCtrl",$["default"]).component("welcome",{controller:_["default"],template:O["default"]}).component("homeFeed",{controller:A["default"],template:U["default"]}).name},{"../../services/Act":44,"../../services/Group":50,"../../services/Modal":65,"../../services/User":70,"../feed":12,"../jumbotron":27,"./HomeCtrl":19,"./HomeFeedCtrl":20,"./WelcomeCtrl":21,"./home.html":22,"./homeFeed.html":23,"./welcome.html":25,angular:"angular"}],25:[function(e,n,t){n.exports='<div class="Home__Welcome1">\n  <div class="container container-pad">\n    <div class="row">\n      <div class="col-sm-9">\n        <h2>\n          The Love is our Weapon Campaign is a youth movement that exists to\n          change cities through the love of Jesus by doing strategic practical\n          acts of love.\n        </h2>\n        <p>\n          Thousands of people, doing thousands of acts of love, bringing\n          change, value, healing and hope throughout cities and communities\n          everywhere.\n        </p>\n        <p class="text-center">\n          <br>\n          <button type="button"\n                  class="btn btn-primary btn-lg"\n                  ng-click="$ctrl.Modal.openLogin()">\n            Login\n          </button>\n          &nbsp;&nbsp; or &nbsp;&nbsp;\n          <button type="button"\n                  class="btn btn-default btn-lg"\n                  ng-click="$ctrl.Modal.openGroupEdit()">\n            Group sign up\n          </button>\n        </p>\n      </div>\n\n      <div class="col-sm-3">\n        <h1 class="text-primary m-b-none">\n          <span ng-show="$ctrl.Act.counters.global">\n            {{ $ctrl.Act.counters.global | number }}\n          </span>\n          <span ng-hide="$ctrl.Act.counters.global">&nbsp;</span>\n        </h1>\n        <h4 class="m-none">acts of love</h4>\n        <p class="m-t-none">done around the world</p>\n\n        <h1 class="text-primary m-b-none">\n          <span ng-show="$ctrl.numberOfGroups">\n            {{ $ctrl.numberOfGroups | number }}\n          </span>\n          <span ng-hide="$ctrl.numberOfGroups">&nbsp;</span>\n        </h1>\n        <h4 class="m-none">groups</h4>\n        <p class="m-t-none">serving together</p>\n\n        <h1 class="text-primary m-b-none">\n          <span ng-show="$ctrl.numberOfUsers">\n            {{ $ctrl.numberOfUsers | number }}\n          </span>\n          <span ng-hide="$ctrl.numberOfUsers">&nbsp;</span>\n        </h1>\n        <h4 class="m-none">individuals</h4>\n        <p class="m-t-none">causing change</p>\n      </div>\n    </div>\n  </div>\n</div><!-- .Home__Welcome1 -->\n\n<div class="Home__Welcome2">\n  <div class="container">\n    <div class="row">\n      <div class="col-xs-12">\n        <h2 class="text-center">\n          Running a campaign is as easy as 1, 2, 3.\n        </h2>\n        <img src="images/welcome-laptop.png">\n        <ol>\n          <li>Sign up</li>\n          <li>Join or start a group</li>\n          <li>Start changing your world!</li>\n        </ol>\n      </div>\n    </div>\n  </div>\n</div><!-- .Home__Welcome2 -->\n\n<div class="Home__Welcome3">\n  <div class="container">\n    <div class="row">\n      <div class="col-xs-12">\n        <h2 class="text-center">\n          Here’s how Love is Our Weapon can help you.\n        </h2>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-sm-6">\n        <h3>Title 1</h3>\n        <p>\n          After the Sabbath, as the first light of the new week dawned, Mary Magdalene and the other Mary came to keep vigil at the tomb. Suddenly the earth reeled and rocked under their feet as God’s angel came down from heaven, came right up to where they were standing. He rolled back the stone and then sat on it. Shafts of lightning blazed from him. His garments shimmered snow-white. The guards at the tomb were scared to death. They were so frightened, they couldn’t move.\n        </p>\n        <h3>Title 2</h3>\n        <p>\n          The women, deep in wonder and full of joy, lost no time in leaving the tomb. They ran to tell the disciples. Then Jesus met them, stopping them in their tracks. “Good morning!” he said. They fell to their knees, embraced his feet, and worshiped him. Jesus said, “You’re holding on to me for dear life! Don’t be frightened like that. Go tell my brothers that they are to go to Galilee, and that I’ll meet them there.”\n        </p>\n      </div>\n      <div class="col-sm-6">\n        <h3>Title 3</h3>\n        <p>\n          Meanwhile, the guards had scattered, but a few of them went into the city and told the high priests everything that had happened. They called a meeting of the religious leaders and came up with a plan: They took a large sum of money and gave it to the soldiers, bribing them to say, “His disciples came in the night and stole the body while we were sleeping.” They assured them, “If the governor hears about your sleeping on duty, we will make sure you don’t get blamed.” The soldiers took the bribe and did as they were told. That story, cooked up in the Jewish High Council, is still going around.\n        </p>\n        <h3>Title 4</h3>\n        <p>\n          Jesus, undeterred, went right ahead and gave his charge: “God authorized and commanded me to commission you: Go out and train everyone you meet, far and near, in this way of life, marking them by baptism in the threefold name: Father, Son, and Holy Spirit. Then instruct them in the practice of all I have commanded you. I’ll be with you as you do this, day after day after day, right up to the end of the age.”\n        </p>\n      </div>\n    </div>\n  </div>\n</div>\n'},{}],26:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function o(){r(this,o),this.styles={"background-image":"url("+this.jumboBackground+")"}};t["default"]=a},{}],27:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a),i=e("./JumbotronCtrl"),l=r(i),s=e("./jumbotron.html"),c=r(s);t["default"]=o["default"].module("app.components.jumbotron",[]).component("jumbotron",{controller:l["default"],template:c["default"],bindings:{jumboImage:"<",jumboBackground:"<",jumboTitle:"<",jumboText:"@",jumboClasses:"@"}}).name},{"./JumbotronCtrl":26,"./jumbotron.html":28,angular:"angular"}],28:[function(e,n,t){n.exports='<div class="jumbotron {{ $ctrl.jumboClasses }}"\n     ng-style="$ctrl.styles">\n  <div class="container">\n    <div class="jumbotron-image" ng-if="$ctrl.jumboImage">\n      <img ng-src="{{ $ctrl.jumboImage }}" class="img-responsive img-circle">\n    </div>\n    <h1 class="jumbotron-title"\n        ng-bind-html="$ctrl.jumboTitle"></h1>\n    <p class="jumbotron-text"\n       ng-if="$ctrl.jumboText"\n       ng-bind-html="$ctrl.jumboText"></p>\n  </div>\n</div>\n'},{}],29:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=3,l=function(){function e(n,t,o,i,l,s,c){r(this,e),a(this,{$location:n,$q:t,User:o,Group:i,Deed:l,Act:s,Modal:c}),this.choices=[],this.selected=null,this.Act.count()}return o(e,[{key:"refreshChoices",value:function(e){var n=this;return this.choices=[],e.length<i?!1:this.$q.all([this.Group.search(e,{fields:"_id,name,urlName"}),this.Deed.search(e,{fields:"_id,title,urlTitle"})]).then(function(e){return n.choices=e[0].data.concat(e[1].data)})}},{key:"groupChoices",value:function(e){return e.urlName?"Groups":"Deeds"}},{key:"select",value:function(e){this.selected=null,this.$location.path(e.urlName?"/g/"+e.urlName:"/d/"+e.urlTitle),this.collapseMenu()}},{key:"setUserGroup",value:function(e){this.User.group=e,this.select(e)}},{key:"collapseMenu",value:function(){$("#liow-navbar-collapse").collapse("hide")}}]),e}();t["default"]=l,l.$inject=["$location","$q","User","Group","Deed","Act","Modal"]},{}],30:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a),i=e("angular-sanitize"),l=r(i),s=e("ui-select"),c=r(s),u=e("../../services/User"),d=r(u),f=e("../../services/Group"),p=r(f),m=e("../../services/Deed"),h=r(m),g=e("../../services/Act"),v=r(g),b=e("../../services/Modal"),$=r(b),y=e("./NavbarCtrl"),w=r(y),k=e("./navbar.html"),_=r(k);t["default"]=o["default"].module("app.components.navbar",[l["default"],c["default"],d["default"],p["default"],h["default"],v["default"],$["default"]]).component("navbar",{controller:w["default"],template:_["default"]}).name},{"../../services/Act":44,"../../services/Deed":48,"../../services/Group":50,"../../services/Modal":65,"../../services/User":70,"./NavbarCtrl":29,"./navbar.html":31,angular:"angular","angular-sanitize":"angular-sanitize","ui-select":"ui-select"}],31:[function(e,n,t){n.exports='<nav class="navbar navbar-default navbar-fixed-top" id="liow-navbar" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#liow-navbar-collapse" aria-expanded="false">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n\n      <a class="navbar-brand"\n         ng-click="$ctrl.collapseMenu()"\n         title="Love is our Weapon"\n         href="/">\n        <img src="/images/logo-navbar.png"\n             alt="Love is our Weapon">\n        <div class="navbar-brand-label">\n          <span class="text-primary">\n            {{ $ctrl.Act.counters.global | number }}\n          </span>\n          <br><small>acts of love</small>\n        </div>\n      </a>\n    </div>\n\n    <div class="collapse navbar-collapse" id="liow-navbar-collapse">\n      <div class="navbar-divider navbar-left"></div>\n\n      <form class="navbar-form navbar-left" id="group-search" role="search">\n        <div class="form-group">\n          <label class="input-group">\n            <div class="input-group-addon"><i class="fa fa-search"></i></div>\n            <ui-select ng-model="$ctrl.selected"\n                       on-select="$ctrl.select($item)"\n                       append-to-body="false">\n              <ui-select-match placeholder="Find a group or deed...">\n                {{ $select.selected.name || $select.selected.title }}\n              </ui-select-match>\n              <ui-select-choices repeat="choice in $ctrl.choices"\n                                 group-by="$ctrl.groupChoices"\n                                 refresh="$ctrl.refreshChoices($select.search)"\n                                 refresh-delay="200"\n                                 position="down">\n                <div ng-bind-html="(choice.name || choice.title) | highlight:$select.search"></div>\n              </ui-select-choices>\n            </ui-select>\n          </label>\n        </div>\n      </form>\n\n      <ul class="nav navbar-nav navbar-right">\n        <li>\n          <a ng-href="/global"\n             ng-click="$ctrl.collapseMenu()"\n             title="Global Activity Feed">\n            Global\n          </a>\n        </li>\n        <li ng-show="$ctrl.User.isAuthenticated() && $ctrl.User.group">\n          <a ng-href="/g/{{ $ctrl.User.group.urlName }}"\n             ng-click="$ctrl.collapseMenu()"\n             title="{{ $ctrl.User.group.name }}">\n            Campaign\n          </a>\n        </li>\n        <li class="dropdown">\n          <a class="dropdown-toggle user-dropdown"\n             data-toggle="dropdown"\n             role="button"\n             aria-haspopup="true"\n             aria-expanded="false"\n             href>\n            <img ng-src="{{ $ctrl.User.current.picture || $ctrl.User.getDefaultUserImage($ctrl.User.current._id) }}"\n                 class="img-circle">\n            <span class="caret"></span>\n          </a>\n          <ul class="dropdown-menu">\n            <li ng-show="$ctrl.User.isAuthenticated()">\n              <a ng-href="/u/{{ $ctrl.User.current._id }}"\n                 ng-click="$ctrl.collapseMenu()">\n                <i class="fa fa-fw fa-user"></i>\n                {{ $ctrl.User.current.name }}\n              </a>\n            </li>\n            <li ng-show="$ctrl.User.isAuthenticated()">\n              <a ng-click="$ctrl.User.logout() && $ctrl.collapseMenu()" href>\n                <i class="fa fa-fw fa-sign-out"></i>\n                Logout\n              </a>\n            </li>\n            <li ng-hide="$ctrl.User.isAuthenticated()">\n              <a ng-click="$ctrl.Modal.openLogin() && $ctrl.collapseMenu()" href>\n                <i class="fa fa-fw fa-sign-in"></i>\n                Login\n              </a>\n            </li>\n            <li ng-hide="$ctrl.User.isAuthenticated()">\n              <a ng-click="$ctrl.Modal.openSignup() && $ctrl.collapseMenu()" href>\n                <i class="fa fa-fw fa-pencil-square-o"></i>\n                Sign up\n              </a>\n            </li>\n            <li class="divider" ng-show="$ctrl.User.isAuthenticated()" role="separator"></li>\n            <li class="dropdown-header"\n                ng-show="$ctrl.User.isAuthenticated()">\n              <i class="fa fa-fw fa-users"></i>\n              Groups\n            </li>\n            <li ng-repeat="group in $ctrl.User.current.groups track by group._id"\n                ng-show="$ctrl.User.isAuthenticated()"\n                ng-class="{ \'active\': $ctrl.User.group._id === group._id }">\n              <a ng-click="$ctrl.setUserGroup(group)" href>\n                {{ group.name }}\n              </a>\n            </li>\n            <li>\n              <a ng-click="$ctrl.Modal.openGroupEdit() && $ctrl.collapseMenu()" href>\n                <i class="fa fa-fw fa-pencil-square-o"></i>\n                Group sign up\n              </a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</nav>\n'},{}],32:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n,t,o,i,l,s){r(this,e),a(this,{$routeParams:t,$location:o,Alertify:i,User:l,Modal:s}),n.title="Reset Password"}return o(e,[{key:"save",value:function(e,n){var t=this;this.saving=!0,this.User.resetPassword(e,n).then(function(){return t.Alertify.success("Password reset")})["catch"](function(){return t.Alertify.error("Password reset link has expired")}).then(function(){return t.Modal.openLogin()&&t.$location.url("/")})}}]),e}();t["default"]=i,i.$inject=["$rootScope","$routeParams","$location","Alertify","User","Modal"]},{}],33:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetPassword=t.resetPasswordTpl=void 0;var a=e("angular"),o=r(a),i=e("../../services/Alertify"),l=r(i),s=e("../../services/User"),c=r(s),u=e("../jumbotron"),d=r(u),f=e("../../directives"),p=r(f),m=e("./ResetPasswordCtrl"),h=r(m),g=e("./resetPassword.html"),v=r(g);t.resetPasswordTpl=v["default"],t.resetPassword=o["default"].module("app.component.resetPassword",[l["default"],c["default"],d["default"],p["default"]]).controller("ResetPasswordCtrl",h["default"]).name},{"../../directives":41,"../../services/Alertify":45,"../../services/User":70,"../jumbotron":27,"./ResetPasswordCtrl":32,"./resetPassword.html":34,angular:"angular"}],34:[function(e,n,t){n.exports='<jumbotron jumbo-background="\'/images/header.jpg\'"></jumbotron>\n\n<div class="container container-pad">\n  <div class="row">\n    <div class="col-xs-12 col-sm-8 col-sm-push-2 col-md-6 col-md-push-3">\n      <h3>\n        <i class="fa fa-fw fa-key"></i>\n        Reset your password\n      </h3>\n\n      <form name="resetPassword"\n            ng-submit="$ctrl.form.$valid && $ctrl.save($ctrl.password, $ctrl.$routeParams.token)"\n            novalidate>\n      <span ng-init="$ctrl.form = resetPassword"></span>\n\n        <div class="form-group"\n             ng-class="{ \'has-error\': $ctrl.form.$submitted && $ctrl.form.password.$invalid }">\n          <label for="password">Password</label>\n          <input type="password"\n                 class="form-control"\n                 id="password"\n                 name="password"\n                 placeholder="Enter a new password..."\n                 ng-model="$ctrl.password"\n                 required\n                 minlength="8"\n                 autofocus>\n          <span class="help-block"\n                ng-show="$ctrl.form.password.$error.minlength">\n            Password must be at least 8 characters.\n          </span>\n        </div>\n\n        <div class="form-group"\n             ng-class="{ \'has-error\': $ctrl.form.$submitted && $ctrl.form.confirmPassword.$invalid }">\n          <label for="confirmPassword">Confirm Password</label>\n          <input type="password"\n                 class="form-control"\n                 id="confirmPassword"\n                 name="confirmPassword"\n                 placeholder="Enter the same password again..."\n                 ng-model="$ctrl.confirmPassword"\n                 required\n                 same-as="$ctrl.password">\n          <span class="help-block"\n                  ng-show="$ctrl.form.confirmPassword.$error.sameAs">\n            Entered passwords must be the same.\n          </span>\n        </div>\n\n        <button type="submit"\n                class="btn btn-primary btn-block"\n                ng-disabled="$ctrl.form.$pristine || $ctrl.saving">\n          <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.saving"></i>\n          Submit\n        </button>\n      </form>\n    </div>\n  </div>\n</div>\n'},{}],35:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("seedrandom"),s=r(l),c=6,u=function(){function e(n,t,r,i,l,u,d){var f=this;a(this,e),o(this,{User:i,Act:l,Feed:u,Modal:d}),this.jumbotronBackground="/images/header"+Math.floor((0,s["default"])(r.user)()*c)+".jpg",this.feedItems=null,this.loadUser(r.user).then(function(){return n.title=f.user?f.user.firstName+(f.user.lastName?" "+f.user.lastName:""):null});var p=this.User.on("login",function(){return f.loadFeed(f.user)}),m=this.User.on("logout",function(){return f.feedItems=null});t.$on("$destroy",function(){return p()&&m()})}return i(e,[{key:"loadUser",value:function(e){var n=this;return this.loading=!0,this.User.findById(e).then(function(e){n.user=e.data,n.Act.count({user:n.user._id}),n.User.isAuthenticated()&&n.loadFeed(n.user)})["catch"](function(){n.error="User not found",n.user=null}).then(function(){return n.loading=!1})}},{key:"loadFeed",value:function(e){var n=this,t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.loadingFeed=!0,this.Feed.find(_.merge({user:e._id},t)).then(function(e){_.has(t,"before")?n.feedItems=n.feedItems.concat(e.data):_.has(t,"after")?n.feedItems=e.data.concat(n.feedItems):n.feedItems=e.data})["catch"](function(){return null}).then(function(){return n.loadingFeed=!1})}}]),e}();t["default"]=u,u.$inject=["$rootScope","$scope","$routeParams","User","Act","Feed","Modal"]},{seedrandom:"seedrandom"}],36:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.user=t.userTpl=void 0;var a=e("angular"),o=r(a),i=e("../../services/User"),l=r(i),s=e("../../services/Act"),c=r(s),u=e("../../services/Feed"),d=r(u),f=e("../../services/Modal"),p=r(f),m=e("../jumbotron"),h=r(m),g=e("./UserCtrl"),v=r(g),b=e("./user.html"),$=r(b);t.userTpl=$["default"],t.user=o["default"].module("app.components.user",[l["default"],c["default"],d["default"],p["default"],h["default"]]).controller("UserCtrl",v["default"]).name},{"../../services/Act":44,"../../services/Feed":49,"../../services/Modal":65,"../../services/User":70,"../jumbotron":27,"./UserCtrl":35,"./user.html":37,angular:"angular"}],37:[function(e,n,t){n.exports='<jumbotron jumbo-image="$ctrl.user.picture || $ctrl.User.getDefaultUserImage(item.user._id)"\n           jumbo-background="::$ctrl.jumbotronBackground"\n           jumbo-title="::$ctrl.user.name"\n           jumbo-text="\n             <span class=\'f-lg\'>\n               {{ $ctrl.Act.counters[$ctrl.user._id] | number }}\n             </span> acts of love\n           "\n           jumbo-classes="jumbotron-small"></jumbotron>\n\n<div class="container container-pad">\n  <div class="row">\n    <div ng-hide="$ctrl.loading || $ctrl.error">\n      <div class="col-xs-12">\n        <span class="pull-right">\n          <button type="button"\n                  ng-click="$ctrl.loadFeed($ctrl.user, { after: $ctrl.feedItems[0].created })"\n                  ng-disabled="$ctrl.loadingFeed || $ctrl.feedItems === null"\n                  ng-show="$ctrl.User.isAuthenticated()"\n                  class="btn btn-link">\n            <i class="fa fa-refresh fa-lg"\n               ng-class="{ \'fa-spin\': $ctrl.loadingFeed }"></i>\n          </button>\n        </span>\n\n        <h3 class="m-t-none m-b-md">\n          <i class="fa fa-fw fa-list"></i>\n          Activity Feed\n        </h3>\n\n        <feed feed-items="$ctrl.feedItems"\n              loading="$ctrl.loadingFeed"\n              load-more="$ctrl.loadFeed($ctrl.user, { before: $ctrl.feedItems[$ctrl.feedItems.length - 1].created })"\n              ng-hide="$ctrl.feedItems === null || !$ctrl.User.isAuthenticated()"></feed>\n\n        <p ng-hide="$ctrl.User.isAuthenticated()">\n          You must <a ng-click="$ctrl.Modal.openLogin()" href>login</a> to see {{ $ctrl.user.firstName }}\'s Activity Feed.\n        </p>\n      </div>\n    </div>\n\n    <div class="col-xs-12" ng-show="$ctrl.loading">\n      <p class="text-center">\n        <i class="fa fa-cog fa-5x fa-spin"></i>\n      </p>\n    </div>\n\n    <div class="col-xs-12" ng-show="$ctrl.error">\n      <uib-alert type="danger">\n        <i class="fa fa-exclamation-triangle"></i>\n        {{ $ctrl.error }}\n      </uib-alert>\n    </div>\n  </div>\n</div>\n'},{}],38:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a),i=e("angular-youtube-embed"),l=r(i),s=e("./videotron.html"),c=r(s);t["default"]=o["default"].module("app.components.videotron",[l["default"]]).component("videotron",{template:c["default"],bindings:{videoId:"<",videoUrl:"<"}}).name},{"./videotron.html":39,angular:"angular","angular-youtube-embed":"angular-youtube-embed"}],39:[function(e,n,t){n.exports='<div class="jumbotron videotron">\n  <div class="container">\n    <div class="embed-responsive embed-responsive-16by9">\n      <youtube-video ng-if="$ctrl.videoId"\n                     video-id="$ctrl.videoId"\n                     class="embed-responsive-item"></youtube-video>\n      <youtube-video ng-if="$ctrl.videoUrl"\n                     video-url="$ctrl.videoUrl"\n                     class="embed-responsive-item"></youtube-video>\n    </div>\n  </div>\n</div>\n'},{}],40:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("lodash"),o=r(a),i=e("angular"),l=r(i),s={serverUrl:"http://localhost:3000",facebookClientId:"FACEBOOK_CLIENT_ID"};t["default"]=l["default"].module("app.config",[]).constant("config",o["default"].defaults(LIOW_CONFIG||{},s)).name;
},{angular:"angular",lodash:"lodash"}],41:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a);t["default"]=o["default"].module("app.directives",[]).directive("sameAs",function(){return{require:"ngModel",scope:{otherValue:"=sameAs"},link:function(e,n,t,r){r.$validators.sameAs=function(n){return n===e.otherValue}}}}).name},{angular:"angular"}],42:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("lodash"),o=r(a),i=e("angular"),l=r(i);t["default"]=l["default"].module("app.filters.lodash",[]).filter("capitalize",function(){return o["default"].capitalize}).filter("kebabCase",function(){return o["default"].kebabCase}).name},{angular:"angular",lodash:"lodash"}],43:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("moment"),o=r(a),i=e("angular"),l=r(i);t["default"]=l["default"].module("app.filters.moment",[]).filter("moment",function(){return function(e){var n=arguments.length<=1||void 0===arguments[1]?"DD/MM/YYYY":arguments[1];return e?(0,o["default"])(e).format(n):void 0}}).filter("fromNow",function(){return function(e){return e?(0,o["default"])(e).fromNow():void 0}}).name},{angular:"angular",moment:"moment"}],44:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("angular"),u=r(c),d=e("../config"),f=r(d),p=function(){function e(n,t){a(this,e),o(this,{$http:n}),this.baseUrl=t.serverUrl+"/acts",this.counters={}}return i(e,[{key:"count",value:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return n=s["default"].defaults(n,{count:!0}),this.$http.get(this.baseUrl,{params:n}).then(function(t){return t.data=Number(t.data),n.user?e.counters[n.user]=t.data:n.group?e.counters[n.group]=t.data:n.campaign?e.counters[n.campaign]=t.data:n.deed?e.counters[n.deed]=t.data:e.counters.global=t.data,t})}},{key:"done",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.$http.post(this.baseUrl,{deed:e._id,group:s["default"].has(n,"_id")?n._id:null})}}]),e}();p.$inject=["$http","config"],t["default"]=u["default"].module("app.services.Act",[f["default"]]).service("Act",p).name},{"../config":40,angular:"angular",lodash:"lodash"}],45:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("angular"),o=r(a),i=e("alertify.js"),l=r(i);t["default"]=o["default"].module("app.services.Alertify",[]).factory("Alertify",function(){return l["default"].theme("bootstrap").logPosition("top right"),{log:function(e){var n=arguments.length<=1||void 0===arguments[1]?"info-circle":arguments[1];return l["default"].setLogTemplate(function(e){return'<i class="fa fa-fw fa-'+n+'"></i> '+e}).log(e)},success:function(e){var n=arguments.length<=1||void 0===arguments[1]?"check-circle":arguments[1];return l["default"].setLogTemplate(function(e){return'<i class="fa fa-fw fa-'+n+'"></i> '+e}).success(e)},error:function(e){var n=arguments.length<=1||void 0===arguments[1]?"exclamation-circle":arguments[1];return l["default"].setLogTemplate(function(e){return'<i class="fa fa-fw fa-'+n+'"></i> '+e}).error(e)}}}).name},{"alertify.js":"alertify.js",angular:"angular"}],46:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("angular"),s=r(l),c=e("fast-json-patch"),u=(r(c),e("../config")),d=r(u),f=function(){function e(n,t,r){a(this,e),o(this,{$http:n,$q:t}),this.baseUrl=r.serverUrl+"/campaigns"}return i(e,[{key:"find",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:"findOne",value:function(e){var n=this;return this.$q(function(t,r){n.find(e).then(function(e){1===e.data.length?t(e.data[0]):r(new Error("Campaign not found"))})["catch"](function(){return r(new Error("Failed connecting to server"))})})}},{key:"save",value:function(e){return _.has(e,"_id")?this.$http.put(this.baseUrl+"/"+e._id,e):this.$http.post(this.baseUrl,e)}},{key:"update",value:function(e,n){return this.$http.patch(this.baseUrl+"/"+e._id,n)}}]),e}();f.$inject=["$http","$q","config"],t["default"]=s["default"].module("app.services.Campaign",[d["default"]]).service("Campaign",f).name},{"../config":40,angular:"angular","fast-json-patch":74}],47:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("angular"),u=r(c),d=e("../config"),f=r(d),p=function(){function e(n,t){a(this,e),o(this,{$http:n}),this.baseUrl=t.serverUrl}return i(e,[{key:"save",value:function(e){var n=s["default"].has(e,"_id")?"put":"post",t="/comments"+(s["default"].has(e,"_id")?"/"+e._id:"");switch(!0){case s["default"].has(e.target,"deed"):t="/deeds/"+e.target.deed+t;break;case s["default"].has(e.target,"group"):t="/groups/"+e.target.group+t;break;case s["default"].has(e.target,"comment"):t="/comments/"+e.target.comment+t;break;case s["default"].has(e.target,"act"):t="/acts/"+e.target.acts+t}return this.$http[n](""+this.baseUrl+t,e)}}]),e}();p.$inject=["$http","config"],t["default"]=u["default"].module("si.services.Comment",[f["default"]]).service("Comment",p).name},{"../config":40,angular:"angular",lodash:"lodash"}],48:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("angular"),s=r(l),c=e("../config"),u=r(c),d=null,f=function(){function e(n,t,r){a(this,e),o(this,{$http:n,$q:t}),this.baseUrl=r.serverUrl+"/deeds"}return i(e,[{key:"find",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:"findOne",value:function(e){var n=this;return this.$q(function(t,r){n.find(e).then(function(e){1===e.data.length?t(e.data[0]):r(new Error("Deed not found"))})["catch"](function(){return r(new Error("Failed connecting to server"))})})}},{key:"search",value:function(e,n){return n=_.merge({query:e},n),this.find(n)}},{key:"get",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.$http.get(this.baseUrl+"/"+e,{params:n})}},{key:"current",set:function(e){d=e},get:function(){return d}}]),e}();f.$inject=["$http","$q","config"],t["default"]=s["default"].module("app.services.Deed",[u["default"]]).service("Deed",f).name},{"../config":40,angular:"angular"}],49:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("angular"),s=r(l),c=e("../config"),u=r(c),d=function(){function e(n,t){a(this,e),o(this,{$http:n}),this.baseUrl=t.serverUrl+"/feeds"}return i(e,[{key:"find",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}}]),e}();d.$inject=["$http","config"],t["default"]=s["default"].module("app.services.Feed",[u["default"]]).service("Feed",d).name},{"../config":40,angular:"angular"}],50:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("angular"),u=r(c),d=e("../config"),f=r(d),p=e("./User"),m=r(p),h=null,g=function(){function e(n,t,r,i){a(this,e),o(this,{$http:n,$q:t,User:i}),this.baseUrl=r.serverUrl+"/groups"}return i(e,[{key:"find",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:"findOne",value:function(e){var n=this;return this.$q(function(t,r){n.find(e).then(function(e){1===e.data.length?t(e.data[0]):r(new Error("Group not found"))})["catch"](function(){return r(new Error("Failed connecting to server"))})})}},{key:"search",value:function(e,n){return n=s["default"].merge({query:e},n),this.find(n)}},{key:"save",value:function(e){return s["default"].has(e,"_id")?this.$http.put(this.baseUrl+"/"+e._id,e):this.$http.post(this.baseUrl,e)}},{key:"isAdmin",value:function(e,n){return s["default"].has(e,"admins")&&s["default"].has(n,"_id")&&~e.admins.indexOf(n._id)}},{key:"current",set:function(e){h=e,this.User.current&&s["default"].find(this.User.current.groups,["id",e._id])&&(this.User.group=e)},get:function(){return h}}]),e}();g.$inject=["$http","$q","config","User"],t["default"]=u["default"].module("app.services.Group",[f["default"],m["default"]]).service("Group",g).name},{"../config":40,"./User":70,angular:"angular",lodash:"lodash"}],51:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function i(e,n,t){r(this,i),a(this,{$uibModalInstance:e,title:n,message:t})};t["default"]=o,o.$inject=["$uibModalInstance","title","message"]},{}],52:[function(e,n,t){n.exports='<div class="modal-header" ng-if="$ctrl.title">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.close()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    {{ $ctrl.title }}\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <div class="col-xs-12" ng-bind-html="$ctrl.message"></div>\n</div><!-- .modal-body -->\n\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-primary"\n          ng-click="$ctrl.$uibModalInstance.close()">\n    OK\n  </button>\n</div><!-- .modal-footer -->\n'},{}],53:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=function(){function e(n,t,r,i,l,c,u,d){a(this,e),o(this,{$uibModalInstance:n,Alertify:t,Campaign:r,Deed:i,Modal:l,action:c,group:u}),this.error=null,this.deeds=[],this.loadDeeds(),d?this.campaign=s["default"].cloneDeep(d):this.resetFields()}return i(e,[{key:"resetFields",value:function(){this.campaign={group:this.group._id,deeds:[]}}},{key:"save",value:function(e){var n=this,t=s["default"].cloneDeep(e);s["default"].forEach(t.deeds,function(e){return e.deed=e.deed._id}),this.saving=!0,this.error=null,this.Campaign.save(t).then(function(){n.$uibModalInstance.close(),n.Alertify.success(s["default"].capitalize(n.action)+"d campaign")})["catch"](function(e){return n.error=e.data.error}).then(function(){return n.saving=!1})}},{key:"loadDeeds",value:function(){var e=this;this.loading=!0,this.Deed.find({fields:"_id,title"}).then(function(n){return e.deeds=s["default"].differenceBy(s["default"].map(n.data,function(e){return{deed:e}}),e.campaign.deeds,"deed._id")})["catch"](function(n){return e.error=n.data.error}).then(function(){return e.loading=!1})}}]),e}();t["default"]=c,c.$inject=["$uibModalInstance","Alertify","Campaign","Deed","Modal","action","group","campaign"]},{lodash:"lodash"}],54:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    {{ $ctrl.action | capitalize }} Campaign for {{ $ctrl.group.name }}\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <uib-alert type="danger" ng-show="$ctrl.error && !$ctrl.error.errors">\n    <i class="fa fa-fw fa-exclamation-triangle"></i>\n    Failed sending request. Please try again or\n    <a href="mailto:support@loveisourweapon.com">contact us</a> about it.\n  </uib-alert>\n\n  <div class="col-xs-12">\n    <p>\n      Create a campaign by dragging deeds from the \'Available Deeds\' list into the \'Your Campaign\' list.\n      You can also re-order deeds within your campaign.\n    </p>\n    <p>\n      We recommend choosing 1 deed for each week of the campaign,\n      so choosing 6 deeds would work best for a 6 week campaign.\n      In our experience with youth groups, a 4-6 week campaign works best\n      to keep up interest and engagement with the campaign.\n    </p>\n  </div>\n\n  <form name="campaignEdit"\n        class="form-horizontal"\n        ng-submit="$ctrl.save($ctrl.campaign)">\n    <span ng-init="$ctrl.form = campaignEdit"></span>\n\n    <div class="form-group">\n      <div class="col-xs-6">\n        <h5>Available Deeds</h5>\n        <ul class="list-group"\n            dragula="\'bag-deeds\'"\n            dragula-model="$ctrl.deeds">\n          <li class="list-group-item"\n              ng-repeat="item in $ctrl.deeds track by item.deed._id">\n            <button type="button"\n                    class="btn btn-link p-none pull-right"\n                    ng-click="$ctrl.Modal.openDeedPreview(item.deed._id)">\n              <i class="fa fa-lg fa-info-circle text-info m-l-xs"></i>\n            </button>\n            {{ item.deed.title }}\n          </li>\n        </ul>\n      </div>\n\n      <div class="col-xs-6">\n        <h5>Your Campaign</h5>\n        <ul class="list-group"\n            dragula="\'bag-deeds\'"\n            dragula-model="$ctrl.campaign.deeds">\n          <li class="list-group-item"\n              ng-repeat="item in $ctrl.campaign.deeds track by item.deed._id">\n            <button type="button"\n                    class="btn btn-link p-none pull-right"\n                    ng-click="$ctrl.Modal.openDeedPreview(item.deed._id)">\n              <i class="fa fa-lg fa-info-circle text-info m-l-xs"></i>\n            </button>\n            {{ item.deed.title }}\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <button type="submit" hidden></button>\n  </form>\n</div><!-- .modal-body -->\n\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-default"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    Cancel\n  </button>\n  <button type="button"\n          class="btn btn-primary"\n          ng-click="$ctrl.save($ctrl.campaign)"\n          ng-disabled="$ctrl.loading || $ctrl.saving || $ctrl.form.$invalid">\n    <i class="fa fa-cog fa-spin" ng-show="$ctrl.saving"></i>\n    {{ $ctrl.action | capitalize }}\n  </button>\n</div><!-- .modal-footer -->\n'},{}],55:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("to-markdown"),u=r(c),d=e("showdown"),f=r(d),p=(new f["default"].Converter,function(){function e(n,t,r,i,l,s,c,u,d){a(this,e),o(this,{$uibModalInstance:n,$scope:t,$timeout:r,Alertify:i,Comment:l,title:s,target:c,comment:d}),this.comment||this.resetFields(this.target,u),this.setupMediumEditor()}return i(e,[{key:"resetFields",value:function(e,n){switch(this.comment={content:{text:""},group:n?n._id:null},!0){case s["default"].has(e,"title"):this.comment.target={deed:e._id};break;case s["default"].has(e,"name"):this.comment.target={group:e._id};break;case s["default"].has(e,"text")||s["default"].has(e,"image"):this.comment.target={comment:e._id};break;default:this.comment.target={act:e._id}}}},{key:"save",value:function(e){var n=this;this.saving=!0,this.Comment.save(e).then(function(){n.$uibModalInstance.close(),n.Alertify.success("Comment saved")})["catch"](function(){return null}).then(function(){return n.saving=!1})}},{key:"setupMediumEditor",value:function(){var e=this;this.$timeout(function(){e.editor=new MediumEditor(document.querySelector("#comment"),{placeholder:{text:"Enter your message...",hideOnClick:!1},toolbar:{buttons:["bold","italic","underline","anchor","orderedlist","unorderedlist"]},autoLink:!0}),s["default"].first(e.editor.elements).hasAttribute("autofocus")&&s["default"].first(e.editor.elements).focus(),e.editor.subscribe("editableInput",function(n,t){e.$scope.$apply(function(){e.comment.content.text=(0,u["default"])(t.innerHTML,{converters:[{filter:function(e){return"SPAN"===e.nodeName||"DIV"===e.nodeName},replacement:function(e){return e}}]})})}),e.$scope.$on("$destroy",function(){return e.editor.destroy()})})}}]),e}());t["default"]=p,p.$inject=["$uibModalInstance","$scope","$timeout","Alertify","Comment","title","target","group","comment"]},{lodash:"lodash",showdown:"showdown","to-markdown":75}],56:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    {{ $ctrl.title }}\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <div class="col-xs-12">\n    <div class="form-group">\n      <div class="well well-sm medium-editor m-none">\n        <textarea id="comment"\n                  ng-model="$ctrl.comment.content.text"\n                  autofocus></textarea>\n      </div>\n      <span class="help-block">\n        Select text to add links, bold, italics, etc.\n      </span>\n    </div>\n  </div>\n</div><!-- .modal-body -->\n\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-default"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    Cancel\n  </button>\n  <button type="button"\n          class="btn btn-primary"\n          ng-click="$ctrl.save($ctrl.comment)"\n          ng-disabled="$ctrl.saving || !$ctrl.comment.content.text">\n    <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.saving"></i>\n    Save\n  </button>\n</div><!-- .modal-footer -->\n'},{}],57:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function i(e,n,t){r(this,i),a(this,{$uibModalInstance:e,title:n,message:t})};t["default"]=o,o.$inject=["$uibModalInstance","title","message"]},{}],58:[function(e,n,t){n.exports='<div class="modal-header" ng-if="$ctrl.title">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    {{ $ctrl.title }}\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <div class="col-xs-12" ng-bind-html="$ctrl.message"></div>\n</div><!-- .modal-body -->\n\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-default"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    Cancel\n  </button>\n  <button type="button"\n          class="btn btn-primary"\n          ng-click="$ctrl.$uibModalInstance.close()">\n    OK\n  </button>\n</div><!-- .modal-footer -->\n'},{}],59:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n,t,o){r(this,e),a(this,{$uibModalInstance:n,Deed:t}),this.error=null,this.loadDeed(o)}return o(e,[{key:"loadDeed",value:function(e){var n=this;this.loading=!0,this.Deed.get(e).then(function(e){return n.deed=e.data})["catch"](function(e){return n.error="Deed not found"}).then(function(){return n.loading=!1})}}]),e}();t["default"]=i,i.$inject=["$uibModalInstance","Deed","deedId"]},{}],60:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    Preview Deed\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <div class="col-xs-12" ng-hide="$ctrl.loading || $ctrl.error">\n    <div class="embed-responsive embed-responsive-16by9"\n         ng-show="$ctrl.deed.videoUrl">\n      <youtube-video video-url="$ctrl.deed.videoUrl"\n                     class="embed-responsive-item"></youtube-video>\n    </div>\n\n    <div class="deed-header m-b-md">\n      <img src="/images/deed.png" class="img-responsive img-circle pull-left m-t-xxs m-r-sm">\n      <h1 class="m-none">\n        {{ $ctrl.deed.title }}\n      </h1>\n      <p class="m-none">\n        <span class=\'f-lg\'>12,001</span> acts of love\n      </p>\n    </div>\n\n    <div marked="$ctrl.deed.content"></div>\n  </div>\n\n  <div class="col-xs-12" ng-show="$ctrl.loading">\n    <p class="text-center">\n      <i class="fa fa-cog fa-5x fa-spin"></i>\n    </p>\n  </div>\n\n  <div class="col-xs-12" ng-show="$ctrl.error">\n    <uib-alert type="danger">\n      <i class="fa fa-exclamation-triangle"></i>\n      {{ $ctrl.error }}\n    </uib-alert>\n  </div>\n</div><!-- .modal-body -->\n\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-default"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    Close\n  </button>\n</div><!-- .modal-footer -->\n'},{}],61:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n,t,o){r(this,e),a(this,{$uibModalInstance:n,Alertify:t,User:o})}return o(e,[{key:"send",value:function(e){var n=this;this.sending=!0,this.User.sendForgotPassword(e).then(function(){n.$uibModalInstance.close(),n.Alertify.success("Sent password recovery email to <strong>"+e+"</strong>")})["catch"](function(){return n.Alertify.error("Failed sending password recovery email")}).then(function(){return n.sending=!1})}}]),e}();t["default"]=i,i.$inject=["$uibModalInstance","Alertify","User"]},{}],62:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    Forgot your password?\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <form name="forgotPassword"\n        ng-submit="$ctrl.form.$valid && $ctrl.send($ctrl.email)"\n        novalidate>\n    <span ng-init="$ctrl.form = forgotPassword"></span>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.form.$submitted && $ctrl.form.email.$invalid }">\n      <label for="email"\n             class="control-label">\n        Your email address\n      </label>\n      <input type="email"\n             class="form-control"\n             id="email"\n             name="email"\n             placeholder="Email address..."\n             ng-model="$ctrl.email"\n             required\n             autofocus>\n      <span class="help-block"\n            ng-show="$ctrl.form.$submitted && $ctrl.form.email.$error.email">\n        Please enter a valid email address.\n      </span>\n    </div>\n\n    <button type="submit"\n            class="btn btn-primary btn-block"\n            ng-disabled="$ctrl.form.$pristine || $ctrl.sending">\n      <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.sending"></i>\n      Email me a recovery link\n    </button>\n  </form>\n</div><!-- .modal-body -->\n'},{}],63:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("to-markdown"),u=r(c),d=e("showdown"),f=r(d),p=new f["default"].Converter,m=function(){function e(n,t,r,i,l,c,u,d,f,m){a(this,e),o(this,{$uibModalInstance:n,$scope:t,$timeout:r,$location:i,Alertify:l,User:c,Group:u,Modal:d,action:f,group:m}),this.error=null,this.group?this.group.welcomeMessage=p.makeHtml(this.group.welcomeMessage):this.resetFields(),s["default"].isObject(this.User.current)&&this.setupMediumEditor()}return i(e,[{key:"resetFields",value:function(){this.group={name:"",logo:void 0,coverImage:void 0,welcomeMessage:""}}},{key:"setupMediumEditor",value:function(){var e=this;this.$timeout(function(){e.editor=new MediumEditor(document.querySelectorAll("#welcomeMessage"),{placeholder:{text:"Enter a welcome message...",hideOnClick:!1},toolbar:{buttons:["bold","italic","underline","anchor","orderedlist","unorderedlist"]},autoLink:!0}),e.editor.subscribe("editableInput",function(n,t){e.$scope.$apply(function(){e.group.welcomeMessage=(0,u["default"])(t.innerHTML,{converters:[{filter:function(e){return"SPAN"===e.nodeName||"DIV"===e.nodeName},replacement:function(e){return e}}]})})}),e.$scope.$on("$destroy",function(){return e.editor.destroy()})})}},{key:"openLoginModal",value:function(){var e=this;this.Modal.openLogin().then(function(){return e.User.loadCurrent()}).then(function(){return e.setupMediumEditor()})["catch"](function(e){return null})}},{key:"save",value:function(e){var n=this;this.saving=!0,this.error=null,this.Group.save(e).then(function(e){n.Group.current=e.data,n.User.loadCurrent(),n.$location.path("/g/"+e.data.urlName),n.$uibModalInstance.close(),n.Alertify.success(s["default"].capitalize(n.action)+"d group <strong>"+n.Group.current.name+"</strong>")})["catch"](function(e){return n.error=e.data.error}).then(function(){return n.saving=!1})}}]),e}();t["default"]=m,m.$inject=["$uibModalInstance","$scope","$timeout","$location","Alertify","User","Group","Modal","action","group"]},{lodash:"lodash",showdown:"showdown","to-markdown":75}],64:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    {{ $ctrl.action | capitalize }} Group\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <uib-alert type="danger"\n             ng-show="$ctrl.error && !$ctrl.error.errors">\n    <i class="fa fa-fw fa-exclamation-triangle"></i>\n    Failed sending request. Please try again or\n    <a href="mailto:support@loveisourweapon.com">contact us</a> about it.\n  </uib-alert>\n\n  <form name="groupEdit"\n        class="form-horizontal"\n        ng-submit="$ctrl.form.$valid && $ctrl.save($ctrl.group)"\n        ng-if="$ctrl.User.isAuthenticated()"\n        novalidate>\n    <span ng-init="$ctrl.form = groupEdit"></span>\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.name || $ctrl.error.errors.urlName }">\n      <label for="name"\n             class="col-xs-3 control-label">\n        Name\n      </label>\n      <div class="col-xs-9">\n        <input type="text"\n               class="form-control"\n               id="name"\n               name="name"\n               placeholder="Group name..."\n               ng-model="$ctrl.group.name"\n               required\n               autofocus>\n        <span class="help-block"\n              ng-hide="$ctrl.error.errors.name || $ctrl.error.errors.urlName">\n          https://loveisourweapon.com/g/{{ ($ctrl.group.name | kebabCase) || \'...\' }}\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.name"\n              ng-repeat="error in $ctrl.error.errors.name">\n          {{ error.message }}\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.urlName"\n              ng-repeat="error in $ctrl.error.errors.urlName">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.logo }">\n      <label for="logo"\n             class="col-xs-3 control-label">\n        Logo\n      </label>\n      <div class="col-xs-9">\n        <input type="text"\n               class="form-control"\n               id="logo"\n               name="logo"\n               placeholder="Image upload coming soon..."\n               ng-model="$ctrl.group.logo"\n               disabled>\n        <span class="help-block"\n              ng-hide="$ctrl.error.errors.logo">\n          Ideally 500px x 500px\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.logo"\n              ng-repeat="error in $ctrl.error.errors.logo">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.coverImage }">\n      <label for="coverImage"\n             class="col-xs-3 control-label">\n        Cover Image\n      </label>\n      <div class="col-xs-9">\n        <input type="text"\n               class="form-control"\n               id="coverImage"\n               name="coverImage"\n               placeholder="Image upload coming soon..."\n               ng-model="$ctrl.group.coverImage"\n               disabled>\n        <span class="help-block"\n              ng-hide="$ctrl.error.errors.coverImage">\n          Ideally 1280px x 580px\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.coverImage"\n              ng-repeat="error in $ctrl.error.errors.coverImage">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.welcomeMessage }">\n      <label for="welcomeMessage"\n             class="col-xs-3 control-label">\n        Intro Message\n      </label>\n      <div class="col-xs-9">\n        <div class="well well-sm medium-editor m-none">\n          <textarea id="welcomeMessage"\n                    ng-model="$ctrl.group.welcomeMessage"></textarea>\n        </div>\n        <span class="help-block"\n              ng-hide="$ctrl.error.errors.welcomeMessage">\n          Select text to add links, bold, italics, etc.\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.welcomeMessage"\n              ng-repeat="error in $ctrl.error.errors.welcomeMessage">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <button type="submit" hidden></button>\n  </form>\n\n  <div class="container-fluid"\n       ng-if="!$ctrl.User.isAuthenticated()">\n    <div class="row">\n      <div class="col-xs-12">\n        <button type="button"\n                class="btn btn-primary m-r-sm"\n                ng-click="$ctrl.openLoginModal()">\n          Login\n        </button>\n        Please login to setup a new group\n      </div>\n    </div>\n  </div>\n</div><!-- .modal-body -->\n\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-default"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    Cancel\n  </button>\n  <button type="button"\n          class="btn btn-primary"\n          ng-click="$ctrl.save($ctrl.group)"\n          ng-disabled="!$ctrl.User.isAuthenticated() || $ctrl.saving || $ctrl.form.$invalid">\n    <i class="fa fa-cog fa-spin" ng-show="$ctrl.saving"></i>\n    {{ $ctrl.action | capitalize }}\n  </button>\n</div><!-- .modal-footer -->\n';
},{}],65:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("angular"),u=r(c),d=e("angular-route"),f=r(d),p=e("angular-dragula"),m=r(p),h=e("angular-ui-bootstrap"),g=r(h),v=e("angular-marked"),b=r(v),$=e("angular-youtube-embed"),y=r($);e("angular-ui-switch");var w=e("../../filters/lodash"),k=r(w),_=e("../../services/Alertify"),j=(r(_),e("../../services/User")),O=r(j),M=e("../../services/Group"),A=r(M),C=e("../../services/Campaign"),U=r(C),x=e("../../services/Deed"),P=r(x),I=e("../../services/Comment"),E=r(I),T=e("./login/LoginCtrl"),G=r(T),F=e("./login/login.html"),N=r(F),D=e("./signup/SignupCtrl"),L=r(D),S=e("./signup/signup.html"),q=r(S),R=e("./forgot-password/ForgotPasswordCtrl"),H=r(R),z=e("./forgot-password/forgotPassword.html"),Y=r(z),J=e("./group-edit/GroupEditCtrl"),B=r(J),V=e("./group-edit/groupEdit.html"),W=r(V),K=e("./campaign-edit/CampaignEditCtrl"),Q=r(K),X=e("./campaign-edit/campaignEdit.html"),Z=r(X),ee=e("./deed-preview/DeedPreviewCtrl"),ne=r(ee),te=e("./deed-preview/deedPreview.html"),re=r(te),ae=e("./comment/CommentEditCtrl"),oe=r(ae),ie=e("./comment/commentEdit.html"),le=r(ie),se=e("./alert/AlertCtrl"),ce=r(se),ue=e("./alert/alert.html"),de=r(ue),fe=e("./confirm/ConfirmCtrl"),pe=r(fe),me=e("./confirm/confirm.html"),he=r(me),ge=function(){function e(n,t){a(this,e),o(this,{$uibModal:n,$q:t}),this.defaults={controllerAs:"$ctrl",size:"md"}}return i(e,[{key:"openLogin",value:function(){return this.$uibModal.open(s["default"].defaults({controller:G["default"],template:N["default"],size:"sm"},this.defaults)).result}},{key:"openSignup",value:function(){return this.$uibModal.open(s["default"].defaults({controller:L["default"],template:q["default"]},this.defaults)).result}},{key:"openForgotPassword",value:function(){return this.$uibModal.open(s["default"].defaults({controller:H["default"],template:Y["default"],size:"sm"},this.defaults)).result}},{key:"openGroupEdit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"create":arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.$uibModal.open(s["default"].defaults({controller:B["default"],template:W["default"],resolve:{action:this.$q.resolve(e),group:this.$q.resolve(u["default"].copy(n))}},this.defaults)).result}},{key:"openCampaignEdit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"create":arguments[0],n=arguments[1],t=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return this.$uibModal.open(s["default"].defaults({controller:Q["default"],template:Z["default"],resolve:{action:this.$q.resolve(e),group:this.$q.resolve(u["default"].copy(n)),campaign:this.$q.resolve(u["default"].copy(t))}},this.defaults)).result}},{key:"openDeedPreview",value:function(e){return this.$uibModal.open(s["default"].defaults({controller:ne["default"],template:re["default"],resolve:{deedId:this.$q.resolve(e)}},this.defaults)).result}},{key:"openCommentEdit",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"New Comment":arguments[0],n=arguments[1],t=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3];return this.$uibModal.open(s["default"].defaults({controller:oe["default"],template:le["default"],resolve:{title:this.$q.resolve(e),target:this.$q.resolve(n),group:this.$q.resolve(t),comment:this.$q.resolve(r)}},this.defaults)).result}},{key:"openAlert",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.$uibModal.open(s["default"].defaults({controller:ce["default"],template:de["default"],size:"sm",resolve:{message:this.$q.resolve(e),title:this.$q.resolve(n)}},this.defaults)).result}},{key:"openConfirm",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return this.$uibModal.open(s["default"].defaults({controller:pe["default"],template:he["default"],size:"sm",resolve:{message:this.$q.resolve(e),title:this.$q.resolve(n)}},this.defaults)).result}}]),e}();ge.$inject=["$uibModal","$q"],t["default"]=u["default"].module("app.services.Modal",[f["default"],(0,m["default"])(u["default"]),g["default"],b["default"],y["default"],"uiSwitch",k["default"],O["default"],A["default"],U["default"],P["default"],E["default"]]).service("Modal",ge).name,u["default"].module(g["default"]).directive("uibModalWindow",["$window",function(e){return{priority:1,link:function(n,t){function r(){t.find(".modal-body").css({maxHeight:.85*a.height()-80,overflowY:"auto"})}var a=u["default"].element(e);a.on("resize",r),n.$on("$destroy",function(){return a.off("resize",r)}),r()}}}])},{"../../filters/lodash":42,"../../services/Alertify":45,"../../services/Campaign":46,"../../services/Comment":47,"../../services/Deed":48,"../../services/Group":50,"../../services/User":70,"./alert/AlertCtrl":51,"./alert/alert.html":52,"./campaign-edit/CampaignEditCtrl":53,"./campaign-edit/campaignEdit.html":54,"./comment/CommentEditCtrl":55,"./comment/commentEdit.html":56,"./confirm/ConfirmCtrl":57,"./confirm/confirm.html":58,"./deed-preview/DeedPreviewCtrl":59,"./deed-preview/deedPreview.html":60,"./forgot-password/ForgotPasswordCtrl":61,"./forgot-password/forgotPassword.html":62,"./group-edit/GroupEditCtrl":63,"./group-edit/groupEdit.html":64,"./login/LoginCtrl":66,"./login/login.html":67,"./signup/SignupCtrl":68,"./signup/signup.html":69,angular:"angular","angular-dragula":"angular-dragula","angular-marked":"angular-marked","angular-route":"angular-route","angular-ui-bootstrap":"angular-ui-bootstrap","angular-ui-switch":"angular-ui-switch","angular-youtube-embed":"angular-youtube-embed",lodash:"lodash"}],66:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=function(){function e(n,t,r,i,l,c){a(this,e),o(this,{$uibModalInstance:n,Alertify:r,User:i,Group:l,Modal:c}),this.error=null,this.joinGroup=null,s["default"].has(t,"group")&&(this.joinGroup=!0)}return i(e,[{key:"authenticateFacebook",value:function(e){var n=this,t={};e&&(t.group=this.Group.current._id),this.loggingIn=!0,this.User.authenticateFacebook(t).then(function(){e&&(n.User.group=n.Group.current),n.$uibModalInstance.close(),n.Alertify.success("Signed in")})["catch"](function(){return n.Alertify.error("Failed signing in")}).then(function(){return n.loggingIn=!1})}},{key:"authenticateEmail",value:function(e,n){var t=this;this.loggingIn=!0,this.User.authenticateEmail(e,n).then(function(e){t.$uibModalInstance.close(),t.Alertify.success("Signed in"+(e.data.confirmed?"":". Please confirm your email address"))})["catch"](function(e){return t.error=e.data.message}).then(function(){return t.loggingIn=!1})}},{key:"openSignup",value:function(e){this.$uibModalInstance.dismiss(),this.Modal.openSignup()}},{key:"sendConfirmEmail",value:function(e){var n=this;this.sending=!0,this.User.sendConfirmEmail(e).then(function(){return n.Alertify.success("Sent confirmation email to <strong>"+e+"</strong>")})["catch"](function(){return n.Alertify.error("Failed sending confirmation email")}).then(function(){return n.sending=!1})}}]),e}();t["default"]=c,c.$inject=["$uibModalInstance","$routeParams","Alertify","User","Group","Modal"]},{lodash:"lodash"}],67:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    Login\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <div ng-if="$ctrl.joinGroup !== null">\n    <p>\n      <switch id="joinGroup"\n              name="joinGroup"\n              ng-model="$ctrl.joinGroup"\n              class="m-r-xs"></switch>\n      Join {{ $ctrl.Group.current.name }}\n    </p>\n    <hr>\n  </div>\n\n  <p>\n    <button ng-click="$ctrl.authenticateFacebook($ctrl.joinGroup)"\n            class="btn btn-facebook btn-block"\n            ng-disabled="$ctrl.loggingIn">\n      <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.loggingIn"></i>\n      <i class="fa fa-fw fa-facebook-official" ng-hide="$ctrl.loggingIn"></i>\n      Sign in with Facebook\n    </button>\n  </p>\n\n  <hr>\n\n  <form ng-submit="$ctrl.authenticateEmail($ctrl.email, $ctrl.password)">\n    <uib-alert type="danger"\n               class="p-sm"\n               ng-show="$ctrl.error">\n      <i class="fa fa-fw fa-exclamation-triangle"></i>\n      {{ $ctrl.error }}\n      <span ng-show="$ctrl.error.indexOf(\'Please confirm\') === 0">\n        <i class="fa fa-fw fa-blank"></i>\n        <a ng-click="$ctrl.sendConfirmEmail($ctrl.email)" href>\n          Re-send confirmation email?\n          <i ng-show="$ctrl.sending" class="fa fa-cog fa-spin"></i>\n        </a>\n      </span>\n    </uib-alert>\n\n    <div class="form-group">\n      <div class="input-group">\n        <div class="input-group-addon">\n          <i class="fa fa-fw fa-at"></i>\n        </div>\n        <input type="text"\n               class="form-control"\n               id="email"\n               name="email"\n               ng-model="$ctrl.email"\n               placeholder="Email"\n               autofocus>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <div class="input-group">\n        <div class="input-group-addon">\n          <i class="fa fa-fw fa-key"></i>\n        </div>\n        <input type="password"\n               class="form-control"\n               id="password"\n               name="password"\n               ng-model="$ctrl.password"\n               placeholder="Password">\n      </div>\n      <span class="help-block">\n        <a ng-click="$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openForgotPassword()" href>\n          Forgot your password?\n        </a>\n      </span>\n    </div>\n\n    <button type="submit"\n            class="btn btn-primary btn-block"\n            ng-disabled="!$ctrl.email || !$ctrl.password || $ctrl.loggingIn">\n      <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.loggingIn"></i>\n      Login\n    </button>\n  </form>\n\n  <hr>\n\n  <p>\n    Don\'t have an account yet?\n    <a ng-click="$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openSignup()" href>Sign up now</a>\n  </p>\n</div><!-- .modal-body -->\n'},{}],68:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(n,t,o,i,l,s){r(this,e),a(this,{$uibModalInstance:n,Alertify:o,User:i,Group:l,Modal:s}),this.error=null,this.joinGroup=null,_.has(t,"group")&&(this.joinGroup=!0),this.resetFields()}return o(e,[{key:"resetFields",value:function(){this.user={email:"",password:"",firstName:"",lastName:"",picture:void 0}}},{key:"authenticateFacebook",value:function(e){var n=this,t={};e&&(t.group=this.Group.current._id),this.saving=!0,this.User.authenticateFacebook(t).then(function(){e&&(n.User.group=n.Group.current),n.$uibModalInstance.close(),n.Alertify.success("Signed in")})["catch"](function(){return n.Alertify.error("Failed signing in")}).then(function(){return n.saving=!1})}},{key:"save",value:function(e,n){var t=this;n&&(e.groups=[this.Group.current._id]),this.saving=!0,this.error=null,this.User.save(e).then(function(r){return n&&(t.User.group=t.Group.current),t.$uibModalInstance.close(),t.Alertify.success("Signed up. Please confirm your email address"),t.User.authenticateEmail(e.email,e.password)})["catch"](function(e){return t.error=e.data.error}).then(function(){return t.saving=!1})}}]),e}();t["default"]=i,i.$inject=["$uibModalInstance","$routeParams","Alertify","User","Group","Modal"]},{}],69:[function(e,n,t){n.exports='<div class="modal-header">\n  <button type="button"\n          class="close"\n          data-dismiss="modal"\n          aria-label="Close"\n          ng-click="$ctrl.$uibModalInstance.dismiss()">\n    <span aria-hidden="true"><i class="fa fa-times"></i></span>\n  </button>\n  <h4 class="modal-title">\n    Sign up\n  </h4>\n</div><!-- .modal-header -->\n\n<div class="modal-body">\n  <div ng-if="$ctrl.joinGroup !== null">\n    <p>\n      <switch id="joinGroup"\n              name="joinGroup"\n              ng-model="$ctrl.joinGroup"\n              class="m-r-xs"></switch>\n      Join {{ $ctrl.Group.current.name }}\n    </p>\n    <hr>\n  </div>\n\n  <p>\n    <button ng-click="$ctrl.authenticateFacebook($ctrl.joinGroup)"\n            class="btn btn-facebook btn-block"\n            ng-disabled="$ctrl.saving">\n      <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.saving"></i>\n      <i class="fa fa-fw fa-facebook-official" ng-hide="$ctrl.saving"></i>\n      Sign up with Facebook\n    </button>\n  </p>\n\n  <hr>\n\n  <form name="userEdit"\n        class="form-horizontal"\n        ng-submit="$ctrl.form.$valid && $ctrl.save($ctrl.user, $ctrl.joinGroup)"\n        novalidate>\n    <span ng-init="$ctrl.form = userEdit"></span>\n\n    <uib-alert type="danger"\n               ng-show="$ctrl.error && !$ctrl.error.errors">\n      <i class="fa fa-fw fa-exclamation-triangle"></i>\n      Failed sending request. Please try again or\n      <a href="mailto:support@loveisourweapon.com">contact us</a> about it.\n    </uib-alert>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.email || ($ctrl.form.$submitted && $ctrl.form.email.$invalid) }">\n      <label for="email"\n             class="col-xs-3 control-label">\n        Email\n      </label>\n      <div class="col-xs-8">\n        <input type="email"\n               class="form-control"\n               id="email"\n               name="email"\n               placeholder="Email address..."\n               ng-model="$ctrl.user.email"\n               required\n               autofocus>\n        <span class="help-block"\n              ng-show="!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.email.$error.email">\n          Please enter a valid email address.\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.email"\n              ng-repeat="error in $ctrl.error.errors.email">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <div class="form-group"\n    ng-class="{ \'has-error\': $ctrl.form.$submitted && $ctrl.form.firstName.$invalid }">\n      <label for="firstName"\n             class="col-xs-3 control-label">\n        Name\n      </label>\n      <div class="col-xs-4">\n        <input type="text"\n               class="form-control"\n               id="firstName"\n               name="firstName"\n               placeholder="First..."\n               ng-model="$ctrl.user.firstName"\n               required>\n      </div>\n      <div class="col-xs-4">\n        <input type="text"\n               class="form-control"\n               id="lastName"\n               name="lastName"\n               placeholder="Last..."\n               ng-model="$ctrl.user.lastName">\n      </div>\n      <span class="help-block col-xs-8 col-xs-push-3"\n            ng-show="$ctrl.form.$submitted && $ctrl.form.firstName.$error.required">\n        First name is required.\n      </span>\n    </div>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.password || ($ctrl.form.$submitted && $ctrl.form.password.$invalid) }">\n      <label for="password"\n             class="col-xs-3 control-label">\n        Password\n      </label>\n      <div class="col-xs-8">\n        <input type="password"\n               class="form-control"\n               id="password"\n               name="password"\n               placeholder="Enter a password..."\n               ng-model="$ctrl.user.password"\n               required\n               minlength="8">\n        <span class="help-block"\n              ng-show="!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.password.$error.required">\n          Password is required.\n        </span>\n        <span class="help-block"\n              ng-show="!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.password.$error.minlength">\n          Password must be at least 8 characters.\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.password"\n              ng-repeat="error in $ctrl.error.errors.password">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <div class="form-group"\n         ng-class="{ \'has-error\': $ctrl.error.errors.picture }">\n      <label for="picture"\n             class="col-xs-3 control-label">\n        Picture\n      </label>\n      <div class="col-xs-8">\n        <input type="text"\n               class="form-control"\n               id="picture"\n               name="picture"\n               placeholder="Image upload coming soon..."\n               ng-model="$ctrl.user.picture"\n               disabled>\n        <span class="help-block"\n              ng-hide="$ctrl.error.errors.picture">\n          Ideally 200px x 200px\n        </span>\n        <span class="help-block"\n              ng-show="$ctrl.error.errors.picture"\n              ng-repeat="error in $ctrl.error.errors.picture">\n          {{ error.message }}\n        </span>\n      </div>\n    </div>\n\n    <!--<div class="g-recaptcha" data-sitekey="6LcbfcASAAAAADdqFypLWAOMD5Tp21hNsYhxmmM_"></div>-->\n\n    <button type="submit"\n            class="btn btn-primary btn-block"\n            ng-disabled="$ctrl.form.$pristine || $ctrl.saving">\n      <i class="fa fa-fw fa-cog fa-spin" ng-show="$ctrl.saving"></i>\n      Sign up\n    </button>\n  </form>\n\n  <hr>\n\n  <p>\n    Already have an account?\n    <a ng-click="$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openLogin()" href>Login now</a>\n  </p>\n</div><!-- .modal-body -->\n'},{}],70:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=e("lodash"),s=r(l),c=e("angular"),u=r(c),d=e("uuid"),f=r(d),p=e("seedrandom"),m=r(p),h=e("../config"),g=r(h),v=e("satellizer"),b=r(v),$=e("./Alertify"),y=r($),w=12,k={},_=null,j=null,O={},M=function(){function e(n,t,r,i,l){a(this,e),o(this,{$auth:n,$http:t,$q:r,Alertify:l}),this.baseUrl=i.serverUrl+"/users",this.authUrl=i.serverUrl+"/auth",this.loadCurrent()["catch"](function(){return null})}return i(e,[{key:"on",value:function(e,n){var t=f["default"].v4();return O[t]={key:e,callback:n},function(){return delete O[t]}}},{key:"pub",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];s["default"].forOwn(O,function(t){t.key===e&&t.callback(n)})}},{key:"authenticateFacebook",value:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$auth.authenticate("facebook",n).then(function(n){return e.$auth.setToken(n.data.token),e.loadCurrent()})}},{key:"authenticateEmail",value:function(e,n){var t=this;return e&&n?this.$auth.login({email:e,password:n}).then(function(e){return t.$auth.setToken(e.data.token),t.loadCurrent()}):this.$q.reject({data:{message:"Email and/or password not provided"}})}},{key:"isAuthenticated",value:function(){return this.$auth.isAuthenticated()}},{key:"isMemberOfGroup",value:function(e){return s["default"].has(_,"groups")&&s["default"].some(_.groups,function(n){return n._id===(s["default"].has(e,"_id")?e._id:e)})}},{key:"hasCommonGroup",value:function(e){return s["default"].some(e,this.isMemberOfGroup)}},{key:"logout",value:function(){var e=this;return this.$auth.logout().then(function(){_=null,e.pub("logout"),e.Alertify.success("Logged out")})}},{key:"find",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:"findById",value:function(e,n){return this.$http.get(this.baseUrl+"/"+e,{params:n})}},{key:"loadCurrent",value:function(){var e=this;return this.isAuthenticated()?this.$http.get(this.baseUrl+"/me").then(function(n){return _=n.data,e.pub("login",_),_.groups.length&&(j=_.groups[0]),n}):this.$q.reject("Not logged in")}},{key:"save",value:function(e){return s["default"].has(e,"_id")?this.$http.put(this.baseUrl+"/"+e._id,e):this.$http.post(this.baseUrl,e)}},{key:"update",value:function(e,n){var t=this;return this.$http.patch(this.baseUrl+"/"+e._id,n).then(function(e){return t.loadCurrent()})}},{key:"sendForgotPassword",value:function(e){return this.$http.get(this.authUrl+"/forgot",{params:{email:e}})}},{key:"resetPassword",value:function(e,n){return this.$http.post(this.authUrl+"/reset",{password:e,token:n})}},{key:"sendConfirmEmail",value:function(e){return this.$http.get(this.authUrl+"/confirm",{params:{email:e}})}},{key:"confirmEmail",value:function(e){return this.$http.post(this.authUrl+"/confirm",{token:e})}},{key:"getDefaultUserImage",value:function(e){return e?(s["default"].has(k,e)||(k[e]=Math.floor((0,m["default"])(e)()*w)),"/images/user"+k[e]+".png"):"/images/user0.png"}},{key:"current",get:function(){return _}},{key:"group",set:function(e){j=e},get:function(){return j}}]),e}();M.$inject=["$auth","$http","$q","config","Alertify"],t["default"]=u["default"].module("app.services.User",[g["default"],b["default"],y["default"]]).config(["$authProvider","config",function(e,n){e.loginUrl=n.serverUrl+"/auth/login",e.signupUrl=n.serverUrl+"/auth/signup",e.facebook({clientId:n.facebookClientId,url:n.serverUrl+"/auth/facebook"})}]).service("User",M).name},{"../config":40,"./Alertify":45,angular:"angular",lodash:"lodash",satellizer:"satellizer",seedrandom:"seedrandom",uuid:79}],71:[function(e,n,t){n.exports=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"]},{}],72:[function(e,n,t){},{}],73:[function(e,n,t){"use strict";function r(e){return!(!e||!c[e.nodeName])}function a(e){return!(!e||!s[e.nodeName])}function o(e,n){if(e.firstChild&&"PRE"!==e.nodeName){"function"!=typeof n&&(n=r);for(var t=null,o=!1,s=null,c=l(s,e);c!==e;){if(3===c.nodeType){var u=c.data.replace(/[ \r\n\t]+/g," ");if(t&&!/ $/.test(t.data)||o||" "!==u[0]||(u=u.substr(1)),!u){c=i(c);continue}c.data=u,t=c}else{if(1!==c.nodeType){c=i(c);continue}n(c)||"BR"===c.nodeName?(t&&(t.data=t.data.replace(/ $/,"")),t=null,o=!1):a(c)&&(t=null,o=!0)}var d=l(s,c);s=c,c=d}t&&(t.data=t.data.replace(/ $/,""),t.data||i(t))}}function i(e){var n=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),n}function l(e,n){return e&&e.parentNode===n||"PRE"===n.nodeName?n.nextSibling||n.parentNode:n.firstChild||n.nextSibling||n.parentNode}var s=e("void-elements");Object.keys(s).forEach(function(e){s[e.toUpperCase()]=1});var c={};e("block-elements").forEach(function(e){c[e.toUpperCase()]=1}),n.exports=o},{"block-elements":71,"void-elements":80}],74:[function(e,n,t){var r,a=this&&this.__extends||function(e,n){function t(){this.constructor=e}for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)},o=Error;!function(e){function n(e,t){switch(typeof e){case"undefined":case"boolean":case"string":case"number":return e===t;case"object":if(null===e)return null===t;if(M(e)){if(!M(t)||e.length!==t.length)return!1;for(var r=0,a=e.length;a>r;r++)if(!n(e[r],t[r]))return!1;return!0}var o=$(t),i=o.length;if($(e).length!==i)return!1;for(var r=0;i>r;r++)if(!n(e[r],t[r]))return!1;return!0;default:return!1}}function t(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function r(e){for(var n=0,t=_.length;t>n;n++)if(_[n].obj===e)return _[n]}function i(e,n){for(var t=0,r=e.observers.length;r>t;t++)if(e.observers[t].callback===n)return e.observers[t].observer}function l(e,n){for(var t=0,r=e.observers.length;r>t;t++)if(e.observers[t].observer===n)return void e.observers.splice(t,1)}function s(e,n){d(n),clearTimeout(n.next);var t=r(e);l(t,n)}function c(e){return"object"==typeof e?JSON.parse(JSON.stringify(e)):e}function u(e,n){var t,a=[],l=r(e);if(l?t=i(l,n):(l=new j(e),_.push(l)),t)return t;if(t={},l.value=c(e),n){t.callback=n,t.next=null;var s=this.intervals||[100,1e3,1e4,6e4];if(void 0===s.push)throw new o("jsonpatch.intervals must be an array");var u=0,f=function(){d(t)},p=function(){clearTimeout(t.next),t.next=setTimeout(function(){f(),u=0,t.next=setTimeout(m,s[u++])},0)},m=function(){f(),u==s.length&&(u=s.length-1),t.next=setTimeout(m,s[u++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",p),window.addEventListener("mouseup",p),window.addEventListener("keydown",p)):(document.documentElement.attachEvent("onmousedown",p),document.documentElement.attachEvent("onmouseup",p),document.documentElement.attachEvent("onkeydown",p))),t.next=setTimeout(m,s[u++])}return t.patches=a,t.object=e,l.observers.push(new O(n,t)),t}function d(e){for(var n,t=0,r=_.length;r>t;t++)if(_[t].obj===e.object){n=_[t];break}f(n.value,e.object,e.patches,""),e.patches.length&&m(n.value,e.patches);var a=e.patches;return a.length>0&&(e.patches=[],e.callback&&e.callback(a)),a}function f(e,n,r,a){for(var o=$(n),i=$(e),l=!1,s=!1,u=i.length-1;u>=0;u--){var d=i[u],p=e[d];if(n.hasOwnProperty(d)){var m=n[d];"object"==typeof p&&null!=p&&"object"==typeof m&&null!=m?f(p,m,r,a+"/"+t(d)):p!=m&&(l=!0,r.push({op:"replace",path:a+"/"+t(d),value:c(m)}))}else r.push({op:"remove",path:a+"/"+t(d)}),s=!0}if(s||o.length!=i.length)for(var u=0;u<o.length;u++){var d=o[u];e.hasOwnProperty(d)||r.push({op:"add",path:a+"/"+t(d),value:c(n[d])})}}function p(e){for(var n,t=0,r=e.length;r>t;){if(n=e.charCodeAt(t),!(n>=48&&57>=n))return!1;t++}return!0}function m(e,n,t){for(var r,a,o=!1,i=0,l=n.length;l>i;){r=n[i],i++;for(var s=r.path||"",c=s.split("/"),u=e,d=1,f=c.length,m=void 0;;){if(a=c[d],t&&void 0===m&&(void 0===u[a]?m=c.slice(0,d).join("/"):d==f-1&&(m=r.path),void 0!==m&&this.validator(r,i-1,e,m)),d++,void 0===a&&d>=f){o=k[r.op].call(r,u,a,e);break}if(M(u)){if("-"===a)a=u.length;else{if(t&&!p(a))throw new A("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i-1,r.path,r);a=parseInt(a,10)}if(d>=f){if(t&&"add"===r.op&&a>u.length)throw new A("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i-1,r.path,r);o=w[r.op].call(r,u,a,e);break}}else if(a&&-1!=a.indexOf("~")&&(a=a.replace(/~1/g,"/").replace(/~0/g,"~")),d>=f){o=y[r.op].call(r,u,a,e);break}u=u[a]}}return o}function h(e,n){var t=[];return f(e,n,t,""),t}function g(e){if(void 0===e)return!0;if("array"==typeof e||"object"==typeof e)for(var n in e)if(g(e[n]))return!0;return!1}function v(n,t,r,a){if("object"!=typeof n||null===n||M(n))throw new A("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,n,r);if(!y[n.op])throw new A("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,n,r);if("string"!=typeof n.path)throw new A("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,n,r);if(("move"===n.op||"copy"===n.op)&&"string"!=typeof n.from)throw new A("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,n,r);if(("add"===n.op||"replace"===n.op||"test"===n.op)&&void 0===n.value)throw new A("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,n,r);if(("add"===n.op||"replace"===n.op||"test"===n.op)&&g(n.value))throw new A("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,n,r);if(r)if("add"==n.op){var o=n.path.split("/").length,i=a.split("/").length;if(o!==i+1&&o!==i)throw new A("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,n,r)}else if("replace"===n.op||"remove"===n.op||"_get"===n.op){if(n.path!==a)throw new A("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,n,r)}else if("move"===n.op||"copy"===n.op){var l={op:"_get",path:n.from,value:void 0},s=e.validate([l],r);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new A("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,n,r)}}function b(e,n){try{if(!M(e))throw new A("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)n=JSON.parse(JSON.stringify(n)),m.call(this,n,e,!0);else for(var t=0;t<e.length;t++)this.validator(e[t],t)}catch(r){if(r instanceof A)return r;throw r}}if(!e.observe){var $=function(e){if(M(e)){for(var n=new Array(e.length),t=0;t<n.length;t++)n[t]=t.toString();return n}if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n},y={add:function(e,n){return e[n]=this.value,!0},remove:function(e,n){return delete e[n],!0},replace:function(e,n){return e[n]=this.value,!0},move:function(e,n,t){var r={op:"_get",path:this.from};return m(t,[r]),m(t,[{op:"remove",path:this.from}]),m(t,[{op:"add",path:this.path,value:r.value}]),!0},copy:function(e,n,t){var r={op:"_get",path:this.from};return m(t,[r]),m(t,[{op:"add",path:this.path,value:r.value}]),!0},test:function(e,t){return n(e[t],this.value)},_get:function(e,n){this.value=e[n]}},w={add:function(e,n){return e.splice(n,0,this.value),!0},remove:function(e,n){return e.splice(n,1),!0},replace:function(e,n){return e[n]=this.value,!0},move:y.move,copy:y.copy,test:y.test,_get:y._get},k={add:function(e){k.remove.call(this,e);for(var n in this.value)this.value.hasOwnProperty(n)&&(e[n]=this.value[n]);return!0},remove:function(e){for(var n in e)e.hasOwnProperty(n)&&y.remove.call(this,e,n);return!0},replace:function(e){return m(e,[{op:"remove",
path:this.path}]),m(e,[{op:"add",path:this.path,value:this.value}]),!0},move:y.move,copy:y.copy,test:function(e){return JSON.stringify(e)===JSON.stringify(this.value)},_get:function(e){this.value=e}},_=[],j=function(){function e(e){this.observers=[],this.obj=e}return e}(),O=function(){function e(e,n){this.callback=e,this.observer=n}return e}();e.unobserve=s,e.observe=u,e.generate=d;var M;M=Array.isArray?Array.isArray:function(e){return e.push&&"number"==typeof e.length},e.apply=m,e.compare=h;var A=function(e){function n(n,t,r,a,o){e.call(this,n),this.message=n,this.name=t,this.index=r,this.operation=a,this.tree=o}return a(n,e),n}(o);e.JsonPatchError=A,e.Error=A,e.hasUndefined=g,e.validator=v,e.validate=b}}(r||(r={})),"undefined"!=typeof t&&(t.apply=r.apply,t.observe=r.observe,t.unobserve=r.unobserve,t.generate=r.generate,t.compare=r.compare,t.validate=r.validate,t.validator=r.validator,t.JsonPatchError=r.JsonPatchError,t.Error=r.Error)},{}],75:[function(e,n,t){"use strict";function r(e){return e.replace(/^[ \r\n\t]+|[ \r\n\t]+$/g,"")}function a(e){return-1!==_.indexOf(e.nodeName.toLowerCase())}function o(e){return-1!==j.indexOf(e.nodeName.toLowerCase())}function i(){var e=k.DOMParser,n=!1;try{(new e).parseFromString("","text/html")&&(n=!0)}catch(t){}return n}function l(){var e=function(){};return e.prototype.parseFromString=function(e){var n=b.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?n.documentElement.innerHTML=e:n.body.innerHTML=e,n},e}function s(e){var n=(new O).parseFromString(e,"text/html");return w(n,a),n}function c(e){for(var n,t,r,a=[e],o=[];a.length>0;)for(n=a.shift(),o.push(n),t=n.childNodes,r=0;r<t.length;r++)1===t[r].nodeType&&a.push(t[r]);return o.shift(),o}function u(e){for(var n="",t=0;t<e.childNodes.length;t++)if(1===e.childNodes[t].nodeType)n+=e.childNodes[t]._replacement;else{if(3!==e.childNodes[t].nodeType)continue;n+=e.childNodes[t].data}return n}function d(e,n){return e.cloneNode(!1).outerHTML.replace("><",">"+n+"<")}function f(e,n){if("string"==typeof n)return n===e.nodeName.toLowerCase();if(Array.isArray(n))return-1!==n.indexOf(e.nodeName.toLowerCase());if("function"==typeof n)return n.call(g,e);throw new TypeError("`filter` needs to be a string, array, or function")}function p(e,n){var t,r,o;return"left"===e?(t=n.previousSibling,r=/ $/):(t=n.nextSibling,r=/^ /),t&&(3===t.nodeType?o=r.test(t.nodeValue):1!==t.nodeType||a(t)||(o=r.test(t.textContent))),o}function m(e){var n="",t="";if(!a(e)){var r=/^[ \r\n\t]/.test(e.innerHTML),o=/[ \r\n\t]$/.test(e.innerHTML);r&&!p("left",e)&&(n=" "),o&&!p("right",e)&&(t=" ")}return{leading:n,trailing:t}}function h(e){var n,t=u(e);if(!o(e)&&!/A/.test(e.nodeName)&&/^\s*$/i.test(t))return void(e._replacement="");for(var a=0;a<v.length;a++){var i=v[a];if(f(e,i.filter)){if("function"!=typeof i.replacement)throw new TypeError("`replacement` needs to be a function that returns a string");var l=m(e);(l.leading||l.trailing)&&(t=r(t)),n=l.leading+i.replacement.call(g,t,e)+l.trailing;break}}e._replacement=n}var g,v,b,$=e("./lib/md-converters"),y=e("./lib/gfm-converters"),w=e("collapse-whitespace"),k="undefined"!=typeof window?window:this;b="undefined"==typeof document?e("jsdom").jsdom():document;var _=["address","article","aside","audio","blockquote","body","canvas","center","dd","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","isindex","li","main","menu","nav","noframes","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul"],j=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],O=i()?k.DOMParser:l();g=function(e,n){if(n=n||{},"string"!=typeof e)throw new TypeError(e+" is not a string");e=e.replace(/(\d+)\. /g,"$1\\. ");var t,r=s(e).body,a=c(r);v=$.slice(0),n.gfm&&(v=y.concat(v)),n.converters&&(v=n.converters.concat(v));for(var o=a.length-1;o>=0;o--)h(a[o]);return t=u(r),t.replace(/^[\t\r\n]+|[\t\r\n\s]+$/g,"").replace(/\n\s+\n/g,"\n\n").replace(/\n{3,}/g,"\n\n")},g.isBlock=a,g.isVoid=o,g.trim=r,g.outer=d,n.exports=g},{"./lib/gfm-converters":76,"./lib/md-converters":77,"collapse-whitespace":73,jsdom:72}],76:[function(e,n,t){"use strict";function r(e,n){var t=Array.prototype.indexOf.call(n.parentNode.childNodes,n),r=" ";return 0===t&&(r="| "),r+e+" |"}var a=/highlight highlight-(\S+)/;n.exports=[{filter:"br",replacement:function(){return"\n"}},{filter:["del","s","strike"],replacement:function(e){return"~~"+e+"~~"}},{filter:function(e){return"checkbox"===e.type&&"LI"===e.parentNode.nodeName},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}},{filter:["th","td"],replacement:function(e,n){return r(e,n)}},{filter:"tr",replacement:function(e,n){var t="",a={left:":--",right:"--:",center:":-:"};if("THEAD"===n.parentNode.nodeName)for(var o=0;o<n.childNodes.length;o++){var i=n.childNodes[o].attributes.align,l="---";i&&(l=a[i.value]||l),t+=r(l,n.childNodes[o])}return"\n"+e+(t?"\n"+t:"")}},{filter:"table",replacement:function(e){return"\n\n"+e+"\n\n"}},{filter:["thead","tbody","tfoot"],replacement:function(e){return e}},{filter:function(e){return"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,n){return"\n\n```\n"+n.firstChild.textContent+"\n```\n\n"}},{filter:function(e){return"PRE"===e.nodeName&&"DIV"===e.parentNode.nodeName&&a.test(e.parentNode.className)},replacement:function(e,n){var t=n.parentNode.className.match(a)[1];return"\n\n```"+t+"\n"+n.textContent+"\n```\n\n"}},{filter:function(e){return"DIV"===e.nodeName&&a.test(e.className)},replacement:function(e){return"\n\n"+e+"\n\n"}}]},{}],77:[function(e,n,t){"use strict";n.exports=[{filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},{filter:"br",replacement:function(){return"  \n"}},{filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,n){for(var t=n.nodeName.charAt(1),r="",a=0;t>a;a++)r+="#";return"\n\n"+r+" "+e+"\n\n"}},{filter:"hr",replacement:function(){return"\n\n* * *\n\n"}},{filter:["em","i"],replacement:function(e){return"_"+e+"_"}},{filter:["strong","b"],replacement:function(e){return"**"+e+"**"}},{filter:function(e){var n=e.previousSibling||e.nextSibling,t="PRE"===e.parentNode.nodeName&&!n;return"CODE"===e.nodeName&&!t},replacement:function(e){return"`"+e+"`"}},{filter:function(e){return"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,n){var t=n.title?' "'+n.title+'"':"";return"["+e+"]("+n.getAttribute("href")+t+")"}},{filter:"img",replacement:function(e,n){var t=n.alt||"",r=n.getAttribute("src")||"",a=n.title||"",o=a?' "'+a+'"':"";return r?"!["+t+"]("+r+o+")":""}},{filter:function(e){return"PRE"===e.nodeName&&"CODE"===e.firstChild.nodeName},replacement:function(e,n){return"\n\n    "+n.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},{filter:"blockquote",replacement:function(e){return e=this.trim(e),e=e.replace(/\n{3,}/g,"\n\n"),e=e.replace(/^/gm,"> "),"\n\n"+e+"\n\n"}},{filter:"li",replacement:function(e,n){e=e.replace(/^\s+/,"").replace(/\n/gm,"\n    ");var t="*   ",r=n.parentNode,a=Array.prototype.indexOf.call(r.children,n)+1;return t=/ol/i.test(r.nodeName)?a+".  ":"*   ",t+e}},{filter:["ul","ol"],replacement:function(e,n){for(var t=[],r=0;r<n.childNodes.length;r++)t.push(n.childNodes[r]._replacement);return/li/i.test(n.parentNode.nodeName)?"\n"+t.join("\n"):"\n\n"+t.join("\n")+"\n\n"}},{filter:function(e){return this.isBlock(e)},replacement:function(e,n){return"\n\n"+this.outer(n,e)+"\n\n"}},{filter:function(){return!0},replacement:function(e,n){return this.outer(n,e)}}]},{}],78:[function(e,n,t){(function(e){var t;if(e.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);t=function(){return crypto.getRandomValues(r),r}}if(!t){var a=new Array(16);t=function(){for(var e,n=0;16>n;n++)0===(3&n)&&(e=4294967296*Math.random()),a[n]=e>>>((3&n)<<3)&255;return a}}n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,n,t){function r(e,n,t){var r=n&&t||0,a=0;for(n=n||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>a&&(n[r+a++]=c[e])});16>a;)n[r+a++]=0;return n}function a(e,n){var t=n||0,r=s;return r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]}function o(e,n,t){var r=n&&t||0,o=n||[];e=e||{};var i=void 0!==e.clockseq?e.clockseq:p,l=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:h+1,c=l-m+(s-h)/1e4;if(0>c&&void 0===e.clockseq&&(i=i+1&16383),(0>c||l>m)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=l,h=s,p=i,l+=122192928e5;var u=(1e4*(268435455&l)+s)%4294967296;o[r++]=u>>>24&255,o[r++]=u>>>16&255,o[r++]=u>>>8&255,o[r++]=255&u;var d=l/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=i>>>8|128,o[r++]=255&i;for(var g=e.node||f,v=0;6>v;v++)o[r+v]=g[v];return n?n:a(o)}function i(e,n,t){var r=n&&t||0;"string"==typeof e&&(n="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var i=0;16>i;i++)n[r+i]=o[i];return n||a(o)}for(var l=e("./rng"),s=[],c={},u=0;256>u;u++)s[u]=(u+256).toString(16).substr(1),c[s[u]]=u;var d=l(),f=[1|d[0],d[1],d[2],d[3],d[4],d[5]],p=16383&(d[6]<<8|d[7]),m=0,h=0,g=i;g.v1=o,g.v4=i,g.parse=r,g.unparse=a,n.exports=g},{"./rng":78}],80:[function(e,n,t){n.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},{}]},{},[3]);
//# sourceMappingURL=../assets/app-969b0d7e8a.bundle.js.map
