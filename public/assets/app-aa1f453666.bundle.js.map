{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.bundle.js","app/components/app/AppCtrl.js","app/components/app/app.html","app/components/index.js","app/components/comment-form/CommentFormCtrl.js","app/components/comment-form/commentForm.html","app/components/comment-form/index.js","app/components/confirm-email/ConfirmEmailCtrl.js","app/components/confirm-email/confirmEmail.html","app/components/confirm-email/index.js","app/components/deed-list/DeedListCtrl.js","app/components/deed-list/deedListHorizontal.html","app/components/deed-list/deedListVertical.html","app/components/deed-list/index.js","app/components/deed/DeedCtrl.js","app/components/deed/deed.html","app/components/deed/index.js","app/components/feed/FeedCtrl.js","app/components/feed/feed.html","app/components/feed/index.js","app/components/global-feed/GlobalFeedCtrl.js","app/components/global-feed/globalFeed.html","app/components/global-feed/index.js","app/components/group/GroupCtrl.js","app/components/group/group.html","app/components/group/index.js","app/components/home/HomeCtrl.js","app/components/home/HomeFeedCtrl.js","app/components/home/WelcomeCtrl.js","app/components/home/home.html","app/components/home/homeFeed.html","app/components/home/index.js","app/components/home/welcome.html","app/components/jumbotron/JumbotronCtrl.js","app/components/jumbotron/index.js","app/components/jumbotron/jumbotron.html","app/components/navbar/NavbarCtrl.js","app/components/navbar/index.js","app/components/navbar/navbar.html","app/components/reset-password/ResetPasswordCtrl.js","app/components/reset-password/index.js","app/components/reset-password/resetPassword.html","app/components/user/UserCtrl.js","app/components/user/index.js","app/components/user/user.html","app/config/index.js","app/directives/index.js","app/filters/lodash.js","app/filters/moment.js","app/services/Act.js","app/services/Alertify.js","app/services/Campaign.js","app/services/Comment.js","app/services/Deed.js","app/services/Feed.js","app/services/Group.js","app/services/Modal/alert/AlertCtrl.js","app/services/Modal/alert/alert.html","app/services/Modal/campaign-edit/CampaignEditCtrl.js","app/services/Modal/campaign-edit/campaignEdit.html","app/services/Modal/confirm/ConfirmCtrl.js","app/services/Modal/confirm/confirm.html","app/services/Modal/deed-preview/DeedPreviewCtrl.js","app/services/Modal/deed-preview/deedPreview.html","app/services/Modal/forgot-password/ForgotPasswordCtrl.js","app/services/Modal/forgot-password/forgotPassword.html","app/services/Modal/group-edit/GroupEditCtrl.js","app/services/Modal/group-edit/groupEdit.html","app/services/Modal/index.js","app/services/Modal/login/LoginCtrl.js","app/services/Modal/login/login.html","app/services/Modal/signup/SignupCtrl.js","app/services/Modal/signup/signup.html","app/services/User.js","node_modules/block-elements/index.js","node_modules/collapse-whitespace/lib/whitespace.js","node_modules/fast-json-patch/src/json-patch-duplex.js","node_modules/to-markdown/index.js","node_modules/to-markdown/lib/gfm-converters.js","node_modules/to-markdown/lib/html-parser.js","node_modules/to-markdown/lib/md-converters.js","node_modules/uuid/rng-browser.js","node_modules/uuid/uuid.js","node_modules/void-elements/index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","AppCtrl","this","date","Date","now","2","3","_interopRequireDefault","obj","__esModule","default","_angular","_angular2","_angularRoute","_angularRoute2","_uiSelect","_uiSelect2","_navbar","_navbar2","_home","_globalFeed","_deed","_group","_user","_confirmEmail","_resetPassword","_AppCtrl","_AppCtrl2","_app","_app2","home","globalFeed","deed","group","user","confirmEmail","resetPassword","component","controller","template","config","$compileProvider","$httpProvider","$routeProvider","$locationProvider","uiSelectConfig","when","controllerAs","homeTpl","globalFeedTpl","deedTpl","groupTpl","userTpl","confirmEmailTpl","resetPasswordTpl","otherwise","debugInfoEnabled","useApplyAsync","html5Mode","theme","appendToBody","name","../confirm-email","../deed","../global-feed","../group","../home","../navbar","../reset-password","../user","./AppCtrl","./app.html","angular","angular-route","ui-select","4","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_toMarkdown","_toMarkdown2","CommentFormCtrl","$element","$scope","$timeout","Alertify","User","Comment","Feed","newComment","content","text","$inject","setupMediumEditor","editor","destroy","comment","_id","act","_this","setGroupAndTarget","saving","save","then","success","update","setContent","_this2","MediumEditor","find","placeholder","hideOnClick","toolbar","buttons","autoLink","subscribe","event","editable","$apply","innerHTML","converters","filter","node","nodeName","replacement","to-markdown","5","6","_Alertify","_Alertify2","_User","_User2","_Comment","_Comment2","_Feed","_Feed2","_CommentFormCtrl","_CommentFormCtrl2","_commentForm","_commentForm2","bindings","../../services/Alertify","../../services/Comment","../../services/Feed","../../services/User","./CommentFormCtrl","./commentForm.html","7","ConfirmEmailCtrl","$rootScope","$routeParams","$location","title","token","error","url","8","9","undefined","_jumbotron","_jumbotron2","_ConfirmEmailCtrl","_ConfirmEmailCtrl2","_confirmEmail2","../jumbotron","./ConfirmEmailCtrl","./confirmEmail.html","10","_lodash","_lodash2","_deedListHorizontal","_deedListHorizontal2","_deedListVertical","_deedListVertical2","DeedListCtrl","$templateCache","Deed","Act","loading","fields","response","deeds","data","each","count","put","layout","./deedListHorizontal.html","./deedListVertical.html","lodash","11","12","13","_Deed","_Deed2","_Act","_Act2","_DeedListCtrl","_DeedListCtrl2","../../services/Act","../../services/Deed","./DeedListCtrl","14","DeedCtrl","Group","Modal","loadDeed","current","urlTitle","findOne","refresh","message","_this3","doing","done","15","16","_angularMarked","_angularMarked2","_angularYoutubeEmbed","_angularYoutubeEmbed2","_angularUiBootstrap","_angularUiBootstrap2","_Group","_Group2","_Modal","_Modal2","_feed","_feed2","_deedList","_deedList2","_DeedCtrl","_DeedCtrl2","_deed2","../../services/Group","../../services/Modal","../comment-form","../deed-list","../feed","./DeedCtrl","./deed.html","angular-marked","angular-ui-bootstrap","angular-youtube-embed","17","FeedCtrl","feedItems","feedUpdateOff","onUpdate","options","clear","loadFeed","after","params","merge","criteria","has","concat","$inView","$index","before","18","19","_angularInview","_angularInview2","_moment","_moment2","_FeedCtrl","_FeedCtrl2","../../filters/moment","./FeedCtrl","./feed.html","angular-inview","20","GlobalFeedCtrl","21","22","_GlobalFeedCtrl","_GlobalFeedCtrl2","_globalFeed2","./GlobalFeedCtrl","./globalFeed.html","23","_seedrandom","_seedrandom2","_fastJsonPatch","_fastJsonPatch2","NUM_IMAGES","GroupCtrl","Campaign","jumbotronBackground","Math","floor","activeTab","campaign","loadGroup","loginOff","on","setCampaignAlert","isMemberOfGroup","logoutOff","urlName","loadCampaign","isAuthenticated","err","active","currentDeed","findLast","published","search","editCampaign","showCampaignAlert","isNull","admins","indexOf","action","_this4","openCampaignEdit","_this5","openConfirm","observer","observe","dateEnd","generate","_this6","campaignDeed","_this7","groups","push","splice","_this8","owner","openAlert","isAdmin","fast-json-patch","seedrandom","24","25","_Campaign","_Campaign2","_GroupCtrl","_GroupCtrl2","_group2","../../services/Campaign","./GroupCtrl","./group.html","26","HomeCtrl","27","HomeFeedCtrl","countAllGroupActs","map","join","28","WelcomeCtrl","numberOfGroups","Number","numberOfUsers","29","30","31","_HomeCtrl","_HomeCtrl2","_home2","_WelcomeCtrl","_WelcomeCtrl2","_welcome","_welcome2","_HomeFeedCtrl","_HomeFeedCtrl2","_homeFeed","_homeFeed2","./HomeCtrl","./HomeFeedCtrl","./WelcomeCtrl","./home.html","./homeFeed.html","./welcome.html","32","33","JumbotronCtrl","styles","background-image","background","34","_JumbotronCtrl","_JumbotronCtrl2","transclude","image","classes","./JumbotronCtrl","./jumbotron.html","35","36","MIN_QUERY_LENGTH","NavbarCtrl","$q","choices","selected","query","all","responses","item","path","collapseMenu","select","$","collapse","37","_angularSanitize","_angularSanitize2","_NavbarCtrl","_NavbarCtrl2","./NavbarCtrl","./navbar.html","angular-sanitize","38","39","ResetPasswordCtrl","password","openLogin","40","_directives","_directives2","_ResetPasswordCtrl","_ResetPasswordCtrl2","_resetPassword2","../../directives","./ResetPasswordCtrl","./resetPassword.html","41","42","UserCtrl","loadUser","firstName","lastName","userId","findById","43","_UserCtrl","_UserCtrl2","_user2","./UserCtrl","./user.html","44","45","defaults","serverUrl","facebookClientId","constant","LIOW_CONFIG","46","directive","scope","otherValue","link","elm","attrs","ctrl","$validators","sameAs","modelValue","restrict","element","head","focus","isFunction","47","capitalize","kebabCase","48","dateString","format","fromNow","moment","49","_config","_config2","$http","baseUrl","counters","get","global","post","service","../config","50","_alertify","_alertify2","factory","logPosition","log","icon","setLogTemplate","input","alertify.js","51","resolve","reject","_","changes","patch","52","method","acts","53","deedId","set","54","_uuid","_uuid2","FEED_UPDATE_DELAY","listeners","callback","id","v4","forOwn","listener","uuid","55","currentGroup","./User","56","AlertCtrl","$uibModalInstance","57","58","CampaignEditCtrl","loadDeeds","cloneDeep","resetFields","toSave","forEach","close","differenceBy","59","60","ConfirmCtrl","61","62","DeedPreviewCtrl","63","64","ForgotPasswordCtrl","email","form","$setDirty","sending","sendForgotPassword","65","66","_showdown","_showdown2","converter","Converter","GroupEditCtrl","users","setupCampaign","welcomeMessage","makeHtml","logo","coverImage","document","querySelectorAll","type","loadCurrent","showdown","67","68","_angularDragula","_angularDragula2","_lodash3","_lodash4","_LoginCtrl","_LoginCtrl2","_login","_login2","_SignupCtrl","_SignupCtrl2","_signup","_signup2","_ForgotPasswordCtrl","_ForgotPasswordCtrl2","_forgotPassword","_forgotPassword2","_GroupEditCtrl","_GroupEditCtrl2","_groupEdit","_groupEdit2","_CampaignEditCtrl","_CampaignEditCtrl2","_campaignEdit","_campaignEdit2","_DeedPreviewCtrl","_DeedPreviewCtrl2","_deedPreview","_deedPreview2","_AlertCtrl","_AlertCtrl2","_alert","_alert2","_ConfirmCtrl","_ConfirmCtrl2","_confirm","_confirm2","$uibModal","size","canSwitch","open","result","copy","$window","priority","setMaxHeight","css","maxHeight","window","height","overflowY","$on","off","../../filters/lodash","./alert/AlertCtrl","./alert/alert.html","./campaign-edit/CampaignEditCtrl","./campaign-edit/campaignEdit.html","./confirm/ConfirmCtrl","./confirm/confirm.html","./deed-preview/DeedPreviewCtrl","./deed-preview/deedPreview.html","./forgot-password/ForgotPasswordCtrl","./forgot-password/forgotPassword.html","./group-edit/GroupEditCtrl","./group-edit/groupEdit.html","./login/LoginCtrl","./login/login.html","./signup/SignupCtrl","./signup/signup.html","angular-dragula","angular-ui-switch","69","LoginCtrl","joinGroup","userData","loggingIn","authenticateFacebook","authenticateEmail","confirmed","sendConfirmEmail","70","71","SignupCtrl","picture","72","73","_satellizer","_satellizer2","defaultImagesDict","currentUser","$auth","authUrl","authenticate","setToken","login","logout","pub","some","userGroup","$authProvider","loginUrl","signupUrl","facebook","clientId","./Alertify","satellizer","74","75","76","isBlockElem","blockElements","isVoid","voidElements","collapseWhitespace","elem","isBlock","firstChild","prevText","prevVoid","prev","next","nodeType","replace","test","substr","remove","nextNode","nextSibling","parentNode","removeChild","keys","toUpperCase","block-elements","void-elements","77","jsonpatch","__extends","d","b","__","constructor","p","create","OriginalError","_equals","_isArray","bKeys","_objectKeys","bLength","escapePathComponent","str","getMirror","ilen","beforeDict","getObserverFromMirror","mirror","j","jlen","observers","removeObserverFromMirror","unobserve","root","deepClone","JSON","parse","stringify","patches","Mirror","intervals","currentInterval","dirtyCheck","fastCheck","clearTimeout","setTimeout","slowCheck","addEventListener","documentElement","attachEvent","object","removeEventListener","detachEvent","ObserverInfo","_generate","apply","temp","newKeys","oldKeys","changed","deleted","oldVal","newVal","op","isInteger","charCode","len","charCodeAt","tree","validate","plen","split","existingPathFragment","slice","validator","rootOps","JsonPatchError","parseInt","arrOps","objOps","compare","tree1","tree2","hasUndefined","operation","index","from","pathLen","existingPathLen","existingValue","sequence","Array","k","add","move","_get","arr","isArray","_super","78","blocks","toLowerCase","voids","htmlToDom","string","HtmlParser","parseFromString","bfsOrder","children","inqueue","outqueue","shift","childNodes","getContent","_replacement","outer","cloneNode","outerHTML","canConvert","toMarkdown","isFlankedByWhitespace","side","sibling","regExp","isFlanked","previousSibling","nodeValue","textContent","flankingWhitespace","leading","trailing","hasLeading","hasTrailing","process","whitespace","trim","mdConverters","gfmConverters","output","clone","body","nodes","gfm","./lib/gfm-converters","./lib/html-parser","./lib/md-converters","collapse-whitespace","79","cell","prefix","highlightRegEx","checked","borderCells","alignMap","left","right","center","align","attributes","border","className","language","match","80","canParseHtmlNatively","Parser","_window","DOMParser","canParse","createHtmlParser","jsdom","features","FetchExternalResources","ProcessExternalResources","shouldUseActiveX","doc","ActiveXObject","designMode","write","implementation","createHTMLDocument","useActiveX","81","hLevel","charAt","hPrefix","hasSiblings","isCodeBlock","getAttribute","titlePart","alt","src","parent","strings","82","rng","crypto","getRandomValues","_rnds8","Uint8Array","_rnds","random","self","83","buf","offset","ii","oct","_hexToByte","unparse","bth","_byteToHex","v1","clockseq","_clockseq","msecs","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","_nodeId","rnds","_rng","toString","_seedBytes","./rng","84","area","base","br","col","embed","hr","img","keygen","menuitem","meta","param","track","wbr"],"mappings":"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","file":"app-aa1f453666.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AppCtrl = function AppCtrl() {\n  _classCallCheck(this, AppCtrl);\n\n  this.date = Date.now();\n};\n\nexports.default = AppCtrl;\n\n},{}],2:[function(require,module,exports){\nmodule.exports = '<navbar></navbar>\\n\\n<ng-view></ng-view>\\n\\n<footer class=\"footer\">\\n  <div class=\"container\">\\n    <div class=\"pull-left\">\\n      <small>\\n        &copy; {{ ::$ctrl.date | date:\\'yyyy\\' }} The Love is our Weapon Campaign\\n      </small>\\n    </div>\\n    <div class=\"pull-right\">\\n      <small>\\n        <ul class=\"list-inline\">\\n          <li>\\n            Need help?\\n            <a href=\"mailto:hello@loveisourweapon.com?subject=Hello!\">Say hello!</a>\\n          </li>\\n          <!-- TODO: add Help, Privacy & Terms links -->\\n          <!--<li><a href=\"#\">Help</a></li>\\n          <li><a href=\"#\">Privacy &amp; Terms</a></li>-->\\n        </ul>\\n      </small>\\n    </div>\\n  </div>\\n</footer>\\n';\n},{}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularRoute = require('angular-route');\n\nvar _angularRoute2 = _interopRequireDefault(_angularRoute);\n\nvar _uiSelect = require('ui-select');\n\nvar _uiSelect2 = _interopRequireDefault(_uiSelect);\n\nvar _navbar = require('../navbar');\n\nvar _navbar2 = _interopRequireDefault(_navbar);\n\nvar _home = require('../home');\n\nvar _globalFeed = require('../global-feed');\n\nvar _deed = require('../deed');\n\nvar _group = require('../group');\n\nvar _user = require('../user');\n\nvar _confirmEmail = require('../confirm-email');\n\nvar _resetPassword = require('../reset-password');\n\nvar _AppCtrl = require('./AppCtrl');\n\nvar _AppCtrl2 = _interopRequireDefault(_AppCtrl);\n\nvar _app = require('./app.html');\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\n\n\n// Module dependencies\nexports.default = _angular2.default.module('app', [_angularRoute2.default, _uiSelect2.default, _navbar2.default, _home.home, _globalFeed.globalFeed, _deed.deed, _group.group, _user.user, _confirmEmail.confirmEmail, _resetPassword.resetPassword]).component('app', {\n  controller: _AppCtrl2.default,\n  template: _app2.default\n}).config( /* @ngInject */function ($compileProvider, $httpProvider, $routeProvider, $locationProvider, uiSelectConfig) {\n  $routeProvider.when('/', {\n    controller: 'HomeCtrl',\n    controllerAs: '$ctrl',\n    template: _home.homeTpl\n  }).when('/global', {\n    controller: 'GlobalFeedCtrl',\n    controllerAs: '$ctrl',\n    template: _globalFeed.globalFeedTpl\n  }).when('/d/:deed', {\n    controller: 'DeedCtrl',\n    controllerAs: '$ctrl',\n    template: _deed.deedTpl\n  }).when('/g/:group', {\n    controller: 'GroupCtrl',\n    controllerAs: '$ctrl',\n    template: _group.groupTpl\n  }).when('/u/:user', {\n    controller: 'UserCtrl',\n    controllerAs: '$ctrl',\n    template: _user.userTpl\n  }).when('/confirm/:token', {\n    controller: 'ConfirmEmailCtrl',\n    controllerAs: '$ctrl',\n    template: _confirmEmail.confirmEmailTpl\n  }).when('/reset/:token', {\n    controller: 'ResetPasswordCtrl',\n    controllerAs: '$ctrl',\n    template: _resetPassword.resetPasswordTpl\n  }).otherwise('/');\n\n  $compileProvider.debugInfoEnabled(false);\n  $httpProvider.useApplyAsync(true);\n  $locationProvider.html5Mode(true);\n\n  uiSelectConfig.theme = 'bootstrap';\n  uiSelectConfig.appendToBody = true;\n}).name;\n\n// Router dependencies\n\n},{\"../confirm-email\":9,\"../deed\":16,\"../global-feed\":22,\"../group\":25,\"../home\":31,\"../navbar\":37,\"../reset-password\":40,\"../user\":43,\"./AppCtrl\":1,\"./app.html\":2,\"angular\":\"angular\",\"angular-route\":\"angular-route\",\"ui-select\":\"ui-select\"}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _toMarkdown = require('to-markdown');\n\nvar _toMarkdown2 = _interopRequireDefault(_toMarkdown);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CommentFormCtrl = function () {\n  /* @ngInject */\n\n  function CommentFormCtrl($element, $scope, $timeout, Alertify, User, Comment, Feed) {\n    _classCallCheck(this, CommentFormCtrl);\n\n    _extends(this, { $element: $element, $scope: $scope, $timeout: $timeout, Alertify: Alertify, User: User, Comment: Comment, Feed: Feed });\n\n    this.newComment = {\n      content: { text: '' }\n    };\n  }\n\n  /**\n   * All elements compiled and linked\n   */\n\n\n  _createClass(CommentFormCtrl, [{\n    key: '$postLink',\n    value: function $postLink() {\n      this.setupMediumEditor();\n    }\n\n    /**\n     * Scope is being destroyed\n     */\n\n  }, {\n    key: '$onDestroy',\n    value: function $onDestroy() {\n      this.editor.destroy();\n    }\n\n    /**\n     * Check for and set the comment target and User's current group\n     *\n     * @param {object} comment\n     *\n     * @returns {object}\n     */\n\n  }, {\n    key: 'setGroupAndTarget',\n    value: function setGroupAndTarget(comment) {\n      comment.group = this.User.group ? this.User.group._id : null;\n      if (this.deed) {\n        comment.target = { deed: this.deed._id };\n      } else if (this.group) {\n        comment.target = { group: this.group._id };\n      } else if (this.comment) {\n        comment.target = { comment: this.comment._id };\n      } else if (this.act) {\n        comment.target = { act: this.act._id };\n      }\n\n      return comment;\n    }\n\n    /**\n     * Save the comment\n     *\n     * @param {object} comment\n     */\n\n  }, {\n    key: 'save',\n    value: function save(comment) {\n      var _this = this;\n\n      comment = this.setGroupAndTarget(comment);\n\n      this.saving = true;\n      this.Comment.save(comment).then(function () {\n        _this.Alertify.success('Comment saved');\n        _this.Feed.update();\n        _this.$timeout(function () {\n          return _this.editor.setContent('');\n        });\n      }).catch(function () {\n        return _this.Alertify.success('Failed saving comment');\n      }).then(function () {\n        return _this.saving = false;\n      });\n    }\n\n    /**\n     * Initialise the MediumEditor element, respond to input changes\n     *\n     * TODO: move MediumEditor setup and config to a component\n     */\n\n  }, {\n    key: 'setupMediumEditor',\n    value: function setupMediumEditor() {\n      var _this2 = this;\n\n      this.editor = new MediumEditor(this.$element.find('textarea'), {\n        placeholder: { text: this.placeholder || 'Enter your message...', hideOnClick: false },\n        toolbar: { buttons: ['bold', 'italic', 'underline', 'anchor', 'orderedlist', 'unorderedlist'] },\n        autoLink: true\n      });\n\n      this.editor.subscribe('editableInput', function (event, editable) {\n        _this2.$scope.$apply(function () {\n          _this2.newComment.content.text = (0, _toMarkdown2.default)(editable.innerHTML, {\n            converters: [{\n              // Remove spans and divs\n              filter: function filter(node) {\n                return node.nodeName === 'SPAN' || node.nodeName === 'DIV';\n              },\n              replacement: function replacement(content) {\n                return content;\n              }\n            }]\n          });\n        });\n      });\n    }\n  }]);\n\n  return CommentFormCtrl;\n}();\n\nexports.default = CommentFormCtrl;\n\n},{\"to-markdown\":78}],5:[function(require,module,exports){\nmodule.exports = '<form ng-submit=\"$ctrl.save($ctrl.newComment)\">\\n  <div class=\"form-group\">\\n    <div class=\"well well-sm medium-editor m-none\">\\n      <textarea ng-model=\"$ctrl.newComment.content.text\"></textarea>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary m-t-xs\"\\n            ng-disabled=\"!$ctrl.newComment.content.text\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n      Save\\n    </button>\\n  </div>\\n</form>\\n';\n},{}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _Alertify = require('../../services/Alertify');\n\nvar _Alertify2 = _interopRequireDefault(_Alertify);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Comment = require('../../services/Comment');\n\nvar _Comment2 = _interopRequireDefault(_Comment);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _CommentFormCtrl = require('./CommentFormCtrl');\n\nvar _CommentFormCtrl2 = _interopRequireDefault(_CommentFormCtrl);\n\nvar _commentForm = require('./commentForm.html');\n\nvar _commentForm2 = _interopRequireDefault(_commentForm);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\n\n\n// Module dependencies\nexports.default = _angular2.default.module('app.components.commentForm', [_Alertify2.default, _User2.default, _Comment2.default, _Feed2.default]).component('commentForm', {\n  controller: _CommentFormCtrl2.default,\n  template: _commentForm2.default,\n  bindings: {\n    deed: '<',\n    group: '<',\n    comment: '<',\n    act: '<',\n    placeholder: '@'\n  }\n}).name;\n\n},{\"../../services/Alertify\":50,\"../../services/Comment\":52,\"../../services/Feed\":54,\"../../services/User\":73,\"./CommentFormCtrl\":4,\"./commentForm.html\":5,\"angular\":\"angular\"}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ConfirmEmailCtrl =\n/* @ngInject */\nfunction ConfirmEmailCtrl($rootScope, $routeParams, $location, Alertify, User) {\n  _classCallCheck(this, ConfirmEmailCtrl);\n\n  $rootScope.title = 'Confirming Email Address';\n\n  User.confirmEmail($routeParams.token).then(function () {\n    return Alertify.success('Confirmed email address');\n  }).catch(function () {\n    return Alertify.error('Failed confirming email address');\n  }).then(function () {\n    return $location.url('/');\n  });\n};\n\nexports.default = ConfirmEmailCtrl;\n\n},{}],8:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-background=\"\\'/images/header.jpg\\'\"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\">\\n      <i class=\"fa fa-fw fa-cog fa-2x fa-spin middle\"></i>\\n      Confirming your email address\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.confirmEmail = exports.confirmEmailTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _Alertify = require('../../services/Alertify');\n\nvar _Alertify2 = _interopRequireDefault(_Alertify);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _ConfirmEmailCtrl = require('./ConfirmEmailCtrl');\n\nvar _ConfirmEmailCtrl2 = _interopRequireDefault(_ConfirmEmailCtrl);\n\nvar _confirmEmail = require('./confirmEmail.html');\n\nvar _confirmEmail2 = _interopRequireDefault(_confirmEmail);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nvar confirmEmailTpl = exports.confirmEmailTpl = _confirmEmail2.default;\n\n// Module dependencies\n\n\nvar confirmEmail = exports.confirmEmail = _angular2.default.module('app.component.confirmEmail', [_Alertify2.default, _User2.default, _jumbotron2.default]).controller('ConfirmEmailCtrl', _ConfirmEmailCtrl2.default).name;\n\n},{\"../../services/Alertify\":50,\"../../services/User\":73,\"../jumbotron\":34,\"./ConfirmEmailCtrl\":7,\"./confirmEmail.html\":8,\"angular\":\"angular\"}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Include template files\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _deedListHorizontal = require('./deedListHorizontal.html');\n\nvar _deedListHorizontal2 = _interopRequireDefault(_deedListHorizontal);\n\nvar _deedListVertical = require('./deedListVertical.html');\n\nvar _deedListVertical2 = _interopRequireDefault(_deedListVertical);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DeedListCtrl = function () {\n  /* @ngInject */\n\n  function DeedListCtrl($location, $templateCache, Deed, Act) {\n    var _this = this;\n\n    _classCallCheck(this, DeedListCtrl);\n\n    _extends(this, { $location: $location, Deed: Deed, Act: Act });\n\n    this.loading = true;\n    this.Deed.find({ fields: '_id,logo,title,urlTitle' }).then(function (response) {\n      _this.deeds = response.data;\n\n      _lodash2.default.each(_this.deeds, function (deed) {\n        return _this.Act.count({ deed: deed._id });\n      });\n    }).catch(function () {\n      return null;\n    }).then(function () {\n      return _this.loading = false;\n    });\n\n    $templateCache.put('deedListHorizontal.html', _deedListHorizontal2.default);\n    $templateCache.put('deedListVertical.html', _deedListVertical2.default);\n  }\n\n  /**\n   * Get the name of the template\n   *\n   * @returns {string}\n   */\n\n\n  _createClass(DeedListCtrl, [{\n    key: 'getTemplateName',\n    value: function getTemplateName() {\n      return this.layout === 'vertical' ? 'deedListVertical.html' : 'deedListHorizontal.html';\n    }\n  }]);\n\n  return DeedListCtrl;\n}();\n\nexports.default = DeedListCtrl;\n\n},{\"./deedListHorizontal.html\":11,\"./deedListVertical.html\":12,\"lodash\":\"lodash\"}],11:[function(require,module,exports){\nmodule.exports = '<div class=\"container container-pad-sm\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\" ng-hide=\"$ctrl.loading\">\\n      <div class=\"deed-wrapper\"\\n           ng-repeat=\"deed in $ctrl.deeds track by deed._id\"\\n           ng-click=\"$ctrl.$location.url(\\'/d/\\' + deed.urlTitle)\">\\n        <div class=\"deed-image\">\\n          <img ng-src=\"{{ ::deed.logo || \\'/images/deed.png\\' }}\"\\n               class=\"img-responsive img-circle\">\\n          <div class=\"deed-title-wrapper\">\\n            <div class=\"deed-title\">{{ ::deed.title }}</div>\\n          </div>\\n        </div>\\n        <div class=\"deed-text text-center\">\\n          <div class=\"deed-count\">{{ $ctrl.Act.counters[deed._id] | number }}</div>\\n          <div class=\"deed-subtext\">DEEDS DONE</div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-4x fa-spin\"></i>\\n      </p>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],12:[function(require,module,exports){\nmodule.exports = '<div class=\"container-pad-sm\">\\n  <div class=\"deed-wrapper\"\\n       ng-class=\"{ \\'deed-current\\': deed._id === $ctrl.Deed.current._id }\"\\n       ng-repeat=\"deed in $ctrl.deeds track by deed._id\"\\n       ng-click=\"$ctrl.$location.url(\\'/d/\\' + deed.urlTitle)\">\\n    <div class=\"deed-image\">\\n      <img ng-src=\"{{ ::deed.logo || \\'/images/deed.png\\' }}\"\\n           class=\"img-responsive img-circle\">\\n    </div>\\n    <div class=\"deed-text\">\\n      <span class=\"deed-title\">{{ ::deed.title }}</span>\\n      <br>\\n      <span class=\"deed-count\">{{ $ctrl.Act.counters[deed._id] | number }}</span>\\n      <span class=\"deed-subtext\">DEEDS DONE</span>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _Deed = require('../../services/Deed');\n\nvar _Deed2 = _interopRequireDefault(_Deed);\n\nvar _Act = require('../../services/Act');\n\nvar _Act2 = _interopRequireDefault(_Act);\n\nvar _DeedListCtrl = require('./DeedListCtrl');\n\nvar _DeedListCtrl2 = _interopRequireDefault(_DeedListCtrl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('app.components.deedList', [_Deed2.default, _Act2.default]).component('deedList', {\n  bindings: {\n    layout: '@'\n  },\n  controller: _DeedListCtrl2.default,\n  template: '<ng-include src=\"$ctrl.getTemplateName()\" />'\n}).name;\n\n// Component dependencies\n\n\n// Module dependencies\n\n},{\"../../services/Act\":49,\"../../services/Deed\":53,\"./DeedListCtrl\":10,\"angular\":\"angular\"}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DeedCtrl = function () {\n  /* @ngInject */\n\n  function DeedCtrl($rootScope, $routeParams, Alertify, User, Group, Deed, Act, Feed, Modal) {\n    var _this = this;\n\n    _classCallCheck(this, DeedCtrl);\n\n    _extends(this, { Alertify: Alertify, User: User, Group: Group, Deed: Deed, Act: Act, Feed: Feed, Modal: Modal });\n\n    this.loadDeed($routeParams.deed).then(function () {\n      return $rootScope.title = _this.Deed.current ? _this.Deed.current.title : null;\n    });\n  }\n\n  /**\n   * Load a deed by urlTitle\n   *\n   * @param {string} urlTitle\n   */\n\n\n  _createClass(DeedCtrl, [{\n    key: 'loadDeed',\n    value: function loadDeed(urlTitle) {\n      var _this2 = this;\n\n      this.loading = true;\n      return this.Deed.findOne({ urlTitle: urlTitle }).then(function (deed) {\n        _this2.Deed.current = deed;\n        _this2.Act.count({ deed: deed._id });\n        _this2.Feed.update({ refresh: true });\n      }).catch(function (error) {\n        _this2.error = error.message;\n        _this2.Deed.current = null;\n      }).then(function () {\n        return _this2.loading = false;\n      });\n    }\n\n    /**\n     * Register a deed as done\n     *\n     * @param {object} deed\n     * @param {object} [group=null]\n     */\n\n  }, {\n    key: 'done',\n    value: function done(deed) {\n      var _this3 = this;\n\n      var group = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      this.doing = true;\n      this.Act.done(deed, group).then(function () {\n        _this3.Act.count();\n        _this3.Act.count({ deed: deed._id });\n        _this3.Feed.update();\n        _this3.Alertify.success('Deed done!');\n      }).catch(function () {\n        return _this3.Alertify.error('Failed registering deed');\n      }).then(function () {\n        return _this3.doing = false;\n      });\n    }\n  }]);\n\n  return DeedCtrl;\n}();\n\nexports.default = DeedCtrl;\n\n},{}],15:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-classes=\"videotron\">\\n  <jumbo-content>\\n    <div class=\"embed-responsive embed-responsive-16by9\">\\n      <youtube-video ng-if=\"$ctrl.Deed.current.videoUrl\"\\n                     video-url=\"$ctrl.Deed.current.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"deed-header\">\\n      <img ng-src=\"{{ $ctrl.Deed.current.logo || \\'/images/deed.png\\' }}\"\\n           class=\"img-responsive img-circle pull-left m-t-md m-r-sm\">\\n\\n      <h2 class=\"text-uppercase pull-left m-b-none\">\\n        {{ $ctrl.Deed.current.title }}\\n      </h2>\\n\\n      <h1 class=\"pull-right text-right m-b-none\">\\n        {{ $ctrl.Act.counters[$ctrl.Deed.current._id] | number }}\\n      </h1>\\n    </div>\\n  </jumbo-content>\\n</jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-3 col-sm-push-9 m-b-sm\">\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.done($ctrl.Deed.current, $ctrl.User.group)\"\\n                ng-if=\"$ctrl.User.isAuthenticated()\"\\n                ng-disabled=\"$ctrl.doing\">\\n          <img src=\"/images/logo-invert.png\" class=\"img-responsive img-btn\" ng-hide=\"$ctrl.doing\">\\n          <i class=\"fa fa-cog fa-lg fa-spin\" ng-show=\"$ctrl.doing\"></i>\\n          Done\\n        </button>\\n\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.Modal.openLogin()\"\\n                ng-if=\"!$ctrl.User.isAuthenticated()\">\\n          <i class=\"fa fa-fw fa-user\"></i>\\n          Login\\n        </button>\\n\\n        <deed-list layout=\"vertical\"></deed-list>\\n      </div>\\n\\n      <div class=\"col-sm-9 col-sm-pull-3\">\\n        <h2 class=\"m-t-none\">Devotional</h2>\\n        <div marked=\"$ctrl.Deed.current.content\" class=\"m-b-md\"></div>\\n\\n        <comment-form deed=\"$ctrl.Deed.current\"\\n                      placeholder=\"Leave a testimony...\"></comment-form>\\n\\n        <feed criteria=\"{ \\'target.deed\\': $ctrl.Deed.current._id }\"></feed>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deed = exports.deedTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularMarked = require('angular-marked');\n\nvar _angularMarked2 = _interopRequireDefault(_angularMarked);\n\nvar _angularYoutubeEmbed = require('angular-youtube-embed');\n\nvar _angularYoutubeEmbed2 = _interopRequireDefault(_angularYoutubeEmbed);\n\nvar _angularUiBootstrap = require('angular-ui-bootstrap');\n\nvar _angularUiBootstrap2 = _interopRequireDefault(_angularUiBootstrap);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Group = require('../../services/Group');\n\nvar _Group2 = _interopRequireDefault(_Group);\n\nvar _Deed = require('../../services/Deed');\n\nvar _Deed2 = _interopRequireDefault(_Deed);\n\nvar _Act = require('../../services/Act');\n\nvar _Act2 = _interopRequireDefault(_Act);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _Modal = require('../../services/Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _feed = require('../feed');\n\nvar _feed2 = _interopRequireDefault(_feed);\n\nvar _deedList = require('../deed-list');\n\nvar _deedList2 = _interopRequireDefault(_deedList);\n\nvar _commentForm = require('../comment-form');\n\nvar _commentForm2 = _interopRequireDefault(_commentForm);\n\nvar _DeedCtrl = require('./DeedCtrl');\n\nvar _DeedCtrl2 = _interopRequireDefault(_DeedCtrl);\n\nvar _deed = require('./deed.html');\n\nvar _deed2 = _interopRequireDefault(_deed);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nvar deedTpl = exports.deedTpl = _deed2.default;\n\n// Module dependencies\n\n\nvar deed = exports.deed = _angular2.default.module('app.components.deed', [_angularMarked2.default, _angularYoutubeEmbed2.default, _angularUiBootstrap2.default, _User2.default, _Group2.default, _Deed2.default, _Act2.default, _Feed2.default, _Modal2.default, _jumbotron2.default, _feed2.default, _deedList2.default, _commentForm2.default]).controller('DeedCtrl', _DeedCtrl2.default).name;\n\n},{\"../../services/Act\":49,\"../../services/Deed\":53,\"../../services/Feed\":54,\"../../services/Group\":55,\"../../services/Modal\":68,\"../../services/User\":73,\"../comment-form\":6,\"../deed-list\":13,\"../feed\":19,\"../jumbotron\":34,\"./DeedCtrl\":14,\"./deed.html\":15,\"angular\":\"angular\",\"angular-marked\":\"angular-marked\",\"angular-ui-bootstrap\":\"angular-ui-bootstrap\",\"angular-youtube-embed\":\"angular-youtube-embed\"}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FeedCtrl = function () {\n  /* @ngInject */\n\n  function FeedCtrl(User, Feed) {\n    var _this = this;\n\n    _classCallCheck(this, FeedCtrl);\n\n    _extends(this, { User: User, Feed: Feed });\n\n    this.feedItems = null;\n\n    this.feedUpdateOff = this.Feed.onUpdate(function (options) {\n      if (options.clear || options.refresh) {\n        _this.feedItems = null;\n\n        if (options.clear) return;\n      }\n\n      _this.loadFeed(_this.feedItems ? { after: _this.feedItems[0]._id } : {});\n    });\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n\n\n  _createClass(FeedCtrl, [{\n    key: '$onDestroy',\n    value: function $onDestroy() {\n      this.feedUpdateOff();\n    }\n\n    /**\n     * Load feed items\n     *\n     * @param {object} [params={}]\n     */\n\n  }, {\n    key: 'loadFeed',\n    value: function loadFeed() {\n      var _this2 = this;\n\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      this.loading = true;\n      this.Feed.find(_lodash2.default.merge(params, this.criteria)).then(function (response) {\n        if (_lodash2.default.has(params, 'before')) {\n          _this2.feedItems = _this2.feedItems.concat(response.data);\n        } else if (_lodash2.default.has(params, 'after')) {\n          _this2.feedItems = response.data.concat(_this2.feedItems);\n        } else {\n          _this2.feedItems = response.data;\n        }\n      }).catch(function () {\n        return null;\n      }).then(function () {\n        return _this2.loading = false;\n      });\n    }\n\n    /**\n     * Load more feed items if last feed item is in view\n     *\n     * @param {boolean} $inView\n     * @param {number}  $index\n     */\n\n  }, {\n    key: 'onInView',\n    value: function onInView($inView, $index) {\n      if ($index === this.feedItems.length - 1 && $inView) {\n        this.loadFeed({\n          before: this.feedItems[this.feedItems.length - 1]._id\n        });\n      }\n    }\n  }]);\n\n  return FeedCtrl;\n}();\n\nexports.default = FeedCtrl;\n\n},{\"lodash\":\"lodash\"}],18:[function(require,module,exports){\nmodule.exports = '<div class=\"feed-refresh-button\">\\n  <button type=\"button\"\\n          ng-click=\"$ctrl.loadFeed({ after: $ctrl.feedItems[0]._id })\"\\n          ng-disabled=\"$ctrl.loading || $ctrl.feedItems === null\"\\n          class=\"btn btn-link\">\\n    <i class=\"fa fa-refresh fa-lg\"\\n       ng-class=\"{ \\'fa-spin\\': $ctrl.loadingFeed }\"></i>\\n  </button>\\n</div>\\n\\n<div class=\"feed-wrapper\">\\n  <div class=\"feed-item clearfix\"\\n       ng-repeat=\"item in $ctrl.feedItems track by item._id\"\\n       in-view=\"$ctrl.onInView($inview, $index)\"\\n       in-view-options=\"{ debounce: 100 }\">\\n    <div class=\"feed-item-type\">\\n      <span class=\"fa-stack fa-lg\">\\n        <i class=\"fa fa-circle fa-stack-2x text-muted\"></i>\\n        <i class=\"fa fa-stack-1x fa-inverse\"\\n           ng-class=\"{\\n             \\'fa-heart\\': item.act,\\n             \\'fa-quote-right\\': item.comment && item.target.deed,\\n             \\'fa-bullhorn\\': item.comment && item.target.group\\n           }\"></i>\\n      </span>\\n    </div>\\n\\n    <div class=\"feed-item-image\">\\n      <img ng-src=\"{{ ::item.user.picture || $ctrl.User.getDefaultUserImage(item.user._id) }}\"\\n           class=\"img-circle\">\\n    </div>\\n\\n    <div class=\"feed-item-content\">\\n      <h6 class=\"m-t-none\">\\n        <a ng-href=\"/u/{{ ::item.user._id }}\"\\n           ng-show=\"$ctrl.User.isLoggedInUser(item.user) || $ctrl.User.isMemberOfGroup(item.group)\">\\n          {{ ::item.user.firstName }}\\n        </a>\\n        <span ng-hide=\"$ctrl.User.isLoggedInUser(item.user) || $ctrl.User.isMemberOfGroup(item.group)\">Someone</span>\\n\\n        <span ng-if=\"::item.group && !item.target.group\">\\n          from\\n          <a ng-href=\"/g/{{ ::item.group.urlName }}\">{{ ::item.group.name }}</a>\\n        </span>\\n\\n        <span ng-if=\"::item.act\">did the act of love</span>\\n        <span ng-if=\"::item.comment && item.target.deed\">left a testimony on</span>\\n        <span ng-if=\"::item.comment && item.target.group\">wrote a message to</span>\\n\\n        <a ng-href=\"/d/{{ ::item.target.deed.urlTitle }}\"\\n           ng-if=\"::item.target.deed\">{{ ::item.target.deed.title }}</a>\\n\\n        <a ng-href=\"/g/{{ ::item.target.group.urlName }}\"\\n           ng-if=\"::item.target.group\">{{ ::item.target.group.name }}</a>\\n      </h6>\\n\\n      <div marked=\"::item.comment.content.text\"\\n           class=\"feed-item-comment\"\\n           ng-if=\"::item.comment.content.text\"></div>\\n\\n      <p class=\"small m-b-none\">\\n        <a href>\\n          {{ ::item.created | fromNow }}\\n        </a>\\n        &middot;\\n        {{ ::item.created | moment:\\'ddd, D MMM YYYY [at] HH:mm\\' }}\\n      </p>\\n    </div>\\n  </div><!-- .feed-item -->\\n\\n  <div class=\"feed-item feed-item-narrow text-center\"\\n       ng-show=\"$ctrl.loading || $ctrl.feedItems === null\">\\n    <i class=\"fa fa-ellipsis-h fa-2x\"></i>\\n  </div>\\n\\n  <div class=\"feed-item\"\\n       ng-show=\"$ctrl.feedItems.length === 0\">\\n    No feed items to show.\\n  </div>\\n</div><!-- .feed-wrapper -->\\n';\n},{}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularMarked = require('angular-marked');\n\nvar _angularMarked2 = _interopRequireDefault(_angularMarked);\n\nvar _angularInview = require('angular-inview');\n\nvar _angularInview2 = _interopRequireDefault(_angularInview);\n\nvar _moment = require('../../filters/moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _FeedCtrl = require('./FeedCtrl');\n\nvar _FeedCtrl2 = _interopRequireDefault(_FeedCtrl);\n\nvar _feed = require('./feed.html');\n\nvar _feed2 = _interopRequireDefault(_feed);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nexports.default = _angular2.default.module('app.components.feed', [_angularMarked2.default, _angularInview2.default.name, _moment2.default, _User2.default, _Feed2.default]).component('feed', {\n  controller: _FeedCtrl2.default,\n  template: _feed2.default,\n  bindings: {\n    criteria: '<'\n  }\n}).name;\n\n// Module dependencies\n\n},{\"../../filters/moment\":48,\"../../services/Feed\":54,\"../../services/User\":73,\"./FeedCtrl\":17,\"./feed.html\":18,\"angular\":\"angular\",\"angular-inview\":\"angular-inview\",\"angular-marked\":\"angular-marked\"}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GlobalFeedCtrl =\n/* @ngInject */\nfunction GlobalFeedCtrl($rootScope, Feed) {\n  _classCallCheck(this, GlobalFeedCtrl);\n\n  $rootScope.title = 'Global Activity Feed';\n\n  Feed.update({ refresh: true });\n};\n\nexports.default = GlobalFeedCtrl;\n\n},{}],21:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-background=\"\\'/images/header.jpg\\'\"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\">\\n      <h3 class=\"m-t-none m-b-md\">\\n        <i class=\"fa fa-fw fa-list\"></i>\\n        Global Activity Feed\\n      </h3>\\n\\n      <feed criteria=\"{ \\'target.group\\': \\'null\\' }\"></feed>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.globalFeed = exports.globalFeedTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _feed = require('../feed');\n\nvar _feed2 = _interopRequireDefault(_feed);\n\nvar _GlobalFeedCtrl = require('./GlobalFeedCtrl');\n\nvar _GlobalFeedCtrl2 = _interopRequireDefault(_GlobalFeedCtrl);\n\nvar _globalFeed = require('./globalFeed.html');\n\nvar _globalFeed2 = _interopRequireDefault(_globalFeed);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nvar globalFeedTpl = exports.globalFeedTpl = _globalFeed2.default;\n\n// Module dependencies\n\n\nvar globalFeed = exports.globalFeed = _angular2.default.module('app.components.globalFeed', [_Feed2.default, _jumbotron2.default, _feed2.default]).controller('GlobalFeedCtrl', _GlobalFeedCtrl2.default).name;\n\n},{\"../../services/Feed\":54,\"../feed\":19,\"../jumbotron\":34,\"./GlobalFeedCtrl\":20,\"./globalFeed.html\":21,\"angular\":\"angular\"}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _seedrandom = require('seedrandom');\n\nvar _seedrandom2 = _interopRequireDefault(_seedrandom);\n\nvar _fastJsonPatch = require('fast-json-patch');\n\nvar _fastJsonPatch2 = _interopRequireDefault(_fastJsonPatch);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NUM_IMAGES = 6;\n\nvar GroupCtrl = function () {\n  /* @ngInject */\n\n  function GroupCtrl($rootScope, $routeParams, $location, Alertify, User, Group, Campaign, Act, Feed, Modal) {\n    var _this = this;\n\n    _classCallCheck(this, GroupCtrl);\n\n    _extends(this, { $location: $location, Alertify: Alertify, User: User, Group: Group, Campaign: Campaign, Act: Act, Feed: Feed, Modal: Modal });\n\n    // Set a random jumbotron background image seeded by the group name\n    this.jumbotronBackground = '/images/header' + Math.floor((0, _seedrandom2.default)($routeParams.group)() * NUM_IMAGES) + '.jpg';\n    this.activeTab = 0;\n    this.campaign = null;\n\n    this.loadGroup($routeParams.group).then(function () {\n      return $rootScope.title = _this.Group.current ? _this.Group.current.name : null;\n    });\n\n    this.loginOff = this.User.on('login', function (user) {\n      _this.Feed.update({ refresh: true });\n      _this.setCampaignAlert(_this.campaign, _this.Group.current, user);\n      if (_this.User.isMemberOfGroup(_this.Group.current)) _this.activeTab = 1;\n    });\n    this.logoutOff = this.User.on('logout', function () {\n      _this.Feed.update({ clear: true });\n      _this.setCampaignAlert(_this.campaign, _this.Group.current, null);\n      _this.activeTab = 0;\n    });\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n\n\n  _createClass(GroupCtrl, [{\n    key: '$onDestroy',\n    value: function $onDestroy() {\n      this.loginOff();\n      this.logoutOff();\n    }\n\n    /**\n     * Load a group by it's urlName\n     *\n     * @param {string} urlName\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'loadGroup',\n    value: function loadGroup(urlName) {\n      var _this2 = this;\n\n      this.loading = true;\n      return this.Group.findOne({ urlName: urlName }).then(function (group) {\n        _this2.Group.current = group;\n        if (_this2.User.isMemberOfGroup(_this2.Group.current)) _this2.activeTab = 1;\n        _this2.Act.count({ group: group._id });\n        _this2.loadCampaign(group);\n        if (_this2.User.isAuthenticated()) _this2.Feed.update({ refresh: true });\n      }).catch(function (err) {\n        _this2.error = err.message;\n        _this2.Group.current = null;\n      }).then(function () {\n        return _this2.loading = false;\n      });\n    }\n\n    /**\n     * Load the active campaign\n     *\n     * @param {object} group\n     */\n\n  }, {\n    key: 'loadCampaign',\n    value: function loadCampaign(group) {\n      var _this3 = this;\n\n      this.Campaign.findOne({ group: group._id, active: true }).catch(function () {\n        return null;\n      }).then(function (campaign) {\n        _this3.campaign = campaign;\n        if (_this3.campaign) {\n          _this3.Act.count({ campaign: _this3.campaign._id });\n          _this3.currentDeed = _lodash2.default.findLast(_this3.campaign.deeds, { published: true });\n          _this3.$location.search('setupCampaign', null);\n        } else {\n          if (_lodash2.default.has(_this3.$location.search(), 'setupCampaign')) {\n            _this3.editCampaign('create', _this3.Group.current).then(function () {\n              return _this3.$location.search('setupCampaign', null);\n            });\n          }\n        }\n\n        _this3.setCampaignAlert(_this3.campaign, _this3.Group.current, _this3.User.current);\n      });\n    }\n\n    /**\n     * Show hint to setup a campaign if logged in as admin of group with no active campaign\n     *\n     * @param {object} campaign\n     * @param {object} group\n     * @param {object} user\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'setCampaignAlert',\n    value: function setCampaignAlert(campaign, group, user) {\n      this.showCampaignAlert = _lodash2.default.isNull(campaign) && _lodash2.default.has(group, 'admins') && _lodash2.default.has(user, '_id') && ~group.admins.indexOf(user._id);\n    }\n\n    /**\n     * Create or edit a campaign for the current group\n     *\n     * @oaram {string} [action='create']\n     * @param {object} group\n     * @param {object} [campaign=null]\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'editCampaign',\n    value: function editCampaign() {\n      var action = arguments.length <= 0 || arguments[0] === undefined ? 'create' : arguments[0];\n\n      var _this4 = this;\n\n      var group = arguments[1];\n      var campaign = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n      return this.Modal.openCampaignEdit(action, group, campaign).then(function () {\n        return _this4.loadCampaign(group);\n      }).catch(function (err) {\n        return null;\n      });\n    }\n\n    /**\n     * Finish the current campaign\n     *\n     * @param {object} campaign\n     */\n\n  }, {\n    key: 'finishCampaign',\n    value: function finishCampaign(campaign) {\n      var _this5 = this;\n\n      this.Modal.openConfirm('<p>Are you sure you want to finish this campaign?</p>').then(function () {\n        var observer = _fastJsonPatch2.default.observe(campaign);\n        campaign.active = false;\n        campaign.dateEnd = new Date();\n        return _this5.Campaign.update(campaign, _fastJsonPatch2.default.generate(observer));\n      }).then(function () {\n        return _this5.Alertify.success('Finished campaign');\n      }).then(function () {\n        return _this5.loadCampaign(_this5.Group.current);\n      }).catch(function () {\n        return campaign.active = true;\n      });\n    }\n\n    /**\n     * Set a deed as published/unpublished for a campaign\n     *\n     * @param {object}  campaign\n     * @param {object}  deed\n     * @param {boolean} [published=true]\n     */\n\n  }, {\n    key: 'setPublished',\n    value: function setPublished(campaign, deed) {\n      var _this6 = this;\n\n      var published = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];\n\n      var observer = _fastJsonPatch2.default.observe(campaign);\n      var campaignDeed = _lodash2.default.find(campaign.deeds, { deed: { _id: deed._id } });\n      campaignDeed.published = published;\n      this.Campaign.update(campaign, _fastJsonPatch2.default.generate(observer)).then(function () {\n        return _this6.Alertify.success((published ? 'Published' : 'Unpublished') + ' deed <strong>' + campaignDeed.deed.title + '</strong>');\n      }).then(function () {\n        return _this6.loadCampaign(_this6.Group.current);\n      }).catch(function () {\n        return campaignDeed.published = !published;\n      });\n    }\n\n    /**\n     * Add the current logged in user to this group\n     *\n     * @param {object} user\n     * @param {object} group\n     */\n\n  }, {\n    key: 'joinGroup',\n    value: function joinGroup(user, group) {\n      var _this7 = this;\n\n      var observer = _fastJsonPatch2.default.observe(user);\n      user.groups.push(group._id);\n      this.User.update(user, _fastJsonPatch2.default.generate(observer)).then(function () {\n        return _this7.Alertify.success('Joined group <strong>' + group.name + '</strong>');\n      }).then(function () {\n        return _this7.User.group = group;\n      }).then(function () {\n        return _this7.activeTab = 1;\n      }).catch(function () {\n        return user.groups.splice(user.groups.indexOf(groups._id));\n      });\n    }\n\n    /**\n     * Remove the user from the group\n     *\n     * @param {object} user\n     * @param {object} group\n     */\n\n  }, {\n    key: 'leaveGroup',\n    value: function leaveGroup(user, group) {\n      var _this8 = this;\n\n      if (group.owner === user._id) {\n        return this.Modal.openAlert('\\n        <p>You are the current owner of <strong>' + group.name + '</strong>.</p>\\n        <p>You\\'ll need to make someone else the owner before leaving.</p>\\n      ');\n      } else if (this.Group.isAdmin(group, user)) {\n        return this.Modal.openAlert('\\n        <p>You are currently an admin of <strong>' + group.name + '</strong>.</p>\\n        <p>You\\'ll need to remove yourself as an admin before leaving.</p>\\n      ');\n      } else {\n        return this.Modal.openConfirm('<p>Are you sure you want to leave <strong>' + group.name + '</strong>?</p>').then(function () {\n          var observer = _fastJsonPatch2.default.observe(user);\n          user.groups.splice(user.groups.indexOf(group._id));\n          return _this8.User.update(user, _fastJsonPatch2.default.generate(observer));\n        }).then(function () {\n          return _this8.Alertify.success('Left group <strong>' + group.name + '</strong>');\n        }).then(function () {\n          return _this8.activeTab = 0;\n        }).catch(function () {\n          return user.groups.push(group);\n        });\n      }\n    }\n  }]);\n\n  return GroupCtrl;\n}();\n\nexports.default = GroupCtrl;\n\n},{\"fast-json-patch\":77,\"lodash\":\"lodash\",\"seedrandom\":\"seedrandom\"}],24:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-image=\"\\'/images/group.png\\'\"\\n           jumbo-background=\"::$ctrl.jumbotronBackground\">\\n  <jumbo-title>{{ $ctrl.Group.current.name }}</jumbo-title>\\n  <jumbo-text>\\n    <span class=\"f-lg\">\\n      {{ $ctrl.Act.counters[$ctrl.Group.current._id] | number }}\\n    </span>\\n    acts of love\\n  </jumbo-text>\\n</jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-4 col-md-3 col-sm-push-8 col-md-push-9 m-b-lg\">\\n        <div class=\"well well-sm\"\\n             ng-if=\"$ctrl.User.isMemberOfGroup($ctrl.Group.current) && $ctrl.campaign !== null\">\\n          <h5 class=\"text-center\">\\n            Current Campaign\\n            <br>\\n            <small>\\n              <span class=\\'f-lg\\'>\\n                {{ $ctrl.Act.counters[$ctrl.campaign._id] | number }}\\n              </span>\\n              acts of love\\n            </small>\\n          </h5>\\n\\n          <!-- TODO: move buttons to a directive -->\\n          <!-- Show buttons with publish/unpublish menu for admins -->\\n          <div class=\"btn-group btn-block\"\\n               ng-repeat=\"item in $ctrl.campaign.deeds\"\\n               ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            <a class=\"btn col-xs-10\"\\n               ng-class=\"{\\n                 \\'btn-primary\\': item.published,\\n                 \\'btn-default\\': !item.published,\\n                 \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n               }\"\\n               ng-href=\"/d/{{ ::item.deed.urlTitle }}\">\\n              {{ ::item.deed.title }}\\n            </a>\\n            <button type=\"button\"\\n                    class=\"btn dropdown-toggle col-xs-2\"\\n                    ng-class=\"{\\n                      \\'btn-primary\\': item.published,\\n                      \\'btn-default\\': !item.published,\\n                      \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n                    }\"\\n                    data-toggle=\"dropdown\"\\n                    aria-haspopup=\"true\"\\n                    aria-expanded=\"false\">\\n              <span class=\"caret\"></span>\\n              <span class=\"sr-only\">Toggle Dropdown</span>\\n            </button>\\n            <ul class=\"dropdown-menu dropdown-menu-right\">\\n              <li ng-hide=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, true)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-up\"></i>\\n                  Publish\\n                </a>\\n              </li>\\n              <li ng-show=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, false)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-down\"></i>\\n                  Unpublish\\n                </a>\\n              </li>\\n            </ul>\\n          </div>\\n          <div ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            <hr>\\n            <button type=\"button\"\\n                    class=\"btn btn-default btn-block\"\\n                    ng-click=\"$ctrl.editCampaign(\\'update\\', $ctrl.Group.current, $ctrl.campaign)\">\\n              <i class=\"fa fa-fw fa-edit\"></i>\\n              Update campaign\\n            </button>\\n            <button type=\"button\"\\n                    class=\"btn btn-default btn-block\"\\n                    ng-click=\"$ctrl.finishCampaign($ctrl.campaign)\">\\n              <i class=\"fa fa-fw fa-flag-checkered\"></i>\\n              Finish campaign\\n            </button>\\n          </div>\\n\\n          <!-- Show a normal button for non-admins -->\\n          <a class=\"btn btn-block\"\\n             ng-repeat=\"item in $ctrl.campaign.deeds\"\\n             ng-href=\"/d/{{ ::item.deed.urlTitle }}\"\\n             ng-class=\"{\\n               \\'btn-primary\\': item.published,\\n               \\'btn-default\\': !item.published,\\n               \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n             }\"\\n             ng-if=\"!$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            {{ ::item.deed.title }}\\n          </a>\\n        </div>\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.User.isAuthenticated() ?\\n                  $ctrl.joinGroup($ctrl.User.current, $ctrl.Group.current) :\\n                  $ctrl.Modal.openLogin()\"\\n                ng-if=\"!$ctrl.User.isMemberOfGroup($ctrl.Group.current)\">\\n          <i class=\"fa fa-fw fa-users\"></i>\\n          <span ng-hide=\"$ctrl.User.isAuthenticated()\">Login &amp; </span>\\n          Join us\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.editCampaign(\\'create\\', $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.showCampaignAlert\">\\n          <i class=\"fa fa-fw fa-bullhorn\"></i>\\n          Setup campaign\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.Modal.openGroupEdit(\\'update\\', $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n          <i class=\"fa fa-fw fa-edit\"></i>\\n          Update group\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.leaveGroup($ctrl.User.current, $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.User.isMemberOfGroup($ctrl.Group.current)\">\\n          <i class=\"fa fa-fw fa-sign-out\"></i>\\n          Leave group\\n        </button>\\n      </div>\\n\\n      <div class=\"col-sm-8 col-md-9 col-sm-pull-4 col-md-pull-3\">\\n        <uib-alert type=\"info\"\\n                   ng-show=\"$ctrl.showCampaignAlert\"\\n                   close=\"$ctrl.showCampaignAlert = false\">\\n          You haven\\'t got an active campaign, would you like to set one up now?&nbsp;\\n          <button class=\"btn btn-info btn-inline m-t-xxs p-xs\"\\n                  ng-click=\"$ctrl.editCampaign(\\'create\\', $ctrl.Group.current)\">\\n            Setup Campaign\\n          </button>\\n        </uib-alert>\\n\\n        <uib-tabset active=\"$ctrl.activeTab\"\\n                    type=\"pills\">\\n          <uib-tab>\\n            <uib-tab-heading>\\n              <i class=\"fa fa-fw fa-commenting\"></i>\\n              Welcome\\n            </uib-tab-heading>\\n\\n            <blockquote marked=\"$ctrl.Group.current.welcomeMessage\"\\n                        ng-show=\"$ctrl.Group.current.welcomeMessage\"></blockquote>\\n\\n            <div ng-hide=\"$ctrl.Group.current.welcomeMessage\">\\n              <h2>\\n                The Love is our Weapon Campaign is a youth movement that exists to\\n                change cities through the love of Jesus by doing strategic practical\\n                acts of love.\\n              </h2>\\n              <p>\\n                Thousands of people, doing thousands of acts of love, bringing\\n                change, value, healing and hope throughout cities and communities\\n                everywhere.\\n              </p>\\n            </div>\\n          </uib-tab>\\n\\n          <uib-tab>\\n            <uib-tab-heading>\\n              <i class=\"fa fa-fw fa-list\"></i>\\n              Activity Feed\\n            </uib-tab-heading>\\n\\n            <feed criteria=\"{ group: $ctrl.Group.current._id }\"\\n                  ng-show=\"$ctrl.User.isAuthenticated()\"></feed>\\n\\n            <p ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              You must <a ng-click=\"$ctrl.Modal.openLogin()\" href>login</a>\\n              to see {{ $ctrl.Group.current.name }}\\'s Activity Feed.\\n            </p>\\n          </uib-tab>\\n        </uib-tabset>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],25:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.group = exports.groupTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularMarked = require('angular-marked');\n\nvar _angularMarked2 = _interopRequireDefault(_angularMarked);\n\nvar _angularUiBootstrap = require('angular-ui-bootstrap');\n\nvar _angularUiBootstrap2 = _interopRequireDefault(_angularUiBootstrap);\n\nvar _Alertify = require('../../services/Alertify');\n\nvar _Alertify2 = _interopRequireDefault(_Alertify);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Group = require('../../services/Group');\n\nvar _Group2 = _interopRequireDefault(_Group);\n\nvar _Campaign = require('../../services/Campaign');\n\nvar _Campaign2 = _interopRequireDefault(_Campaign);\n\nvar _Act = require('../../services/Act');\n\nvar _Act2 = _interopRequireDefault(_Act);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _Modal = require('../../services/Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _feed = require('../feed');\n\nvar _feed2 = _interopRequireDefault(_feed);\n\nvar _GroupCtrl = require('./GroupCtrl');\n\nvar _GroupCtrl2 = _interopRequireDefault(_GroupCtrl);\n\nvar _group = require('./group.html');\n\nvar _group2 = _interopRequireDefault(_group);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nvar groupTpl = exports.groupTpl = _group2.default;\n\n// Module dependencies\n\n\nvar group = exports.group = _angular2.default.module('app.components.group', [_angularMarked2.default, _angularUiBootstrap2.default, _Alertify2.default, _User2.default, _Group2.default, _Campaign2.default, _Act2.default, _Feed2.default, _Modal2.default, _jumbotron2.default, _feed2.default]).controller('GroupCtrl', _GroupCtrl2.default).name;\n\n},{\"../../services/Act\":49,\"../../services/Alertify\":50,\"../../services/Campaign\":51,\"../../services/Feed\":54,\"../../services/Group\":55,\"../../services/Modal\":68,\"../../services/User\":73,\"../feed\":19,\"../jumbotron\":34,\"./GroupCtrl\":23,\"./group.html\":24,\"angular\":\"angular\",\"angular-marked\":\"angular-marked\",\"angular-ui-bootstrap\":\"angular-ui-bootstrap\"}],26:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HomeCtrl =\n/* @ngInject */\nfunction HomeCtrl($rootScope, User, Modal) {\n  _classCallCheck(this, HomeCtrl);\n\n  _extends(this, { User: User, Modal: Modal });\n\n  $rootScope.title = null;\n};\n\nexports.default = HomeCtrl;\n\n},{}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HomeFeedCtrl = function () {\n  /* @ngInject */\n\n  function HomeFeedCtrl(User, Act, Feed) {\n    var _this = this;\n\n    _classCallCheck(this, HomeFeedCtrl);\n\n    _extends(this, { User: User, Act: Act });\n\n    if (this.User.isAuthenticated() && this.User.current) {\n      Feed.update({ refresh: true });\n      this.countAllGroupActs(this.User.current.groups);\n    }\n\n    this.loginOff = this.User.on('login', function (user) {\n      Feed.update({ refresh: true });\n      _this.countAllGroupActs(user.groups);\n    });\n    this.logoutOff = this.User.on('logout', function () {\n      return Feed.update({ clear: true });\n    });\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n\n\n  _createClass(HomeFeedCtrl, [{\n    key: '$onDestroy',\n    value: function $onDestroy() {\n      this.loginOff();\n      this.logoutOff();\n    }\n\n    /**\n     * Create a comma-separated list of group ID's\n     *\n     * @param {object[]} groups\n     *\n     * @returns {string|null}\n     */\n\n  }, {\n    key: 'listGroupIds',\n    value: function listGroupIds(groups) {\n      return groups && groups.length ? _lodash2.default.map(groups, '_id').join(',') : null;\n    }\n\n    /**\n     * Count acts for a set of groups\n     *\n     * @param {object[]} groups\n     */\n\n  }, {\n    key: 'countAllGroupActs',\n    value: function countAllGroupActs(groups) {\n      var _this2 = this;\n\n      _lodash2.default.each(groups, function (group) {\n        return _this2.Act.count({ group: group._id });\n      });\n    }\n  }]);\n\n  return HomeFeedCtrl;\n}();\n\nexports.default = HomeFeedCtrl;\n\n},{\"lodash\":\"lodash\"}],28:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar WelcomeCtrl =\n/* @ngInject */\nfunction WelcomeCtrl(User, Group, Act, Modal) {\n  var _this = this;\n\n  _classCallCheck(this, WelcomeCtrl);\n\n  _extends(this, { Act: Act, Modal: Modal });\n\n  Group.find({ count: true }).then(function (response) {\n    return _this.numberOfGroups = Number(response.data);\n  });\n\n  User.find({ count: true }).then(function (response) {\n    return _this.numberOfUsers = Number(response.data);\n  });\n};\n\nexports.default = WelcomeCtrl;\n\n},{}],29:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-background=\"\\'/images/header-home.jpg\\'\"\\n           jumbo-classes=\"videotron\">\\n  <jumbo-content class=\"Home__Header\">\\n    <div class=\"text-center\">\\n      <h1 class=\"m-none\">Love is our Weapon</h1>\\n      <p class=\"m-t-none\">Changing the world one deed at a time</p>\\n    </div>\\n\\n    <div class=\"embed-responsive embed-responsive-16by9\">\\n      <youtube-video video-id=\"\\'rzvGAGKw8sU\\'\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"text-center m-t-md\">\\n      <button type=\"button\"\\n              class=\"btn btn-primary btn-lg\"\\n              ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n        Start a Campaign\\n      </button>\\n    </div>\\n  </jumbo-content>\\n</jumbotron>\\n\\n<welcome ng-hide=\"$ctrl.User.isAuthenticated()\"></welcome>\\n\\n<home-feed ng-show=\"$ctrl.User.isAuthenticated()\"></home-feed>\\n';\n},{}],30:[function(require,module,exports){\nmodule.exports = '<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-sm-4 col-sm-push-8 m-b-lg\">\\n      <h3 class=\"m-t-none m-b-md\">\\n        <i class=\"fa fa-users\"></i>\\n        Groups\\n      </h3>\\n      <div class=\"list-group group-list\">\\n        <a class=\"list-group-item clearfix\"\\n           ng-repeat=\"group in $ctrl.User.current.groups track by group._id\"\\n           ng-href=\"/g/{{ ::group.urlName }}\">\\n          <div class=\"group-list-img\">\\n            <img ng-src=\"{{ ::group.logo || \\'/images/group.png\\' }}\"\\n                 class=\"img-circle\">\\n          </div>\\n          <div class=\"group-list-content\">\\n            <h4 class=\"m-none\">{{ ::group.name }}</h4>\\n            <p class=\"m-b-none\">\\n              <span class=\\'f-lg\\'>\\n                {{ $ctrl.Act.counters[group._id] | number }}\\n              </span> acts of love\\n            </p>\\n          </div>\\n        </a>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-sm-8 col-sm-pull-4\">\\n      <h3 class=\"m-t-none m-b-md\">\\n        <i class=\"fa fa-fw fa-list\"></i>\\n        Activity Feed\\n      </h3>\\n\\n      <feed criteria=\"{\\n        user: $ctrl.User.current._id,\\n        group: $ctrl.listGroupIds($ctrl.User.current.groups)\\n      }\"></feed>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.home = exports.homeTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Group = require('../../services/Group');\n\nvar _Group2 = _interopRequireDefault(_Group);\n\nvar _Act = require('../../services/Act');\n\nvar _Act2 = _interopRequireDefault(_Act);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _Modal = require('../../services/Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _feed = require('../feed');\n\nvar _feed2 = _interopRequireDefault(_feed);\n\nvar _deedList = require('../deed-list');\n\nvar _deedList2 = _interopRequireDefault(_deedList);\n\nvar _HomeCtrl = require('./HomeCtrl');\n\nvar _HomeCtrl2 = _interopRequireDefault(_HomeCtrl);\n\nvar _home = require('./home.html');\n\nvar _home2 = _interopRequireDefault(_home);\n\nvar _WelcomeCtrl = require('./WelcomeCtrl');\n\nvar _WelcomeCtrl2 = _interopRequireDefault(_WelcomeCtrl);\n\nvar _welcome = require('./welcome.html');\n\nvar _welcome2 = _interopRequireDefault(_welcome);\n\nvar _HomeFeedCtrl = require('./HomeFeedCtrl');\n\nvar _HomeFeedCtrl2 = _interopRequireDefault(_HomeFeedCtrl);\n\nvar _homeFeed = require('./homeFeed.html');\n\nvar _homeFeed2 = _interopRequireDefault(_homeFeed);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\n\n\n// Module dependencies\nvar homeTpl = exports.homeTpl = _home2.default;\nvar home = exports.home = _angular2.default.module('app.components.home', [_User2.default, _Group2.default, _Act2.default, _Feed2.default, _Modal2.default, _jumbotron2.default, _feed2.default, _deedList2.default]).controller('HomeCtrl', _HomeCtrl2.default).component('welcome', {\n  controller: _WelcomeCtrl2.default,\n  template: _welcome2.default\n}).component('homeFeed', {\n  controller: _HomeFeedCtrl2.default,\n  template: _homeFeed2.default\n}).name;\n\n},{\"../../services/Act\":49,\"../../services/Feed\":54,\"../../services/Group\":55,\"../../services/Modal\":68,\"../../services/User\":73,\"../deed-list\":13,\"../feed\":19,\"../jumbotron\":34,\"./HomeCtrl\":26,\"./HomeFeedCtrl\":27,\"./WelcomeCtrl\":28,\"./home.html\":29,\"./homeFeed.html\":30,\"./welcome.html\":32,\"angular\":\"angular\"}],32:[function(require,module,exports){\nmodule.exports = '<div class=\"Home__SignupLogin\">\\n  <div class=\"container container-pad-sm text-center\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h3 class=\"m-t-none\">Start changing your world today!</h3>\\n        <p>Sign up or login to join the Global Campaign or your local group campaign.</p>\\n        <p>\\n          <br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.Modal.openSignup()\">\\n            Sign up\\n          </button>\\n          &nbsp;&nbsp; or &nbsp;&nbsp;\\n          <button type=\"button\"\\n                  class=\"btn btn-default\"\\n                  ng-click=\"$ctrl.Modal.openLogin()\">\\n            Login\\n          </button>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__SignupLogin -->\\n\\n<deed-list></deed-list>\\n\\n<div class=\"Home__Welcome\">\\n  <div class=\"container container-pad\">\\n    <div class=\"row\">\\n      <div class=\"col-sm-9\">\\n        <h2>\\n          The Love is our Weapon Campaign is a youth movement that exists to\\n          change cities through the love of Jesus by doing strategic practical\\n          acts of love.\\n        </h2>\\n        <p>\\n          Thousands of people, doing thousands of acts of love, bringing\\n          change, value, healing and hope throughout cities and communities\\n          everywhere.\\n        </p>\\n        <p>\\n          <br><br><br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n            Start a Campaign for your Group!\\n          </button>\\n        </p>\\n      </div>\\n\\n      <div class=\"col-sm-3\">\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.Act.counters.global\">\\n            {{ $ctrl.Act.counters.global | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.Act.counters.global\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">acts of love</h4>\\n        <p class=\"m-t-none\">done around the world</p>\\n\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.numberOfGroups\">\\n            {{ $ctrl.numberOfGroups | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.numberOfGroups\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">groups</h4>\\n        <p class=\"m-t-none\">serving together</p>\\n\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.numberOfUsers\">\\n            {{ $ctrl.numberOfUsers | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.numberOfUsers\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">individuals</h4>\\n        <p class=\"m-t-none\">causing change</p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__Welcome -->\\n\\n<div class=\"Home__HowTo\">\\n  <div class=\"container\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h2 class=\"text-center\">\\n          Running a campaign is as easy as 1, 2, 3.\\n        </h2>\\n        <img src=\"images/welcome-laptop.png\">\\n        <ol>\\n          <li>\\n            Sign up<br>\\n            <small>\\n              All you have to do is enter your details and login to\\n              join a campaign!\\n            </small>\\n          </li>\\n          <li>Join or Start a Campaign</li>\\n          <li>Start changing your world!</li>\\n        </ol>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__HowTo -->\\n\\n<div class=\"Home__Spacer\"></div>\\n\\n<div class=\"Home__Footer\">\\n  <div class=\"container container-pad text-center\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h1>Love is our Weapon</h1>\\n        <p>\\n          <br><br><br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n            Start a Campaign\\n          </button>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__Footer -->\\n';\n},{}],33:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar JumbotronCtrl = function JumbotronCtrl() {\n  _classCallCheck(this, JumbotronCtrl);\n\n  this.styles = {\n    'background-image': this.background ? 'url(' + this.background + ')' : 'none'\n  };\n};\n\nexports.default = JumbotronCtrl;\n\n},{}],34:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _JumbotronCtrl = require('./JumbotronCtrl');\n\nvar _JumbotronCtrl2 = _interopRequireDefault(_JumbotronCtrl);\n\nvar _jumbotron = require('./jumbotron.html');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nexports.default = _angular2.default.module('app.components.jumbotron', []).component('jumbotron', {\n  controller: _JumbotronCtrl2.default,\n  template: _jumbotron2.default,\n  transclude: {\n    content: '?jumboContent',\n    title: '?jumboTitle',\n    text: '?jumboText'\n  },\n  bindings: {\n    image: '<jumboImage',\n    background: '<jumboBackground',\n    classes: '@jumboClasses'\n  }\n}).name;\n\n},{\"./JumbotronCtrl\":33,\"./jumbotron.html\":35,\"angular\":\"angular\"}],35:[function(require,module,exports){\nmodule.exports = '<div class=\"jumbotron {{ $ctrl.classes }}\"\\n     ng-style=\"$ctrl.styles\">\\n  <div class=\"container\">\\n    <div ng-transclude=\"content\">\\n      <div class=\"jumbotron-image\"\\n           ng-if=\"$ctrl.image\">\\n        <img ng-src=\"{{ $ctrl.image }}\"\\n             class=\"img-responsive img-circle\">\\n      </div>\\n      <h1 class=\"jumbotron-title\"\\n          ng-transclude=\"title\"></h1>\\n      <p class=\"jumbotron-text\"\\n         ng-transclude=\"text\"></p>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],36:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* global $ */\n\nvar MIN_QUERY_LENGTH = 3;\n\nvar NavbarCtrl = function () {\n  /* @ngInject */\n\n  function NavbarCtrl($location, $q, User, Group, Deed, Act, Modal) {\n    _classCallCheck(this, NavbarCtrl);\n\n    _extends(this, { $location: $location, $q: $q, User: User, Group: Group, Deed: Deed, Act: Act, Modal: Modal });\n\n    this.choices = [];\n    this.selected = null;\n\n    this.Act.count();\n  }\n\n  /**\n   * Refresh list of groups and deeds using search query\n   *\n   * @param {string} query\n   *\n   * @returns {Promise|boolean}\n   */\n\n\n  _createClass(NavbarCtrl, [{\n    key: 'refreshChoices',\n    value: function refreshChoices(query) {\n      var _this = this;\n\n      this.choices = [];\n\n      if (query.length < MIN_QUERY_LENGTH) {\n        return false;\n      }\n\n      return this.$q.all([this.Group.search(query, { fields: '_id,name,urlName' }), this.Deed.search(query, { fields: '_id,title,urlTitle' })]).then(function (responses) {\n        return _this.choices = responses[0].data.concat(responses[1].data);\n      });\n    }\n\n    /**\n     * Group list of choices\n     *\n     * @param {object} item\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'groupChoices',\n    value: function groupChoices(item) {\n      return item.urlName ? 'Groups' : 'Deeds';\n    }\n\n    /**\n     * Redirect to the selected group or deed page\n     *\n     * @param {object} item\n     */\n\n  }, {\n    key: 'select',\n    value: function select(item) {\n      this.selected = null;\n      this.$location.path(item.urlName ? '/g/' + item.urlName : '/d/' + item.urlTitle);\n      this.collapseMenu();\n    }\n\n    /**\n     * Set the current user's group, redirect to group homepage\n     *\n     * @param {object} group\n     */\n\n  }, {\n    key: 'setUserGroup',\n    value: function setUserGroup(group) {\n      this.User.group = group;\n      this.select(group);\n    }\n\n    /**\n     * Call the jQuery .collapse method\n     * TODO: should be in directive?\n     */\n\n  }, {\n    key: 'collapseMenu',\n    value: function collapseMenu() {\n      $('#liow-navbar-collapse').collapse('hide');\n    }\n  }]);\n\n  return NavbarCtrl;\n}();\n\nexports.default = NavbarCtrl;\n\n},{}],37:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularSanitize = require('angular-sanitize');\n\nvar _angularSanitize2 = _interopRequireDefault(_angularSanitize);\n\nvar _uiSelect = require('ui-select');\n\nvar _uiSelect2 = _interopRequireDefault(_uiSelect);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Group = require('../../services/Group');\n\nvar _Group2 = _interopRequireDefault(_Group);\n\nvar _Deed = require('../../services/Deed');\n\nvar _Deed2 = _interopRequireDefault(_Deed);\n\nvar _Act = require('../../services/Act');\n\nvar _Act2 = _interopRequireDefault(_Act);\n\nvar _Modal = require('../../services/Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nvar _NavbarCtrl = require('./NavbarCtrl');\n\nvar _NavbarCtrl2 = _interopRequireDefault(_NavbarCtrl);\n\nvar _navbar = require('./navbar.html');\n\nvar _navbar2 = _interopRequireDefault(_navbar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nexports.default = _angular2.default.module('app.components.navbar', [_angularSanitize2.default, _uiSelect2.default, _User2.default, _Group2.default, _Deed2.default, _Act2.default, _Modal2.default]).component('navbar', {\n  controller: _NavbarCtrl2.default,\n  template: _navbar2.default\n}).name;\n\n// Module dependencies\n\n},{\"../../services/Act\":49,\"../../services/Deed\":53,\"../../services/Group\":55,\"../../services/Modal\":68,\"../../services/User\":73,\"./NavbarCtrl\":36,\"./navbar.html\":38,\"angular\":\"angular\",\"angular-sanitize\":\"angular-sanitize\",\"ui-select\":\"ui-select\"}],38:[function(require,module,exports){\nmodule.exports = '<nav class=\"navbar navbar-default navbar-fixed-top\" id=\"liow-navbar\" role=\"navigation\">\\n  <div class=\"container\">\\n    <div class=\"navbar-header\">\\n      <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#liow-navbar-collapse\" aria-expanded=\"false\">\\n        <span class=\"sr-only\">Toggle navigation</span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n      </button>\\n\\n      <a class=\"navbar-brand\"\\n         ng-click=\"$ctrl.collapseMenu()\"\\n         title=\"Love is our Weapon\"\\n         href=\"/\">\\n        <img src=\"/images/logo-navbar.png\"\\n             alt=\"Love is our Weapon\">\\n        <div class=\"navbar-brand-label\">\\n          <span class=\"text-primary\">\\n            {{ $ctrl.Act.counters.global | number }}\\n          </span>\\n          <br><small>acts of love</small>\\n        </div>\\n      </a>\\n    </div>\\n\\n    <div class=\"collapse navbar-collapse\" id=\"liow-navbar-collapse\">\\n      <div class=\"navbar-divider navbar-left\"></div>\\n\\n      <form class=\"navbar-form navbar-left\" id=\"group-search\" role=\"search\">\\n        <div class=\"form-group\">\\n          <label class=\"input-group\">\\n            <div class=\"input-group-addon\"><i class=\"fa fa-search\"></i></div>\\n            <ui-select ng-model=\"$ctrl.selected\"\\n                       on-select=\"$ctrl.select($item)\"\\n                       append-to-body=\"false\">\\n              <ui-select-match placeholder=\"Find a group or deed...\">\\n                {{ $select.selected.name || $select.selected.title }}\\n              </ui-select-match>\\n              <ui-select-choices repeat=\"choice in $ctrl.choices\"\\n                                 group-by=\"$ctrl.groupChoices\"\\n                                 refresh=\"$ctrl.refreshChoices($select.search)\"\\n                                 refresh-delay=\"200\"\\n                                 position=\"down\">\\n                <div ng-bind-html=\"(choice.name || choice.title) | highlight:$select.search\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </label>\\n        </div>\\n      </form>\\n\\n      <ul class=\"nav navbar-nav navbar-right\">\\n        <li>\\n          <a ng-href=\"/global\"\\n             ng-click=\"$ctrl.collapseMenu()\"\\n             title=\"Global Activity Feed\">\\n            Global\\n          </a>\\n        </li>\\n        <li ng-show=\"$ctrl.User.isAuthenticated() && $ctrl.User.group\">\\n          <a ng-href=\"/g/{{ $ctrl.User.group.urlName }}\"\\n             ng-click=\"$ctrl.collapseMenu()\"\\n             title=\"{{ $ctrl.User.group.name }}\">\\n            Campaign\\n          </a>\\n        </li>\\n        <li class=\"dropdown\">\\n          <a class=\"dropdown-toggle user-dropdown\"\\n             data-toggle=\"dropdown\"\\n             role=\"button\"\\n             aria-haspopup=\"true\"\\n             aria-expanded=\"false\"\\n             href>\\n            <img ng-src=\"{{ $ctrl.User.current.picture || $ctrl.User.getDefaultUserImage($ctrl.User.current._id) }}\"\\n                 class=\"img-circle\">\\n            <span class=\"caret\"></span>\\n          </a>\\n          <ul class=\"dropdown-menu\">\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              {{ $ctrl.User.current.name }}\\n            </li>\\n            <li ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-href=\"/u/{{ $ctrl.User.current._id }}\"\\n                 ng-click=\"$ctrl.collapseMenu()\">\\n                <i class=\"fa fa-fw fa-user\"></i>\\n                Your Profile\\n              </a>\\n            </li>\\n            <li ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.User.logout() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-sign-out\"></i>\\n                Logout\\n              </a>\\n            </li>\\n            <li ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.Modal.openLogin() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-sign-in\"></i>\\n                Login\\n              </a>\\n            </li>\\n            <li ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.Modal.openSignup() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-user-plus\"></i>\\n                Sign up\\n              </a>\\n            </li>\\n            <li class=\"divider\" ng-show=\"$ctrl.User.isAuthenticated()\" role=\"separator\"></li>\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <i class=\"fa fa-fw fa-users\"></i>\\n              Groups\\n            </li>\\n            <li ng-repeat=\"group in $ctrl.User.current.groups track by group._id\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\"\\n                ng-class=\"{ \\'active\\': $ctrl.User.group._id === group._id }\">\\n              <a ng-click=\"$ctrl.setUserGroup(group)\" href>\\n                {{ group.name }}\\n              </a>\\n            </li>\\n            <li>\\n              <a ng-click=\"$ctrl.Modal.openGroupEdit() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-pencil-square-o\"></i>\\n                Group sign up\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\\n';\n},{}],39:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ResetPasswordCtrl = function () {\n  /* @ngInject */\n\n  function ResetPasswordCtrl($rootScope, $routeParams, $location, Alertify, User, Modal) {\n    _classCallCheck(this, ResetPasswordCtrl);\n\n    _extends(this, { $routeParams: $routeParams, $location: $location, Alertify: Alertify, User: User, Modal: Modal });\n\n    $rootScope.title = 'Reset Password';\n  }\n\n  /**\n   * Save the user's new password\n   *\n   * @param {string} password\n   * @param {string} token\n   */\n\n\n  _createClass(ResetPasswordCtrl, [{\n    key: 'save',\n    value: function save(password, token) {\n      var _this = this;\n\n      this.saving = true;\n      this.User.resetPassword(password, token).then(function () {\n        return _this.Alertify.success('Password reset');\n      }).catch(function () {\n        return _this.Alertify.error('Password reset link has expired');\n      }).then(function () {\n        return _this.Modal.openLogin() && _this.$location.url('/');\n      });\n    }\n  }]);\n\n  return ResetPasswordCtrl;\n}();\n\nexports.default = ResetPasswordCtrl;\n\n},{}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.resetPassword = exports.resetPasswordTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _Alertify = require('../../services/Alertify');\n\nvar _Alertify2 = _interopRequireDefault(_Alertify);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _directives = require('../../directives');\n\nvar _directives2 = _interopRequireDefault(_directives);\n\nvar _ResetPasswordCtrl = require('./ResetPasswordCtrl');\n\nvar _ResetPasswordCtrl2 = _interopRequireDefault(_ResetPasswordCtrl);\n\nvar _resetPassword = require('./resetPassword.html');\n\nvar _resetPassword2 = _interopRequireDefault(_resetPassword);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\n\n\n// Module dependencies\nvar resetPasswordTpl = exports.resetPasswordTpl = _resetPassword2.default;\n\nvar resetPassword = exports.resetPassword = _angular2.default.module('app.component.resetPassword', [_Alertify2.default, _User2.default, _jumbotron2.default, _directives2.default]).controller('ResetPasswordCtrl', _ResetPasswordCtrl2.default).name;\n\n},{\"../../directives\":46,\"../../services/Alertify\":50,\"../../services/User\":73,\"../jumbotron\":34,\"./ResetPasswordCtrl\":39,\"./resetPassword.html\":41,\"angular\":\"angular\"}],41:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-background=\"\\'/images/header.jpg\\'\"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12 col-sm-8 col-sm-push-2 col-md-6 col-md-push-3\">\\n      <h3>\\n        <i class=\"fa fa-fw fa-key\"></i>\\n        Reset your password\\n      </h3>\\n\\n      <form name=\"resetPassword\"\\n            ng-submit=\"$ctrl.form.$valid && $ctrl.save($ctrl.password, $ctrl.$routeParams.token)\"\\n            novalidate>\\n      <span ng-init=\"$ctrl.form = resetPassword\"></span>\\n\\n        <div class=\"form-group\"\\n             ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.password.$invalid }\">\\n          <label for=\"password\">Password</label>\\n          <input type=\"password\"\\n                 class=\"form-control\"\\n                 id=\"password\"\\n                 name=\"password\"\\n                 placeholder=\"Enter a new password...\"\\n                 ng-model=\"$ctrl.password\"\\n                 required\\n                 minlength=\"8\"\\n                 autofocus>\\n          <span class=\"help-block\"\\n                ng-show=\"$ctrl.form.password.$error.minlength\">\\n            Password must be at least 8 characters.\\n          </span>\\n        </div>\\n\\n        <div class=\"form-group\"\\n             ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.confirmPassword.$invalid }\">\\n          <label for=\"confirmPassword\">Confirm Password</label>\\n          <input type=\"password\"\\n                 class=\"form-control\"\\n                 id=\"confirmPassword\"\\n                 name=\"confirmPassword\"\\n                 placeholder=\"Enter the same password again...\"\\n                 ng-model=\"$ctrl.confirmPassword\"\\n                 required\\n                 same-as=\"$ctrl.password\">\\n          <span class=\"help-block\"\\n                  ng-show=\"$ctrl.form.confirmPassword.$error.sameAs\">\\n            Entered passwords must be the same.\\n          </span>\\n        </div>\\n\\n        <button type=\"submit\"\\n                class=\"btn btn-primary btn-block\"\\n                ng-disabled=\"$ctrl.form.$pristine || $ctrl.saving\">\\n          <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n          Submit\\n        </button>\\n      </form>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _seedrandom = require('seedrandom');\n\nvar _seedrandom2 = _interopRequireDefault(_seedrandom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NUM_IMAGES = 6;\n\nvar UserCtrl = function () {\n  /* @ngInject */\n\n  function UserCtrl($rootScope, $routeParams, User, Act, Feed, Modal) {\n    var _this = this;\n\n    _classCallCheck(this, UserCtrl);\n\n    _extends(this, { User: User, Act: Act, Feed: Feed, Modal: Modal });\n\n    // Set a random jumbotron background image seeded by the user ID\n    this.jumbotronBackground = '/images/header' + Math.floor((0, _seedrandom2.default)($routeParams.user)() * NUM_IMAGES) + '.jpg';\n\n    this.loadUser($routeParams.user).then(function () {\n      return $rootScope.title = _this.user ? _this.user.firstName + (_this.user.lastName ? ' ' + _this.user.lastName : '') : null;\n    });\n\n    this.loginOff = this.User.on('login', function () {\n      return _this.Feed.update({ refresh: true });\n    });\n    this.logoutOff = this.User.on('logout', function () {\n      return _this.Feed.update({ clear: true });\n    });\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n\n\n  _createClass(UserCtrl, [{\n    key: '$onDestroy',\n    value: function $onDestroy() {\n      this.loginOff();\n      this.logoutOff();\n    }\n\n    /**\n     * Load a user by ID\n     *\n     * @param {string} userId\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'loadUser',\n    value: function loadUser(userId) {\n      var _this2 = this;\n\n      this.loading = true;\n      return this.User.findById(userId).then(function (response) {\n        _this2.user = response.data;\n        _this2.Act.count({ user: _this2.user._id });\n        if (_this2.User.isAuthenticated()) _this2.Feed.update(true);\n      }).catch(function () {\n        _this2.error = 'User not found';\n        _this2.user = null;\n      }).then(function () {\n        return _this2.loading = false;\n      });\n    }\n  }]);\n\n  return UserCtrl;\n}();\n\nexports.default = UserCtrl;\n\n},{\"seedrandom\":\"seedrandom\"}],43:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.user = exports.userTpl = undefined;\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Act = require('../../services/Act');\n\nvar _Act2 = _interopRequireDefault(_Act);\n\nvar _Feed = require('../../services/Feed');\n\nvar _Feed2 = _interopRequireDefault(_Feed);\n\nvar _Modal = require('../../services/Modal');\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nvar _jumbotron = require('../jumbotron');\n\nvar _jumbotron2 = _interopRequireDefault(_jumbotron);\n\nvar _UserCtrl = require('./UserCtrl');\n\nvar _UserCtrl2 = _interopRequireDefault(_UserCtrl);\n\nvar _user = require('./user.html');\n\nvar _user2 = _interopRequireDefault(_user);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Component dependencies\nvar userTpl = exports.userTpl = _user2.default;\n\n// Module dependencies\n\n\nvar user = exports.user = _angular2.default.module('app.components.user', [_User2.default, _Act2.default, _Feed2.default, _Modal2.default, _jumbotron2.default]).controller('UserCtrl', _UserCtrl2.default).name;\n\n},{\"../../services/Act\":49,\"../../services/Feed\":54,\"../../services/Modal\":68,\"../../services/User\":73,\"../jumbotron\":34,\"./UserCtrl\":42,\"./user.html\":44,\"angular\":\"angular\"}],44:[function(require,module,exports){\nmodule.exports = '<jumbotron jumbo-image=\"$ctrl.user.picture || $ctrl.User.getDefaultUserImage(item.user._id)\"\\n           jumbo-background=\"::$ctrl.jumbotronBackground\"\\n           jumbo-classes=\"jumbotron-small\">\\n  <jumbo-title>{{ ::$ctrl.user.name }}</jumbo-title>\\n  <jumbo-text>\\n    <span class=\"f-lg\">\\n      {{ $ctrl.Act.counters[$ctrl.user._id] | number }}\\n    </span>\\n    acts of love\\n  </jumbo-text>\\n</jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-xs-12\">\\n        <h3 class=\"m-t-none m-b-md\">\\n          <i class=\"fa fa-fw fa-list\"></i>\\n          Activity Feed\\n        </h3>\\n\\n        <feed criteria=\"{ user: $ctrl.user._id }\"\\n              ng-show=\"$ctrl.User.isAuthenticated()\"></feed>\\n\\n        <p ng-hide=\"$ctrl.User.isAuthenticated()\">\\n          You must <a ng-click=\"$ctrl.Modal.openLogin()\" href>login</a>\\n          to see {{ $ctrl.user.firstName }}\\'s Activity Feed.\\n        </p>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],45:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* globals LIOW_CONFIG */\n\nvar defaults = {\n  serverUrl: 'http://localhost:3000',\n  facebookClientId: 'FACEBOOK_CLIENT_ID'\n};\n\nexports.default = _angular2.default.module('app.config', []).constant('config', _lodash2.default.defaults(LIOW_CONFIG || {}, defaults)).name;\n\n},{\"angular\":\"angular\",\"lodash\":\"lodash\"}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('app.directives', []).directive('sameAs', function () {\n  return {\n    require: 'ngModel',\n    scope: {\n      'otherValue': '=sameAs'\n    },\n    link: function link(scope, elm, attrs, ctrl) {\n      ctrl.$validators.sameAs = function (modelValue) {\n        return modelValue === scope.otherValue;\n      };\n    }\n  };\n}).directive('autofocus', /* @ngInject */function ($timeout) {\n  return {\n    restrict: 'A',\n    link: function link(scope, elm) {\n      $timeout(function () {\n        var element = _lodash2.default.head(elm);\n\n        element.focus();\n        _lodash2.default.isFunction(element.select) && element.select();\n      });\n    }\n  };\n}).name;\n\n},{\"angular\":\"angular\",\"lodash\":\"lodash\"}],47:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('app.filters.lodash', []).filter('capitalize', function () {\n  return _lodash2.default.capitalize;\n}).filter('kebabCase', function () {\n  return _lodash2.default.kebabCase;\n}).name;\n\n},{\"angular\":\"angular\",\"lodash\":\"lodash\"}],48:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('app.filters.moment', []).filter('moment', function () {\n  return function (dateString) {\n    var format = arguments.length <= 1 || arguments[1] === undefined ? 'DD/MM/YYYY' : arguments[1];\n\n    if (!dateString) {\n      return;\n    }\n\n    return (0, _moment2.default)(dateString).format(format);\n  };\n}).filter('fromNow', function () {\n  return function (dateString) {\n    if (!dateString) {\n      return;\n    }\n\n    return (0, _moment2.default)(dateString).fromNow();\n  };\n}).name;\n\n},{\"angular\":\"angular\",\"moment\":\"moment\"}],49:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Act = function () {\n  /* @ngInject */\n\n  function Act($http, config) {\n    _classCallCheck(this, Act);\n\n    _extends(this, { $http: $http });\n\n    this.baseUrl = config.serverUrl + '/acts';\n    this.counters = {};\n  }\n\n  /**\n   * Count acts for global, a user, a group, a campaign or a deed\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n\n\n  _createClass(Act, [{\n    key: 'count',\n    value: function count() {\n      var _this = this;\n\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      params = _lodash2.default.defaults(params, { count: true });\n\n      return this.$http.get(this.baseUrl, { params: params }).then(function (response) {\n        response.data = Number(response.data);\n\n        if (params.user) _this.counters[params.user] = response.data;else if (params.group) _this.counters[params.group] = response.data;else if (params.campaign) _this.counters[params.campaign] = response.data;else if (params.deed) _this.counters[params.deed] = response.data;else _this.counters.global = response.data;\n\n        return response;\n      });\n    }\n\n    /**\n     * Register a deed as done\n     *\n     * @param {object} deed\n     * @param {object} [group=null]\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'done',\n    value: function done(deed) {\n      var group = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      return this.$http.post(this.baseUrl, {\n        deed: deed._id,\n        group: _lodash2.default.has(group, '_id') ? group._id : null\n      });\n    }\n  }]);\n\n  return Act;\n}();\n\nexports.default = _angular2.default.module('app.services.Act', [_config2.default]).service('Act', Act).name;\n\n},{\"../config\":45,\"angular\":\"angular\",\"lodash\":\"lodash\"}],50:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _alertify = require('alertify.js');\n\nvar _alertify2 = _interopRequireDefault(_alertify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('app.services.Alertify', []).factory('Alertify', function () {\n  _alertify2.default.theme('bootstrap').logPosition('top right');\n\n  return {\n\n    /**\n     * Show a normal log message\n     *\n     * @param {string} message\n     * @param {string} icon\n     *\n     * @returns {object}\n     */\n\n    log: function log(message) {\n      var icon = arguments.length <= 1 || arguments[1] === undefined ? 'info-circle' : arguments[1];\n\n      return _alertify2.default.setLogTemplate(function (input) {\n        return '<i class=\"fa fa-fw fa-' + icon + '\"></i> ' + input;\n      }).log(message);\n    },\n\n\n    /**\n     * Show a green success message\n     *\n     * @param {string} message\n     * @param {string} icon\n     *\n     * @returns {object}\n     */\n    success: function success(message) {\n      var icon = arguments.length <= 1 || arguments[1] === undefined ? 'check-circle' : arguments[1];\n\n      return _alertify2.default.setLogTemplate(function (input) {\n        return '<i class=\"fa fa-fw fa-' + icon + '\"></i> ' + input;\n      }).success(message);\n    },\n\n\n    /**\n     * Show a red error message\n     *\n     * @param {string} message\n     * @param {string} icon\n     *\n     * @returns {object}\n     */\n    error: function error(message) {\n      var icon = arguments.length <= 1 || arguments[1] === undefined ? 'exclamation-circle' : arguments[1];\n\n      return _alertify2.default.setLogTemplate(function (input) {\n        return '<i class=\"fa fa-fw fa-' + icon + '\"></i> ' + input;\n      }).error(message);\n    }\n  };\n}).name;\n\n},{\"alertify.js\":\"alertify.js\",\"angular\":\"angular\"}],51:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Campaign = function () {\n  /* @ngInject */\n\n  function Campaign($http, $q, config) {\n    _classCallCheck(this, Campaign);\n\n    _extends(this, { $http: $http, $q: $q });\n\n    this.baseUrl = config.serverUrl + '/campaigns';\n  }\n\n  /**\n   * Find campaigns by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n\n\n  _createClass(Campaign, [{\n    key: 'find',\n    value: function find() {\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.$http.get(this.baseUrl, { params: params });\n    }\n\n    /**\n     * Find a single campaign by params\n     *\n     * @param {object} params\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'findOne',\n    value: function findOne(params) {\n      var _this = this;\n\n      return this.$q(function (resolve, reject) {\n        _this.find(params).then(function (response) {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Campaign not found'));\n          }\n        }).catch(function () {\n          return reject(new Error('Failed connecting to server'));\n        });\n      });\n    }\n\n    /**\n     * Save a new or existing campaign\n     *\n     * @param {object} campaign\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'save',\n    value: function save(campaign) {\n      if (_.has(campaign, '_id')) {\n        return this.$http.put(this.baseUrl + '/' + campaign._id, campaign);\n      } else {\n        return this.$http.post(this.baseUrl, campaign);\n      }\n    }\n\n    /**\n     * Update an existing campaign\n     *\n     * @param {object}   campaign\n     * @param {object[]} changes\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'update',\n    value: function update(campaign, changes) {\n      return this.$http.patch(this.baseUrl + '/' + campaign._id, changes);\n    }\n  }]);\n\n  return Campaign;\n}();\n\nexports.default = _angular2.default.module('app.services.Campaign', [_config2.default]).service('Campaign', Campaign).name;\n\n},{\"../config\":45,\"angular\":\"angular\"}],52:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Comment = function () {\n  /* @ngInject */\n\n  function Comment($http, config) {\n    _classCallCheck(this, Comment);\n\n    _extends(this, { $http: $http });\n\n    this.baseUrl = config.serverUrl;\n  }\n\n  /**\n   * Save a comment\n   *\n   * @param {object} comment\n   */\n\n\n  _createClass(Comment, [{\n    key: 'save',\n    value: function save(comment) {\n      var method = _lodash2.default.has(comment, '_id') ? 'put' : 'post',\n          url = '/comments' + (_lodash2.default.has(comment, '_id') ? '/' + comment._id : '');\n\n      switch (true) {\n        case _lodash2.default.has(comment.target, 'deed'):\n          url = '/deeds/' + comment.target.deed + url;\n          break;\n        case _lodash2.default.has(comment.target, 'group'):\n          url = '/groups/' + comment.target.group + url;\n          break;\n        case _lodash2.default.has(comment.target, 'comment'):\n          url = '/comments/' + comment.target.comment + url;\n          break;\n        case _lodash2.default.has(comment.target, 'act'):\n          url = '/acts/' + comment.target.acts + url;\n          break;\n      }\n\n      return this.$http[method]('' + this.baseUrl + url, comment);\n    }\n  }]);\n\n  return Comment;\n}();\n\nexports.default = _angular2.default.module('si.services.Comment', [_config2.default]).service('Comment', Comment).name;\n\n},{\"../config\":45,\"angular\":\"angular\",\"lodash\":\"lodash\"}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar currentDeed = null;\n\nvar Deed = function () {\n  /* @ngInject */\n\n  function Deed($http, $q, config) {\n    _classCallCheck(this, Deed);\n\n    _extends(this, { $http: $http, $q: $q });\n\n    this.baseUrl = config.serverUrl + '/deeds';\n  }\n\n  /**\n   * Find deeds by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n\n\n  _createClass(Deed, [{\n    key: 'find',\n    value: function find() {\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.$http.get(this.baseUrl, { params: params });\n    }\n\n    /**\n     * Find a single deed by params\n     *\n     * @param {object} params\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'findOne',\n    value: function findOne(params) {\n      var _this = this;\n\n      return this.$q(function (resolve, reject) {\n        _this.find(params).then(function (response) {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Deed not found'));\n          }\n        }).catch(function () {\n          return reject(new Error('Failed connecting to server'));\n        });\n      });\n    }\n\n    /**\n     * Search for deeds with a search query and optional params\n     *\n     * @param {string} query\n     * @param {object} params\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'search',\n    value: function search(query, params) {\n      params = _.merge({ query: query }, params);\n\n      return this.find(params);\n    }\n\n    /**\n     * Get a deed by ID\n     *\n     * @param {string} deedId\n     * @param {object} [params={}]\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'get',\n    value: function get(deedId) {\n      var params = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      return this.$http.get(this.baseUrl + '/' + deedId, { params: params });\n    }\n\n    /**\n     * Set the current deed\n     *\n     * @param {object|null} deed\n     */\n\n  }, {\n    key: 'current',\n    set: function set(deed) {\n      currentDeed = deed;\n    }\n\n    /**\n     * Get the current deed\n     *\n     * @returns {object|null}\n     */\n    ,\n    get: function get() {\n      return currentDeed;\n    }\n  }]);\n\n  return Deed;\n}();\n\nexports.default = _angular2.default.module('app.services.Deed', [_config2.default]).service('Deed', Deed).name;\n\n},{\"../config\":45,\"angular\":\"angular\"}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FEED_UPDATE_DELAY = 80;\nvar listeners = {};\n\nvar Feed = function () {\n  /* @ngInject */\n\n  function Feed($http, $timeout, config) {\n    _classCallCheck(this, Feed);\n\n    _extends(this, { $http: $http, $timeout: $timeout });\n\n    this.baseUrl = config.serverUrl + '/feeds';\n  }\n\n  /**\n   * Find a feed by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n\n\n  _createClass(Feed, [{\n    key: 'find',\n    value: function find() {\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.$http.get(this.baseUrl, { params: params });\n    }\n\n    /**\n     * Subscribe to a Feed update\n     *\n     * @param {function} callback\n     *\n     * @returns {function}\n     */\n\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate(callback) {\n      var id = _uuid2.default.v4();\n      listeners[id] = { callback: callback };\n\n      return function () {\n        return delete listeners[id];\n      };\n    }\n\n    /**\n     * Publish an async Feed update\n     *\n     * @param {object} [options={}]\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      this.$timeout(function () {\n        _lodash2.default.forOwn(listeners, function (listener) {\n          return listener.callback(options);\n        });\n      }, FEED_UPDATE_DELAY);\n    }\n  }]);\n\n  return Feed;\n}();\n\nexports.default = _angular2.default.module('app.services.Feed', [_config2.default]).service('Feed', Feed).name;\n\n},{\"../config\":45,\"angular\":\"angular\",\"lodash\":\"lodash\",\"uuid\":83}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _User = require('./User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar currentGroup = null;\n\nvar Group = function () {\n  /* @ngInject */\n\n  function Group($http, $q, config, User) {\n    _classCallCheck(this, Group);\n\n    _extends(this, { $http: $http, $q: $q, User: User });\n\n    this.baseUrl = config.serverUrl + '/groups';\n  }\n\n  /**\n   * Find groups by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n\n\n  _createClass(Group, [{\n    key: 'find',\n    value: function find() {\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.$http.get(this.baseUrl, { params: params });\n    }\n\n    /**\n     * Find a single group by params\n     *\n     * @param {object} params\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'findOne',\n    value: function findOne(params) {\n      var _this = this;\n\n      return this.$q(function (resolve, reject) {\n        _this.find(params).then(function (response) {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Group not found'));\n          }\n        }).catch(function () {\n          return reject(new Error('Failed connecting to server'));\n        });\n      });\n    }\n\n    /**\n     * Search for groups with a search query and optional params\n     *\n     * @param {string} query\n     * @param {object} params\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'search',\n    value: function search(query, params) {\n      params = _lodash2.default.merge({ query: query }, params);\n\n      return this.find(params);\n    }\n\n    /**\n     * Save a new or existing group\n     *\n     * @param {object} group\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'save',\n    value: function save(group) {\n      if (_lodash2.default.has(group, '_id')) {\n        return this.$http.put(this.baseUrl + '/' + group._id, group);\n      } else {\n        return this.$http.post(this.baseUrl, group);\n      }\n    }\n\n    /**\n     * Check if a user is an admin of a group\n     *\n     * @param {object} group\n     * @param {object} user\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isAdmin',\n    value: function isAdmin(group, user) {\n      return _lodash2.default.has(group, 'admins') && _lodash2.default.has(user, '_id') && ~group.admins.indexOf(user._id);\n    }\n\n    /**\n     * Set the current group\n     *\n     * @param {object|null} group\n     */\n\n  }, {\n    key: 'current',\n    set: function set(group) {\n      currentGroup = group;\n\n      // If the current user is a member of this group, make it their active group\n      if (this.User.current && _lodash2.default.find(this.User.current.groups, ['id', group._id])) {\n        this.User.group = group;\n      }\n    }\n\n    /**\n     * Get the current group\n     *\n     * @returns {object|null}\n     */\n    ,\n    get: function get() {\n      return currentGroup;\n    }\n  }]);\n\n  return Group;\n}();\n\nexports.default = _angular2.default.module('app.services.Group', [_config2.default, _User2.default]).service('Group', Group).name;\n\n},{\"../config\":45,\"./User\":73,\"angular\":\"angular\",\"lodash\":\"lodash\"}],56:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AlertCtrl =\n/* @ngInject */\nfunction AlertCtrl($uibModalInstance, title, message) {\n  _classCallCheck(this, AlertCtrl);\n\n  _extends(this, { $uibModalInstance: $uibModalInstance, title: title, message: message });\n};\n\nexports.default = AlertCtrl;\n\n},{}],57:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\" ng-if=\"::$ctrl.title\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.close()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.title }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-bind-html=\"::$ctrl.message\"></div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.$uibModalInstance.close()\">\\n    OK\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],58:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CampaignEditCtrl = function () {\n  /* @ngInject */\n\n  function CampaignEditCtrl($uibModalInstance, Alertify, Campaign, Deed, Modal, action, group, campaign) {\n    _classCallCheck(this, CampaignEditCtrl);\n\n    _extends(this, { $uibModalInstance: $uibModalInstance, Alertify: Alertify, Campaign: Campaign, Deed: Deed, Modal: Modal, action: action, group: group });\n\n    this.error = null;\n    this.deeds = [];\n\n    this.loadDeeds();\n    if (!campaign) {\n      this.resetFields();\n    } else {\n      this.campaign = _lodash2.default.cloneDeep(campaign);\n    }\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n\n\n  _createClass(CampaignEditCtrl, [{\n    key: 'resetFields',\n    value: function resetFields() {\n      this.campaign = {\n        group: this.group._id,\n        deeds: []\n      };\n    }\n\n    /**\n     * Save the Campaign\n     *\n     * @param {object} campaign\n     */\n\n  }, {\n    key: 'save',\n    value: function save(campaign) {\n      var _this = this;\n\n      var toSave = _lodash2.default.cloneDeep(campaign);\n      _lodash2.default.forEach(toSave.deeds, function (item) {\n        return item.deed = item.deed._id;\n      });\n\n      this.saving = true;\n      this.error = null;\n      this.Campaign.save(toSave).then(function () {\n        _this.$uibModalInstance.close();\n        _this.Alertify.success(_lodash2.default.capitalize(_this.action) + 'd campaign');\n      }).catch(function (response) {\n        return _this.error = response.data.error;\n      }).then(function () {\n        return _this.saving = false;\n      });\n    }\n\n    /**\n     * Load all of the deeds\n     * Note: in the future we might not want to preload ALL deeds\n     */\n\n  }, {\n    key: 'loadDeeds',\n    value: function loadDeeds() {\n      var _this2 = this;\n\n      this.loading = true;\n      this.Deed.find({ fields: '_id,title' }).then(function (response) {\n        return _this2.deeds = _lodash2.default.differenceBy(_lodash2.default.map(response.data, function (deed) {\n          return { deed: deed };\n        }), _this2.campaign.deeds, 'deed._id');\n      }).catch(function (response) {\n        return _this2.error = response.data.error;\n      }).then(function () {\n        return _this2.loading = false;\n      });\n    }\n  }]);\n\n  return CampaignEditCtrl;\n}();\n\nexports.default = CampaignEditCtrl;\n\n},{\"lodash\":\"lodash\"}],59:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.action | capitalize }} Campaign for {{ ::$ctrl.group.name }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\" ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or\\n    <a href=\"mailto:support@loveisourweapon.com\">contact us</a> about it.\\n  </uib-alert>\\n\\n  <div class=\"col-xs-12\">\\n    <p>\\n      Create a campaign by dragging deeds from the \\'Available Deeds\\' list into the \\'Your Campaign\\' list.\\n      You can also re-order deeds within your campaign.\\n    </p>\\n    <p>\\n      We recommend choosing 1 deed for each week of the campaign,\\n      so choosing 6 deeds would work best for a 6 week campaign.\\n      In our experience with youth groups, a 4-6 week campaign works best\\n      to keep up interest and engagement with the campaign.\\n    </p>\\n  </div>\\n\\n  <form name=\"campaignEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.save($ctrl.campaign)\">\\n    <span ng-init=\"$ctrl.form = campaignEdit\"></span>\\n\\n    <div class=\"form-group\">\\n      <div class=\"col-xs-6\">\\n        <h5>Available Deeds</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"item in $ctrl.deeds track by item.deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(item.deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ item.deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n\\n      <div class=\"col-xs-6\">\\n        <h5>Your Campaign</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.campaign.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"item in $ctrl.campaign.deeds track by item.deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(item.deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ item.deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.campaign)\"\\n          ng-disabled=\"$ctrl.loading || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ ::$ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],60:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ConfirmCtrl =\n/* @ngInject */\nfunction ConfirmCtrl($uibModalInstance, title, message) {\n  _classCallCheck(this, ConfirmCtrl);\n\n  _extends(this, { $uibModalInstance: $uibModalInstance, title: title, message: message });\n};\n\nexports.default = ConfirmCtrl;\n\n},{}],61:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\" ng-if=\"::$ctrl.title\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.title }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-bind-html=\"::$ctrl.message\"></div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.$uibModalInstance.close()\">\\n    OK\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],62:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DeedPreviewCtrl = function () {\n  /* @ngInject */\n\n  function DeedPreviewCtrl($uibModalInstance, Deed, deedId) {\n    _classCallCheck(this, DeedPreviewCtrl);\n\n    _extends(this, { $uibModalInstance: $uibModalInstance, Deed: Deed });\n\n    this.error = null;\n\n    this.loadDeed(deedId);\n  }\n\n  /**\n   * Load the deed by ID\n   *\n   * @param {string} deedId\n   */\n\n\n  _createClass(DeedPreviewCtrl, [{\n    key: 'loadDeed',\n    value: function loadDeed(deedId) {\n      var _this = this;\n\n      this.loading = true;\n      this.Deed.get(deedId).then(function (response) {\n        return _this.deed = response.data;\n      }).catch(function (response) {\n        return _this.error = 'Deed not found';\n      }).then(function () {\n        return _this.loading = false;\n      });\n    }\n  }]);\n\n  return DeedPreviewCtrl;\n}();\n\nexports.default = DeedPreviewCtrl;\n\n},{}],63:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Preview Deed\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-hide=\"$ctrl.loading || $ctrl.error\">\\n    <div class=\"embed-responsive embed-responsive-16by9\"\\n         ng-show=\"$ctrl.deed.videoUrl\">\\n      <youtube-video video-url=\"$ctrl.deed.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"deed-header m-b-md\">\\n      <img src=\"/images/deed.png\" class=\"img-responsive img-circle pull-left m-t-xxs m-r-sm\">\\n      <h1 class=\"m-none\">\\n        {{ $ctrl.deed.title }}\\n      </h1>\\n      <p class=\"m-none\">\\n        <span class=\\'f-lg\\'>12,001</span> acts of love\\n      </p>\\n    </div>\\n\\n    <div marked=\"$ctrl.deed.content\"></div>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n    <p class=\"text-center\">\\n      <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n    </p>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n    <uib-alert type=\"danger\">\\n      <i class=\"fa fa-exclamation-triangle\"></i>\\n      {{ $ctrl.error }}\\n    </uib-alert>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Close\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],64:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ForgotPasswordCtrl = function () {\n  /* @ngInject */\n\n  function ForgotPasswordCtrl($uibModalInstance, $timeout, Alertify, User, email) {\n    var _this = this;\n\n    _classCallCheck(this, ForgotPasswordCtrl);\n\n    _extends(this, { $uibModalInstance: $uibModalInstance, Alertify: Alertify, User: User, email: email });\n\n    // If email passed in, set the form field $dirty\n    $timeout(function () {\n      return _this.email && _this.form.email.$setDirty();\n    });\n  }\n\n  /**\n   * Send email password recovery link\n   *\n   * @param {string} email\n   */\n\n\n  _createClass(ForgotPasswordCtrl, [{\n    key: 'send',\n    value: function send(email) {\n      var _this2 = this;\n\n      this.sending = true;\n      this.User.sendForgotPassword(email).then(function () {\n        _this2.$uibModalInstance.close();\n        _this2.Alertify.success('Sent password recovery email to <strong>' + email + '</strong>');\n      }).catch(function () {\n        return _this2.Alertify.error('Failed sending password recovery email');\n      }).then(function () {\n        return _this2.sending = false;\n      });\n    }\n  }]);\n\n  return ForgotPasswordCtrl;\n}();\n\nexports.default = ForgotPasswordCtrl;\n\n},{}],65:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Forgot your password?\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <form name=\"forgotPassword\"\\n        ng-submit=\"$ctrl.form.$valid && $ctrl.send($ctrl.email)\"\\n        novalidate>\\n    <span ng-init=\"$ctrl.form = forgotPassword\"></span>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.email.$invalid }\">\\n      <label for=\"email\"\\n             class=\"control-label\">\\n        Your email address\\n      </label>\\n      <input type=\"email\"\\n             class=\"form-control\"\\n             id=\"email\"\\n             name=\"email\"\\n             placeholder=\"Email address...\"\\n             ng-model=\"$ctrl.email\"\\n             required\\n             autofocus>\\n      <span class=\"help-block\"\\n            ng-show=\"$ctrl.form.$submitted && $ctrl.form.email.$error.email\">\\n        Please enter a valid email address.\\n      </span>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary btn-block\"\\n            ng-disabled=\"$ctrl.form.$pristine || $ctrl.sending\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.sending\"></i>\\n      Email me a recovery link\\n    </button>\\n  </form>\\n</div><!-- .modal-body -->\\n';\n},{}],66:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _toMarkdown = require('to-markdown');\n\nvar _toMarkdown2 = _interopRequireDefault(_toMarkdown);\n\nvar _showdown = require('showdown');\n\nvar _showdown2 = _interopRequireDefault(_showdown);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar converter = new _showdown2.default.Converter();\n\nvar GroupEditCtrl = function () {\n  /* @ngInject */\n\n  function GroupEditCtrl($uibModalInstance, $scope, $timeout, $location, Alertify, User, Group, Modal, action, group, users) {\n    _classCallCheck(this, GroupEditCtrl);\n\n    _extends(this, { $uibModalInstance: $uibModalInstance, $scope: $scope, $timeout: $timeout, $location: $location, Alertify: Alertify, User: User, Group: Group, Modal: Modal, action: action, group: group, users: users });\n\n    this.error = null;\n    this.setupCampaign = this.group ? false : true;\n\n    if (this.group) {\n      this.group.welcomeMessage = converter.makeHtml(this.group.welcomeMessage);\n    } else if (this.User.current) {\n      this.resetFields();\n    }\n  }\n\n  /**\n   * All elements compiled and linked\n   */\n\n\n  _createClass(GroupEditCtrl, [{\n    key: '$postLink',\n    value: function $postLink() {\n      if (this.User.current) {\n        this.setupMediumEditor();\n      }\n    }\n\n    /**\n     * Scope is being destroyed\n     */\n\n  }, {\n    key: '$onDestroy',\n    value: function $onDestroy() {\n      this.editor.destroy();\n    }\n\n    /**\n     * Reset all form fields to defaults\n     */\n\n  }, {\n    key: 'resetFields',\n    value: function resetFields() {\n      this.users = [this.User.current];\n\n      this.group = {\n        name: '',\n        logo: undefined,\n        coverImage: undefined,\n        admins: [this.User.current._id],\n        welcomeMessage: ''\n      };\n    }\n\n    /**\n     * Initialise the MediumEditor element, respond to input changes\n     *\n     * TODO: move MediumEditor setup and config to a component\n     */\n\n  }, {\n    key: 'setupMediumEditor',\n    value: function setupMediumEditor() {\n      var _this = this;\n\n      this.$timeout(function () {\n        _this.editor = new MediumEditor(document.querySelectorAll('#welcomeMessage'), {\n          placeholder: { text: 'Enter a welcome message...', hideOnClick: false },\n          toolbar: { buttons: ['bold', 'italic', 'underline', 'anchor', 'orderedlist', 'unorderedlist'] },\n          autoLink: true\n        });\n\n        _this.editor.subscribe('editableInput', function (event, editable) {\n          _this.$scope.$apply(function () {\n            _this.group.welcomeMessage = (0, _toMarkdown2.default)(editable.innerHTML, {\n              converters: [{\n                // Remove spans and divs\n                filter: function filter(node) {\n                  return node.nodeName === 'SPAN' || node.nodeName === 'DIV';\n                },\n                replacement: function replacement(content) {\n                  return content;\n                }\n              }]\n            });\n          });\n        });\n      });\n    }\n\n    /**\n     * Prompt user to login, then reset the form fields and setup the MediumEditor\n     *\n     * @param {string} type\n     */\n\n  }, {\n    key: 'openModal',\n    value: function openModal(type) {\n      var _this2 = this;\n\n      this.Modal[type === 'login' ? 'openLogin' : 'openSignup'](false).then(function () {\n        return _this2.User.loadCurrent();\n      }).then(function () {\n        return _this2.resetFields();\n      }).then(function () {\n        return _this2.setupMediumEditor();\n      }).catch(function () {\n        return null;\n      });\n    }\n\n    /**\n     * Save the Group\n     *\n     * @param {object} group\n     */\n\n  }, {\n    key: 'save',\n    value: function save(group) {\n      var _this3 = this;\n\n      this.saving = true;\n      this.error = null;\n      this.Group.save(group).then(function (response) {\n        _this3.Group.current = response.data;\n        _this3.User.loadCurrent();\n\n        _this3.$location.path('/g/' + response.data.urlName);\n        _this3.$uibModalInstance.close();\n        _this3.Alertify.success(_lodash2.default.capitalize(_this3.action) + 'd group <strong>' + _this3.Group.current.name + '</strong>');\n\n        if (_this3.setupCampaign) {\n          _this3.$location.search('setupCampaign', true);\n        }\n      }).catch(function (response) {\n        return _this3.error = response.data.error;\n      }).then(function () {\n        return _this3.saving = false;\n      });\n    }\n  }]);\n\n  return GroupEditCtrl;\n}();\n\nexports.default = GroupEditCtrl;\n\n},{\"lodash\":\"lodash\",\"showdown\":\"showdown\",\"to-markdown\":78}],67:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.action | capitalize }} Group\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\"\\n             ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or\\n    <a href=\"mailto:support@loveisourweapon.com\">contact us</a> about it.\\n  </uib-alert>\\n\\n  <form name=\"groupEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.form.$valid && $ctrl.save($ctrl.group)\"\\n        ng-if=\"$ctrl.User.isAuthenticated()\"\\n        novalidate>\\n    <span ng-init=\"$ctrl.form = groupEdit\"></span>\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.name || $ctrl.error.errors.urlName }\">\\n      <label for=\"name\"\\n             class=\"col-xs-3 control-label\">\\n        Name\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"name\"\\n               name=\"name\"\\n               placeholder=\"Group name...\"\\n               ng-model=\"$ctrl.group.name\"\\n               required\\n               autofocus>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.name || $ctrl.error.errors.urlName\">\\n          https://loveisourweapon.com/g/{{ ($ctrl.group.name | kebabCase) || \\'...\\' }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.name\"\\n              ng-repeat=\"error in $ctrl.error.errors.name\">\\n          {{ error.message }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.urlName\"\\n              ng-repeat=\"error in $ctrl.error.errors.urlName\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.logo }\">\\n      <label for=\"logo\"\\n             class=\"col-xs-3 control-label\">\\n        Logo\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"logo\"\\n               name=\"logo\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.logo\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.logo\">\\n          Ideally 500px x 500px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.logo\"\\n              ng-repeat=\"error in $ctrl.error.errors.logo\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.coverImage }\">\\n      <label for=\"coverImage\"\\n             class=\"col-xs-3 control-label\">\\n        Cover Image\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"coverImage\"\\n               name=\"coverImage\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.coverImage\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.coverImage\">\\n          Ideally 1280px x 580px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.coverImage\"\\n              ng-repeat=\"error in $ctrl.error.errors.coverImage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.admins }\">\\n      <label for=\"logo\"\\n             class=\"col-xs-3 control-label\">\\n        Admins\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <ui-select multiple\\n                   id=\"admins\"\\n                   name=\"admins\"\\n                   ng-model=\"$ctrl.group.admins\"\\n                   ng-disabled=\"!$ctrl.group._id\">\\n          <ui-select-match placeholder=\"Select admins...\"\\n                           ui-lock-choice=\"$item._id === $ctrl.User.current._id || $item._id === $ctrl.group.owner\">\\n            <img ng-src=\"{{ $item.picture || $ctrl.User.getDefaultUserImage($item._id) }}\"\\n                 class=\"img-circle b-xs m-xxs\"\\n                 style=\"width: 22px;\">\\n            {{ $item.name }}\\n          </ui-select-match>\\n          <ui-select-choices repeat=\"user._id as user in $ctrl.users | filter: { name: $select.search }\">\\n            <div class=\"clearfix\">\\n              <img ng-src=\"{{ user.picture || $ctrl.User.getDefaultUserImage(user._id) }}\"\\n                   class=\"img-circle pull-left b-xs m-r-xs\"\\n                   style=\"width: 22px;\">\\n              <div ng-bind-html=\"user.name | highlight: $select.search\"></div>\\n            </div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.welcomeMessage }\">\\n      <label for=\"welcomeMessage\"\\n             class=\"col-xs-3 control-label\">\\n        Intro Message\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <div class=\"well well-sm medium-editor m-none\">\\n          <textarea id=\"welcomeMessage\"\\n                    ng-model=\"$ctrl.group.welcomeMessage\"></textarea>\\n        </div>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.welcomeMessage\">\\n          Select text to add links, bold, italics, etc.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.welcomeMessage\"\\n              ng-repeat=\"error in $ctrl.error.errors.welcomeMessage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <hr ng-hide=\"$ctrl.group._id\">\\n\\n    <div class=\"form-group\"\\n         ng-hide=\"$ctrl.group._id\">\\n      <div class=\"col-xs-9 col-xs-push-3\">\\n        <p>\\n          <switch id=\"setupCampaign\"\\n                  name=\"setupCampaign\"\\n                  ng-model=\"$ctrl.setupCampaign\"\\n                  class=\"m-r-xs\"></switch>\\n          <span ng-click=\"$ctrl.setupCampaign = !$ctrl.setupCampaign\">\\n            Setup your first campaign now?\\n          </span>\\n        </p>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n\\n  <div class=\"container-fluid\"\\n       ng-if=\"!$ctrl.User.isAuthenticated()\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <p>Please sign up or login to setup a new group</p>\\n        <p>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.openModal(\\'signup\\')\">\\n            Sign up\\n          </button>\\n          &nbsp;&nbsp; or &nbsp;&nbsp;\\n          <button type=\"button\"\\n                  class=\"btn btn-default\"\\n                  ng-click=\"$ctrl.openModal(\\'login\\')\">\\n            Login\\n          </button>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.group)\"\\n          ng-disabled=\"!$ctrl.User.isAuthenticated() || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ ::$ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],68:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n// Not browserified\n\n\n// Modal controllers & templates\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _angularRoute = require('angular-route');\n\nvar _angularRoute2 = _interopRequireDefault(_angularRoute);\n\nvar _angularSanitize = require('angular-sanitize');\n\nvar _angularSanitize2 = _interopRequireDefault(_angularSanitize);\n\nvar _angularDragula = require('angular-dragula');\n\nvar _angularDragula2 = _interopRequireDefault(_angularDragula);\n\nvar _angularUiBootstrap = require('angular-ui-bootstrap');\n\nvar _angularUiBootstrap2 = _interopRequireDefault(_angularUiBootstrap);\n\nvar _uiSelect = require('ui-select');\n\nvar _uiSelect2 = _interopRequireDefault(_uiSelect);\n\nvar _angularMarked = require('angular-marked');\n\nvar _angularMarked2 = _interopRequireDefault(_angularMarked);\n\nvar _angularYoutubeEmbed = require('angular-youtube-embed');\n\nvar _angularYoutubeEmbed2 = _interopRequireDefault(_angularYoutubeEmbed);\n\nrequire('angular-ui-switch');\n\nvar _lodash3 = require('../../filters/lodash');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _directives = require('../../directives');\n\nvar _directives2 = _interopRequireDefault(_directives);\n\nvar _Alertify = require('../../services/Alertify');\n\nvar _Alertify2 = _interopRequireDefault(_Alertify);\n\nvar _User = require('../../services/User');\n\nvar _User2 = _interopRequireDefault(_User);\n\nvar _Group = require('../../services/Group');\n\nvar _Group2 = _interopRequireDefault(_Group);\n\nvar _Campaign = require('../../services/Campaign');\n\nvar _Campaign2 = _interopRequireDefault(_Campaign);\n\nvar _Deed = require('../../services/Deed');\n\nvar _Deed2 = _interopRequireDefault(_Deed);\n\nvar _LoginCtrl = require('./login/LoginCtrl');\n\nvar _LoginCtrl2 = _interopRequireDefault(_LoginCtrl);\n\nvar _login = require('./login/login.html');\n\nvar _login2 = _interopRequireDefault(_login);\n\nvar _SignupCtrl = require('./signup/SignupCtrl');\n\nvar _SignupCtrl2 = _interopRequireDefault(_SignupCtrl);\n\nvar _signup = require('./signup/signup.html');\n\nvar _signup2 = _interopRequireDefault(_signup);\n\nvar _ForgotPasswordCtrl = require('./forgot-password/ForgotPasswordCtrl');\n\nvar _ForgotPasswordCtrl2 = _interopRequireDefault(_ForgotPasswordCtrl);\n\nvar _forgotPassword = require('./forgot-password/forgotPassword.html');\n\nvar _forgotPassword2 = _interopRequireDefault(_forgotPassword);\n\nvar _GroupEditCtrl = require('./group-edit/GroupEditCtrl');\n\nvar _GroupEditCtrl2 = _interopRequireDefault(_GroupEditCtrl);\n\nvar _groupEdit = require('./group-edit/groupEdit.html');\n\nvar _groupEdit2 = _interopRequireDefault(_groupEdit);\n\nvar _CampaignEditCtrl = require('./campaign-edit/CampaignEditCtrl');\n\nvar _CampaignEditCtrl2 = _interopRequireDefault(_CampaignEditCtrl);\n\nvar _campaignEdit = require('./campaign-edit/campaignEdit.html');\n\nvar _campaignEdit2 = _interopRequireDefault(_campaignEdit);\n\nvar _DeedPreviewCtrl = require('./deed-preview/DeedPreviewCtrl');\n\nvar _DeedPreviewCtrl2 = _interopRequireDefault(_DeedPreviewCtrl);\n\nvar _deedPreview = require('./deed-preview/deedPreview.html');\n\nvar _deedPreview2 = _interopRequireDefault(_deedPreview);\n\nvar _AlertCtrl = require('./alert/AlertCtrl');\n\nvar _AlertCtrl2 = _interopRequireDefault(_AlertCtrl);\n\nvar _alert = require('./alert/alert.html');\n\nvar _alert2 = _interopRequireDefault(_alert);\n\nvar _ConfirmCtrl = require('./confirm/ConfirmCtrl');\n\nvar _ConfirmCtrl2 = _interopRequireDefault(_ConfirmCtrl);\n\nvar _confirm = require('./confirm/confirm.html');\n\nvar _confirm2 = _interopRequireDefault(_confirm);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Modal = function () {\n  /* @ngInject */\n\n  function Modal($uibModal, $q, User) {\n    _classCallCheck(this, Modal);\n\n    _extends(this, { $uibModal: $uibModal, $q: $q, User: User });\n\n    this.defaults = {\n      controllerAs: '$ctrl',\n      size: 'md'\n    };\n  }\n\n  /**\n   * Open the login modal\n   *\n   * @param {boolean} [canSwitch=true]\n   *\n   * @returns {Promise}\n   */\n\n\n  _createClass(Modal, [{\n    key: 'openLogin',\n    value: function openLogin() {\n      var canSwitch = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _LoginCtrl2.default,\n        template: _login2.default,\n        size: 'sm',\n        resolve: {\n          canSwitch: this.$q.resolve(canSwitch)\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open the sign up modal\n     *\n     * @param {boolean} [canSwitch=true]\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openSignup',\n    value: function openSignup() {\n      var canSwitch = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _SignupCtrl2.default,\n        template: _signup2.default,\n        resolve: {\n          canSwitch: this.$q.resolve(canSwitch)\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open the forgot password modal\n     *\n     * @param {string|null} [email=null]\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openForgotPassword',\n    value: function openForgotPassword() {\n      var email = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _ForgotPasswordCtrl2.default,\n        template: _forgotPassword2.default,\n        size: 'sm',\n        resolve: {\n          email: this.$q.resolve(email)\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open the group edit modal\n     *\n     * @param {string} [action='create']\n     * @param {object} [group=null]\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openGroupEdit',\n    value: function openGroupEdit() {\n      var action = arguments.length <= 0 || arguments[0] === undefined ? 'create' : arguments[0];\n      var group = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _GroupEditCtrl2.default,\n        template: _groupEdit2.default,\n        resolve: {\n          action: this.$q.resolve(action),\n          group: this.$q.resolve(_angular2.default.copy(group)),\n          users: group ? this.User.find({ groups: group._id }).then(function (response) {\n            return response.data;\n          }) : null\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open the campaign edit modal\n     *\n     * @param {string} [action='create']\n     * @param {object} group\n     * @param {object} [campaign=null]\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openCampaignEdit',\n    value: function openCampaignEdit() {\n      var action = arguments.length <= 0 || arguments[0] === undefined ? 'create' : arguments[0];\n      var group = arguments[1];\n      var campaign = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _CampaignEditCtrl2.default,\n        template: _campaignEdit2.default,\n        resolve: {\n          action: this.$q.resolve(action),\n          group: this.$q.resolve(_angular2.default.copy(group)),\n          campaign: this.$q.resolve(_angular2.default.copy(campaign))\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open the deed preview modal\n     *\n     * @param {string} deedId\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openDeedPreview',\n    value: function openDeedPreview(deedId) {\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _DeedPreviewCtrl2.default,\n        template: _deedPreview2.default,\n        resolve: {\n          deedId: this.$q.resolve(deedId)\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open an alert modal\n     *\n     * @param {string} message\n     * @param {string} [title='']\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openAlert',\n    value: function openAlert(message) {\n      var title = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _AlertCtrl2.default,\n        template: _alert2.default,\n        size: 'sm',\n        resolve: {\n          message: this.$q.resolve(message),\n          title: this.$q.resolve(title)\n        }\n      }, this.defaults)).result;\n    }\n\n    /**\n     * Open a confirm modal\n     *\n     * @param {string} message\n     * @param {string} [title='']\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'openConfirm',\n    value: function openConfirm(message) {\n      var title = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n      return this.$uibModal.open(_lodash2.default.defaults({\n        controller: _ConfirmCtrl2.default,\n        template: _confirm2.default,\n        size: 'sm',\n        resolve: {\n          message: this.$q.resolve(message),\n          title: this.$q.resolve(title)\n        }\n      }, this.defaults)).result;\n    }\n  }]);\n\n  return Modal;\n}();\n\nexports.default = _angular2.default.module('app.services.Modal', [_angularRoute2.default, _angularSanitize2.default, (0, _angularDragula2.default)(_angular2.default), _angularUiBootstrap2.default, _uiSelect2.default, _angularMarked2.default, _angularYoutubeEmbed2.default, 'uiSwitch', _lodash4.default, _directives2.default, _Alertify2.default, _User2.default, _Group2.default, _Campaign2.default, _Deed2.default]).service('Modal', Modal).name;\n\n// Fixes to UI Bootstrap Modal\n\n_angular2.default.module(_angularUiBootstrap2.default).directive('uibModalWindow', /* @ngInject */function ($window) {\n  return {\n    priority: 1,\n    link: function link(scope, element) {\n      // Set max-height on modal-body\n      var window = _angular2.default.element($window);\n      window.on('resize', setMaxHeight);\n      scope.$on('$destroy', function () {\n        return window.off('resize', setMaxHeight);\n      });\n      setMaxHeight();\n\n      function setMaxHeight() {\n        element.find('.modal-body').css({\n          maxHeight: window.height() * 0.85 - 80,\n          overflowY: 'auto'\n        });\n      }\n    }\n  };\n});\n\n},{\"../../directives\":46,\"../../filters/lodash\":47,\"../../services/Alertify\":50,\"../../services/Campaign\":51,\"../../services/Deed\":53,\"../../services/Group\":55,\"../../services/User\":73,\"./alert/AlertCtrl\":56,\"./alert/alert.html\":57,\"./campaign-edit/CampaignEditCtrl\":58,\"./campaign-edit/campaignEdit.html\":59,\"./confirm/ConfirmCtrl\":60,\"./confirm/confirm.html\":61,\"./deed-preview/DeedPreviewCtrl\":62,\"./deed-preview/deedPreview.html\":63,\"./forgot-password/ForgotPasswordCtrl\":64,\"./forgot-password/forgotPassword.html\":65,\"./group-edit/GroupEditCtrl\":66,\"./group-edit/groupEdit.html\":67,\"./login/LoginCtrl\":69,\"./login/login.html\":70,\"./signup/SignupCtrl\":71,\"./signup/signup.html\":72,\"angular\":\"angular\",\"angular-dragula\":\"angular-dragula\",\"angular-marked\":\"angular-marked\",\"angular-route\":\"angular-route\",\"angular-sanitize\":\"angular-sanitize\",\"angular-ui-bootstrap\":\"angular-ui-bootstrap\",\"angular-ui-switch\":\"angular-ui-switch\",\"angular-youtube-embed\":\"angular-youtube-embed\",\"lodash\":\"lodash\",\"ui-select\":\"ui-select\"}],69:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LoginCtrl = function () {\n  /* @ngInject */\n\n  function LoginCtrl($uibModalInstance, $routeParams, Alertify, User, Group, Modal, canSwitch) {\n    _classCallCheck(this, LoginCtrl);\n\n    _extends(this, { $uibModalInstance: $uibModalInstance, Alertify: Alertify, User: User, Group: Group, Modal: Modal, canSwitch: canSwitch });\n\n    this.error = null;\n    this.joinGroup = null;\n    if (_lodash2.default.has($routeParams, 'group')) {\n      this.joinGroup = true;\n    }\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {boolean|null} joinGroup\n   */\n\n\n  _createClass(LoginCtrl, [{\n    key: 'authenticateFacebook',\n    value: function authenticateFacebook(joinGroup) {\n      var _this = this;\n\n      var userData = {};\n      if (joinGroup) {\n        userData.group = this.Group.current._id;\n      }\n\n      this.loggingIn = true;\n      this.User.authenticateFacebook(userData).then(function () {\n        if (joinGroup) {\n          _this.User.group = _this.Group.current;\n        }\n\n        _this.$uibModalInstance.close();\n        _this.Alertify.success('Signed in');\n      }).catch(function () {\n        return _this.Alertify.error('Failed signing in');\n      }).then(function () {\n        return _this.loggingIn = false;\n      });\n    }\n\n    /**\n     * Authenticate user with email and password\n     *\n     * @param {string}       email\n     * @param {string}       password\n     * @param {boolean|null} joinGroup\n     */\n\n  }, {\n    key: 'authenticateEmail',\n    value: function authenticateEmail(email, password, joinGroup) {\n      var _this2 = this;\n\n      this.loggingIn = true;\n      this.User.authenticateEmail(email, password, joinGroup ? this.Group.current : null).then(function (response) {\n        if (joinGroup) {\n          _this2.User.group = _this2.Group.current;\n        }\n\n        _this2.$uibModalInstance.close();\n        _this2.Alertify.success('Signed in' + (!response.data.confirmed ? '. Please confirm your email address' : ''));\n      }).catch(function (response) {\n        return _this2.error = response.data.message;\n      }).then(function () {\n        return _this2.loggingIn = false;\n      });\n    }\n\n    /**\n     * Send confirm email address email\n     */\n\n  }, {\n    key: 'sendConfirmEmail',\n    value: function sendConfirmEmail(email) {\n      var _this3 = this;\n\n      this.sending = true;\n      this.User.sendConfirmEmail(email).then(function () {\n        return _this3.Alertify.success('Sent confirmation email to <strong>' + email + '</strong>');\n      }).catch(function () {\n        return _this3.Alertify.error('Failed sending confirmation email');\n      }).then(function () {\n        return _this3.sending = false;\n      });\n    }\n  }]);\n\n  return LoginCtrl;\n}();\n\nexports.default = LoginCtrl;\n\n},{\"lodash\":\"lodash\"}],70:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Login\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div ng-if=\"$ctrl.joinGroup !== null\">\\n    <p>\\n      <switch id=\"joinGroup\"\\n              name=\"joinGroup\"\\n              ng-model=\"$ctrl.joinGroup\"\\n              class=\"m-r-xs\"></switch>\\n      Join {{ ::$ctrl.Group.current.name }}\\n    </p>\\n    <hr>\\n  </div>\\n\\n  <p>\\n    <button ng-click=\"$ctrl.authenticateFacebook($ctrl.joinGroup)\"\\n            class=\"btn btn-facebook btn-block\"\\n            ng-disabled=\"$ctrl.loggingIn\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.loggingIn\"></i>\\n      <i class=\"fa fa-fw fa-facebook-official\" ng-hide=\"$ctrl.loggingIn\"></i>\\n      Sign in with Facebook\\n    </button>\\n  </p>\\n\\n  <hr>\\n\\n  <form ng-submit=\"$ctrl.authenticateEmail($ctrl.email, $ctrl.password, $ctrl.joinGroup)\">\\n    <uib-alert type=\"danger\"\\n               class=\"p-sm\"\\n               ng-show=\"$ctrl.error\">\\n      <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n      {{ $ctrl.error }}\\n      <span ng-show=\"$ctrl.error.indexOf(\\'Please confirm\\') === 0\">\\n        <i class=\"fa fa-fw fa-blank\"></i>\\n        <a ng-click=\"$ctrl.sendConfirmEmail($ctrl.email)\" href>\\n          Re-send confirmation email?\\n          <i ng-show=\"$ctrl.sending\" class=\"fa fa-cog fa-spin\"></i>\\n        </a>\\n      </span>\\n    </uib-alert>\\n\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\">\\n          <i class=\"fa fa-fw fa-at\"></i>\\n        </div>\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"email\"\\n               name=\"email\"\\n               ng-model=\"$ctrl.email\"\\n               placeholder=\"Email\"\\n               autofocus>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\">\\n          <i class=\"fa fa-fw fa-key\"></i>\\n        </div>\\n        <input type=\"password\"\\n               class=\"form-control\"\\n               id=\"password\"\\n               name=\"password\"\\n               ng-model=\"$ctrl.password\"\\n               placeholder=\"Password\">\\n      </div>\\n      <span class=\"help-block\">\\n        <a ng-click=\"$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openForgotPassword($ctrl.email)\" href>\\n          Forgot your password?\\n        </a>\\n      </span>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary btn-block\"\\n            ng-disabled=\"!$ctrl.email || !$ctrl.password || $ctrl.loggingIn\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.loggingIn\"></i>\\n      Login\\n    </button>\\n  </form>\\n\\n  <div ng-show=\"::$ctrl.canSwitch\">\\n    <hr>\\n    <p>\\n      Don\\'t have an account yet?\\n      <a ng-click=\"$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openSignup()\" href>Sign up now</a>\\n    </p>\\n  </div>\\n</div><!-- .modal-body -->\\n';\n},{}],71:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SignupCtrl = function () {\n  /* @ngInject */\n\n  function SignupCtrl($uibModalInstance, $routeParams, Alertify, User, Group, Modal, canSwitch) {\n    _classCallCheck(this, SignupCtrl);\n\n    _extends(this, { $uibModalInstance: $uibModalInstance, Alertify: Alertify, User: User, Group: Group, Modal: Modal, canSwitch: canSwitch });\n\n    this.error = null;\n    this.joinGroup = null;\n    if (_.has($routeParams, 'group')) {\n      this.joinGroup = true;\n    }\n\n    this.resetFields();\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n\n\n  _createClass(SignupCtrl, [{\n    key: 'resetFields',\n    value: function resetFields() {\n      this.user = {\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: '',\n        picture: undefined\n      };\n    }\n\n    /**\n     * Authenticate user with Facebook\n     *\n     * @param {boolean|null} joinGroup\n     */\n\n  }, {\n    key: 'authenticateFacebook',\n    value: function authenticateFacebook(joinGroup) {\n      var _this = this;\n\n      var userData = {};\n      if (joinGroup) {\n        userData.group = this.Group.current._id;\n      }\n\n      this.saving = true;\n      this.User.authenticateFacebook(userData).then(function () {\n        if (joinGroup) {\n          _this.User.group = _this.Group.current;\n        }\n\n        _this.$uibModalInstance.close();\n        _this.Alertify.success('Signed in');\n      }).catch(function () {\n        return _this.Alertify.error('Failed signing in');\n      }).then(function () {\n        return _this.saving = false;\n      });\n    }\n\n    /**\n     * Save the User\n     *\n     * @param {object} user\n     * @param {boolean} joinGroup\n     */\n\n  }, {\n    key: 'save',\n    value: function save(user, joinGroup) {\n      var _this2 = this;\n\n      if (joinGroup) {\n        user.groups = [this.Group.current._id];\n      }\n\n      this.saving = true;\n      this.error = null;\n      this.User.save(user).then(function () {\n        if (joinGroup) {\n          _this2.User.group = _this2.Group.current;\n        }\n\n        _this2.Alertify.success('Signed up. Please confirm your email address');\n        return _this2.User.authenticateEmail(user.email, user.password);\n      }).then(function () {\n        return _this2.$uibModalInstance.close();\n      }).catch(function (response) {\n        return _this2.error = response.data.error;\n      }).then(function () {\n        return _this2.saving = false;\n      });\n    }\n  }]);\n\n  return SignupCtrl;\n}();\n\nexports.default = SignupCtrl;\n\n},{}],72:[function(require,module,exports){\nmodule.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Sign up\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div ng-if=\"$ctrl.joinGroup !== null\">\\n    <p>\\n      <switch id=\"joinGroup\"\\n              name=\"joinGroup\"\\n              ng-model=\"$ctrl.joinGroup\"\\n              class=\"m-r-xs\"></switch>\\n      Join {{ ::$ctrl.Group.current.name }}\\n    </p>\\n    <hr>\\n  </div>\\n\\n  <p>\\n    <button ng-click=\"$ctrl.authenticateFacebook($ctrl.joinGroup)\"\\n            class=\"btn btn-facebook btn-block\"\\n            ng-disabled=\"$ctrl.saving\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n      <i class=\"fa fa-fw fa-facebook-official\" ng-hide=\"$ctrl.saving\"></i>\\n      Sign up with Facebook\\n    </button>\\n  </p>\\n\\n  <hr>\\n\\n  <form name=\"userEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.form.$valid && $ctrl.save($ctrl.user, $ctrl.joinGroup)\"\\n        novalidate>\\n    <span ng-init=\"$ctrl.form = userEdit\"></span>\\n\\n    <uib-alert type=\"danger\"\\n               ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n      <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n      Failed sending request. Please try again or\\n      <a href=\"mailto:support@loveisourweapon.com\">contact us</a> about it.\\n    </uib-alert>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.email || ($ctrl.form.$submitted && $ctrl.form.email.$invalid) }\">\\n      <label for=\"email\"\\n             class=\"col-xs-3 control-label\">\\n        Email\\n      </label>\\n      <div class=\"col-xs-8\">\\n        <input type=\"email\"\\n               class=\"form-control\"\\n               id=\"email\"\\n               name=\"email\"\\n               placeholder=\"Email address...\"\\n               ng-model=\"$ctrl.user.email\"\\n               required\\n               autofocus>\\n        <span class=\"help-block\"\\n              ng-show=\"!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.email.$error.email\">\\n          Please enter a valid email address.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.email\"\\n              ng-repeat=\"error in $ctrl.error.errors.email\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n    ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.firstName.$invalid }\">\\n      <label for=\"firstName\"\\n             class=\"col-xs-3 control-label\">\\n        Name\\n      </label>\\n      <div class=\"col-xs-4\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"firstName\"\\n               name=\"firstName\"\\n               placeholder=\"First...\"\\n               ng-model=\"$ctrl.user.firstName\"\\n               required>\\n      </div>\\n      <div class=\"col-xs-4\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"lastName\"\\n               name=\"lastName\"\\n               placeholder=\"Last...\"\\n               ng-model=\"$ctrl.user.lastName\">\\n      </div>\\n      <span class=\"help-block col-xs-8 col-xs-push-3\"\\n            ng-show=\"$ctrl.form.$submitted && $ctrl.form.firstName.$error.required\">\\n        First name is required.\\n      </span>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.password || ($ctrl.form.$submitted && $ctrl.form.password.$invalid) }\">\\n      <label for=\"password\"\\n             class=\"col-xs-3 control-label\">\\n        Password\\n      </label>\\n      <div class=\"col-xs-8\">\\n        <input type=\"password\"\\n               class=\"form-control\"\\n               id=\"password\"\\n               name=\"password\"\\n               placeholder=\"Enter a password...\"\\n               ng-model=\"$ctrl.user.password\"\\n               required\\n               minlength=\"8\">\\n        <span class=\"help-block\"\\n              ng-show=\"!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.password.$error.required\">\\n          Password is required.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.password.$error.minlength\">\\n          Password must be at least 8 characters.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.password\"\\n              ng-repeat=\"error in $ctrl.error.errors.password\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.picture }\">\\n      <label for=\"picture\"\\n             class=\"col-xs-3 control-label\">\\n        Picture\\n      </label>\\n      <div class=\"col-xs-8\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"picture\"\\n               name=\"picture\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.user.picture\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.picture\">\\n          Ideally 200px x 200px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.picture\"\\n              ng-repeat=\"error in $ctrl.error.errors.picture\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary btn-block\"\\n            ng-disabled=\"$ctrl.form.$pristine || $ctrl.saving\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n      Sign up\\n    </button>\\n  </form>\\n\\n  <div ng-show=\"::$ctrl.canSwitch\">\\n    <hr>\\n    <p>\\n      Already have an account?\\n      <a ng-click=\"$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openLogin()\" href>Login now</a>\\n    </p>\\n  </div>\\n</div><!-- .modal-body -->\\n';\n},{}],73:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n// Module dependencies\n\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _uuid = require('uuid');\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _seedrandom = require('seedrandom');\n\nvar _seedrandom2 = _interopRequireDefault(_seedrandom);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _satellizer = require('satellizer');\n\nvar _satellizer2 = _interopRequireDefault(_satellizer);\n\nvar _Alertify = require('./Alertify');\n\nvar _Alertify2 = _interopRequireDefault(_Alertify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NUM_IMAGES = 12;\nvar defaultImagesDict = {};\n\nvar currentUser = null;\nvar currentGroup = null;\nvar listeners = {};\n\nvar User = function () {\n  /* @ngInject */\n\n  function User($auth, $http, $q, config, Alertify) {\n    _classCallCheck(this, User);\n\n    _extends(this, { $auth: $auth, $http: $http, $q: $q, Alertify: Alertify });\n\n    this.baseUrl = config.serverUrl + '/users';\n    this.authUrl = config.serverUrl + '/auth';\n\n    this.loadCurrent().catch(function () {\n      return null;\n    });\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {object} [userData={}]\n   *\n   * @returns {Promise}\n   */\n\n\n  _createClass(User, [{\n    key: 'authenticateFacebook',\n    value: function authenticateFacebook() {\n      var _this = this;\n\n      var userData = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.$auth.authenticate('facebook', userData).then(function (response) {\n        _this.$auth.setToken(response.data.token);\n        return _this.loadCurrent();\n      });\n    }\n\n    /**\n     * Authenticate user with email and password\n     *\n     * @param {string} email\n     * @param {string} password\n     * @param {object} [group=null]\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'authenticateEmail',\n    value: function authenticateEmail(email, password) {\n      var _this2 = this;\n\n      var group = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n      if (!email || !password) {\n        return this.$q.reject({ data: { message: 'Email and/or password not provided' } });\n      }\n\n      var userData = { email: email, password: password };\n      if (_lodash2.default.has(group, '_id')) {\n        userData.group = group._id;\n      }\n\n      return this.$auth.login(userData).then(function (response) {\n        _this2.$auth.setToken(response.data.token);\n        return _this2.loadCurrent();\n      });\n    }\n\n    /**\n     * Logout the current user\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'logout',\n    value: function logout() {\n      var _this3 = this;\n\n      return this.$auth.logout().then(function () {\n        currentUser = null;\n        currentGroup = null;\n        _this3.pub('logout');\n        _this3.Alertify.success('Logged out');\n      });\n    }\n\n    /**\n     * Get the current user from the server\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'loadCurrent',\n    value: function loadCurrent() {\n      var _this4 = this;\n\n      if (!this.isAuthenticated()) {\n        return this.$q.reject('Not logged in');\n      }\n\n      return this.$http.get(this.baseUrl + '/me').then(function (response) {\n        currentUser = response.data;\n        _this4.pub('login', currentUser);\n\n        // Set the current group as the users first group\n        if (currentUser.groups.length) {\n          currentGroup = currentUser.groups[0];\n        }\n\n        return response;\n      });\n    }\n\n    /**\n     * Find users by params\n     *\n     * @param {object} [params={}]\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'find',\n    value: function find() {\n      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n      return this.$http.get(this.baseUrl, { params: params });\n    }\n\n    /**\n     * Find a single user by Id\n     *\n     * @param {string} userId\n     * @param {object} [params={}]\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'findById',\n    value: function findById(userId, params) {\n      return this.$http.get(this.baseUrl + '/' + userId, { params: params });\n    }\n\n    /**\n     * Save a new or existing user\n     *\n     * @param {object} user\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'save',\n    value: function save(user) {\n      if (_lodash2.default.has(user, '_id')) {\n        return this.$http.put(this.baseUrl + '/' + user._id, user);\n      } else {\n        return this.$http.post(this.baseUrl, user);\n      }\n    }\n\n    /**\n     * Update an existing user\n     *\n     * @param {object}   user\n     * @param {object[]} changes\n     *\n     * @returns {Promise}\n     */\n\n  }, {\n    key: 'update',\n    value: function update(user, changes) {\n      var _this5 = this;\n\n      return this.$http.patch(this.baseUrl + '/' + user._id, changes).then(function (response) {\n        return _this5.loadCurrent();\n      });\n    }\n\n    /**\n     * Check if there is a currently logged in user\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isAuthenticated',\n    value: function isAuthenticated() {\n      return this.$auth.isAuthenticated();\n    }\n\n    /**\n     * Check if the user is the currently logged in user\n     *\n     * @param {object} user\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isLoggedInUser',\n    value: function isLoggedInUser(user) {\n      return currentUser && currentUser._id === user._id;\n    }\n\n    /**\n     * Check if the current user is a member of a group\n     *\n     * @param {object} group\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'isMemberOfGroup',\n    value: function isMemberOfGroup(group) {\n      return _lodash2.default.has(currentUser, 'groups') && _lodash2.default.some(currentUser.groups, function (userGroup) {\n        return userGroup._id === (_lodash2.default.has(group, '_id') ? group._id : group);\n      });\n    }\n\n    /**\n     * Check if the current user has a common group\n     *\n     * @param {object[]} groups\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: 'hasCommonGroup',\n    value: function hasCommonGroup(groups) {\n      return _lodash2.default.some(groups, this.isMemberOfGroup);\n    }\n\n    /**\n     * Send forgot password email\n     *\n     * @param {string} email\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'sendForgotPassword',\n    value: function sendForgotPassword(email) {\n      return this.$http.get(this.authUrl + '/forgot', { params: { email: email } });\n    }\n\n    /**\n     * Reset user's password\n     *\n     * @param {string} password\n     * @param {string} token\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'resetPassword',\n    value: function resetPassword(password, token) {\n      return this.$http.post(this.authUrl + '/reset', { password: password, token: token });\n    }\n\n    /**\n     * Send confirm email address email\n     *\n     * @param {string} email\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'sendConfirmEmail',\n    value: function sendConfirmEmail(email) {\n      return this.$http.get(this.authUrl + '/confirm', { params: { email: email } });\n    }\n\n    /**\n     * Confirm email address with token\n     *\n     * @param {string} token\n     *\n     * @returns {HttpPromise}\n     */\n\n  }, {\n    key: 'confirmEmail',\n    value: function confirmEmail(token) {\n      return this.$http.post(this.authUrl + '/confirm', { token: token });\n    }\n\n    /**\n     * Get a default user image seeded by userId\n     *\n     * @param {string} userId\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: 'getDefaultUserImage',\n    value: function getDefaultUserImage(userId) {\n      if (!userId) {\n        return '/images/user0.png';\n      }\n\n      if (!_lodash2.default.has(defaultImagesDict, userId)) {\n        defaultImagesDict[userId] = Math.floor((0, _seedrandom2.default)(userId)() * NUM_IMAGES);\n      }\n\n      return '/images/user' + defaultImagesDict[userId] + '.png';\n    }\n\n    /**\n     * Subscribe to a User update\n     *\n     * @param {string}   key\n     * @param {function} callback\n     *\n     * @returns {function}\n     */\n\n  }, {\n    key: 'on',\n    value: function on(key, callback) {\n      var id = _uuid2.default.v4();\n      listeners[id] = { key: key, callback: callback };\n\n      return function () {\n        return delete listeners[id];\n      };\n    }\n\n    /**\n     * Publish a User update\n     *\n     * @param {string} key\n     * @param {*}      [data=null]\n     */\n\n  }, {\n    key: 'pub',\n    value: function pub(key) {\n      var data = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n      _lodash2.default.forOwn(listeners, function (listener) {\n        if (listener.key === key) {\n          listener.callback(data);\n        }\n      });\n    }\n\n    /**\n     * Get the current logged in user\n     *\n     * @returns {object|null}\n     */\n\n  }, {\n    key: 'current',\n    get: function get() {\n      return currentUser;\n    }\n\n    /**\n     * Set the current group of the logged in user\n     *\n     * @param {object|null} group\n     */\n\n  }, {\n    key: 'group',\n    set: function set(group) {\n      currentGroup = group;\n    }\n\n    /**\n     * Get the current group of the logged in user\n     *\n     * @returns {object|null}\n     */\n    ,\n    get: function get() {\n      return currentGroup;\n    }\n  }]);\n\n  return User;\n}();\n\nexports.default = _angular2.default.module('app.services.User', [_config2.default, _satellizer2.default, _Alertify2.default]).config( /* @ngInject */function ($authProvider, config) {\n  $authProvider.loginUrl = config.serverUrl + '/auth/login';\n  $authProvider.signupUrl = config.serverUrl + '/auth/signup';\n  $authProvider.facebook({\n    clientId: config.facebookClientId,\n    url: config.serverUrl + '/auth/facebook'\n  });\n}).service('User', User).name;\n\n},{\"../config\":45,\"./Alertify\":50,\"angular\":\"angular\",\"lodash\":\"lodash\",\"satellizer\":\"satellizer\",\"seedrandom\":\"seedrandom\",\"uuid\":83}],74:[function(require,module,exports){\n/**\n * This file automatically generated from `build.js`.\n * Do not manually edit.\n */\n\nmodule.exports = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"blockquote\",\n  \"canvas\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"main\",\n  \"nav\",\n  \"noscript\",\n  \"ol\",\n  \"output\",\n  \"p\",\n  \"pre\",\n  \"section\",\n  \"table\",\n  \"tfoot\",\n  \"ul\",\n  \"video\"\n];\n\n},{}],75:[function(require,module,exports){\n\n},{}],76:[function(require,module,exports){\n'use strict';\n\nvar voidElements = require('void-elements');\nObject.keys(voidElements).forEach(function (name) {\n  voidElements[name.toUpperCase()] = 1;\n});\n\nvar blockElements = {};\nrequire('block-elements').forEach(function (name) {\n  blockElements[name.toUpperCase()] = 1;\n});\n\n/**\n * isBlockElem(node) determines if the given node is a block element.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nfunction isBlockElem(node) {\n  return !!(node && blockElements[node.nodeName]);\n}\n\n/**\n * isVoid(node) determines if the given node is a void element.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nfunction isVoid(node) {\n  return !!(node && voidElements[node.nodeName]);\n}\n\n/**\n * whitespace(elem [, isBlock]) removes extraneous whitespace from an\n * the given element. The function isBlock may optionally be passed in\n * to determine whether or not an element is a block element; if none\n * is provided, defaults to using the list of block elements provided\n * by the `block-elements` module.\n *\n * @param {Node} elem\n * @param {Function} blockTest\n */\nfunction collapseWhitespace(elem, isBlock) {\n  if (!elem.firstChild || elem.nodeName === 'PRE') return;\n\n  if (typeof isBlock !== 'function') {\n    isBlock = isBlockElem;\n  }\n\n  var prevText = null;\n  var prevVoid = false;\n\n  var prev = null;\n  var node = next(prev, elem);\n\n  while (node !== elem) {\n    if (node.nodeType === 3) {\n      // Node.TEXT_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) && !prevVoid && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue;\n      }\n\n      node.data = text;\n      prevText = node;\n    } else if (node.nodeType === 1) {\n      // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        prevVoid = false;\n      } else if (isVoid(node)) {\n        // Avoid trimming space around non-block, non-BR void elements.\n        prevText = null;\n        prevVoid = true;\n      }\n    } else {\n      node = remove(node);\n      continue;\n    }\n\n    var nextNode = next(prev, node);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove(node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next;\n}\n\n/**\n * next(prev, current) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @return {Node}\n */\nfunction next(prev, current) {\n  if (prev && prev.parentNode === current || current.nodeName === 'PRE') {\n    return current.nextSibling || current.parentNode;\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode;\n}\n\nmodule.exports = collapseWhitespace;\n\n},{\"block-elements\":74,\"void-elements\":84}],77:[function(require,module,exports){\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * json-patch-duplex.js version: 0.5.7\n * (c) 2013 Joachim Wester\n * MIT license\n */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar OriginalError = Error;\nvar jsonpatch;\n(function (jsonpatch) {\n    var _objectKeys = function (obj) {\n        if (_isArray(obj)) {\n            var keys = new Array(obj.length);\n            for (var k = 0; k < keys.length; k++) {\n                keys[k] = \"\" + k;\n            }\n            return keys;\n        }\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var i in obj) {\n            if (obj.hasOwnProperty(i)) {\n                keys.push(i);\n            }\n        }\n        return keys;\n    };\n    function _equals(a, b) {\n        switch (typeof a) {\n            case 'undefined': //backward compatibility, but really I think we should return false\n            case 'boolean':\n            case 'string':\n            case 'number':\n                return a === b;\n            case 'object':\n                if (a === null)\n                    return b === null;\n                if (_isArray(a)) {\n                    if (!_isArray(b) || a.length !== b.length)\n                        return false;\n                    for (var i = 0, l = a.length; i < l; i++)\n                        if (!_equals(a[i], b[i]))\n                            return false;\n                    return true;\n                }\n                var bKeys = _objectKeys(b);\n                var bLength = bKeys.length;\n                if (_objectKeys(a).length !== bLength)\n                    return false;\n                for (var i = 0; i < bLength; i++)\n                    if (!_equals(a[i], b[i]))\n                        return false;\n                return true;\n            default:\n                return false;\n        }\n    }\n    /* We use a Javascript hash to store each\n     function. Each hash entry (property) uses\n     the operation identifiers specified in rfc6902.\n     In this way, we can map each patch operation\n     to its dedicated function in efficient way.\n     */\n    /* The operations applicable to an object */\n    var objOps = {\n        add: function (obj, key) {\n            obj[key] = this.value;\n            return true;\n        },\n        remove: function (obj, key) {\n            delete obj[key];\n            return true;\n        },\n        replace: function (obj, key) {\n            obj[key] = this.value;\n            return true;\n        },\n        move: function (obj, key, tree) {\n            var temp = { op: \"_get\", path: this.from };\n            apply(tree, [temp]);\n            apply(tree, [\n                { op: \"remove\", path: this.from }\n            ]);\n            apply(tree, [\n                { op: \"add\", path: this.path, value: temp.value }\n            ]);\n            return true;\n        },\n        copy: function (obj, key, tree) {\n            var temp = { op: \"_get\", path: this.from };\n            apply(tree, [temp]);\n            apply(tree, [\n                { op: \"add\", path: this.path, value: temp.value }\n            ]);\n            return true;\n        },\n        test: function (obj, key) {\n            return _equals(obj[key], this.value);\n        },\n        _get: function (obj, key) {\n            this.value = obj[key];\n        }\n    };\n    /* The operations applicable to an array. Many are the same as for the object */\n    var arrOps = {\n        add: function (arr, i) {\n            arr.splice(i, 0, this.value);\n            return true;\n        },\n        remove: function (arr, i) {\n            arr.splice(i, 1);\n            return true;\n        },\n        replace: function (arr, i) {\n            arr[i] = this.value;\n            return true;\n        },\n        move: objOps.move,\n        copy: objOps.copy,\n        test: objOps.test,\n        _get: objOps._get\n    };\n    /* The operations applicable to object root. Many are the same as for the object */\n    var rootOps = {\n        add: function (obj) {\n            rootOps.remove.call(this, obj);\n            for (var key in this.value) {\n                if (this.value.hasOwnProperty(key)) {\n                    obj[key] = this.value[key];\n                }\n            }\n            return true;\n        },\n        remove: function (obj) {\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    objOps.remove.call(this, obj, key);\n                }\n            }\n            return true;\n        },\n        replace: function (obj) {\n            apply(obj, [\n                { op: \"remove\", path: this.path }\n            ]);\n            apply(obj, [\n                { op: \"add\", path: this.path, value: this.value }\n            ]);\n            return true;\n        },\n        move: objOps.move,\n        copy: objOps.copy,\n        test: function (obj) {\n            return (JSON.stringify(obj) === JSON.stringify(this.value));\n        },\n        _get: function (obj) {\n            this.value = obj;\n        }\n    };\n    var observeOps = {\n        add: function (patches, path) {\n            var patch = {\n                op: \"add\",\n                path: path + escapePathComponent(this.name),\n                value: this.object[this.name] };\n            patches.push(patch);\n        },\n        'delete': function (patches, path) {\n            var patch = {\n                op: \"remove\",\n                path: path + escapePathComponent(this.name)\n            };\n            patches.push(patch);\n        },\n        update: function (patches, path) {\n            var patch = {\n                op: \"replace\",\n                path: path + escapePathComponent(this.name),\n                value: this.object[this.name]\n            };\n            patches.push(patch);\n        }\n    };\n    function escapePathComponent(str) {\n        if (str.indexOf('/') === -1 && str.indexOf('~') === -1)\n            return str;\n        return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n    }\n    function _getPathRecursive(root, obj) {\n        var found;\n        for (var key in root) {\n            if (root.hasOwnProperty(key)) {\n                if (root[key] === obj) {\n                    return escapePathComponent(key) + '/';\n                }\n                else if (typeof root[key] === 'object') {\n                    found = _getPathRecursive(root[key], obj);\n                    if (found != '') {\n                        return escapePathComponent(key) + '/' + found;\n                    }\n                }\n            }\n        }\n        return '';\n    }\n    function getPath(root, obj) {\n        if (root === obj) {\n            return '/';\n        }\n        var path = _getPathRecursive(root, obj);\n        if (path === '') {\n            throw new OriginalError(\"Object not found in root\");\n        }\n        return '/' + path;\n    }\n    var beforeDict = [];\n    var Mirror = (function () {\n        function Mirror(obj) {\n            this.observers = [];\n            this.obj = obj;\n        }\n        return Mirror;\n    })();\n    var ObserverInfo = (function () {\n        function ObserverInfo(callback, observer) {\n            this.callback = callback;\n            this.observer = observer;\n        }\n        return ObserverInfo;\n    })();\n    function getMirror(obj) {\n        for (var i = 0, ilen = beforeDict.length; i < ilen; i++) {\n            if (beforeDict[i].obj === obj) {\n                return beforeDict[i];\n            }\n        }\n    }\n    function getObserverFromMirror(mirror, callback) {\n        for (var j = 0, jlen = mirror.observers.length; j < jlen; j++) {\n            if (mirror.observers[j].callback === callback) {\n                return mirror.observers[j].observer;\n            }\n        }\n    }\n    function removeObserverFromMirror(mirror, observer) {\n        for (var j = 0, jlen = mirror.observers.length; j < jlen; j++) {\n            if (mirror.observers[j].observer === observer) {\n                mirror.observers.splice(j, 1);\n                return;\n            }\n        }\n    }\n    function unobserve(root, observer) {\n        observer.unobserve();\n    }\n    jsonpatch.unobserve = unobserve;\n    function deepClone(obj) {\n        if (typeof obj === \"object\") {\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        }\n        else {\n            return obj; //no need to clone primitives\n        }\n    }\n    function observe(obj, callback) {\n        var patches = [];\n        var root = obj;\n        var observer;\n        var mirror = getMirror(obj);\n        if (!mirror) {\n            mirror = new Mirror(obj);\n            beforeDict.push(mirror);\n        }\n        else {\n            observer = getObserverFromMirror(mirror, callback);\n        }\n        if (observer) {\n            return observer;\n        }\n        observer = {};\n        mirror.value = deepClone(obj);\n        if (callback) {\n            observer.callback = callback;\n            observer.next = null;\n            var intervals = this.intervals || [100, 1000, 10000, 60000];\n            if (intervals.push === void 0) {\n                throw new OriginalError(\"jsonpatch.intervals must be an array\");\n            }\n            var currentInterval = 0;\n            var dirtyCheck = function () {\n                generate(observer);\n            };\n            var fastCheck = function () {\n                clearTimeout(observer.next);\n                observer.next = setTimeout(function () {\n                    dirtyCheck();\n                    currentInterval = 0;\n                    observer.next = setTimeout(slowCheck, intervals[currentInterval++]);\n                }, 0);\n            };\n            var slowCheck = function () {\n                dirtyCheck();\n                if (currentInterval == intervals.length)\n                    currentInterval = intervals.length - 1;\n                observer.next = setTimeout(slowCheck, intervals[currentInterval++]);\n            };\n            if (typeof window !== 'undefined') {\n                if (window.addEventListener) {\n                    window.addEventListener('mousedown', fastCheck);\n                    window.addEventListener('mouseup', fastCheck);\n                    window.addEventListener('keydown', fastCheck);\n                }\n                else {\n                    document.documentElement.attachEvent('onmousedown', fastCheck);\n                    document.documentElement.attachEvent('onmouseup', fastCheck);\n                    document.documentElement.attachEvent('onkeydown', fastCheck);\n                }\n            }\n            observer.next = setTimeout(slowCheck, intervals[currentInterval++]);\n        }\n        observer.patches = patches;\n        observer.object = obj;\n        observer.unobserve = function () {\n            generate(observer);\n            clearTimeout(observer.next);\n            removeObserverFromMirror(mirror, observer);\n            if (typeof window !== 'undefined') {\n                if (window.removeEventListener) {\n                    window.removeEventListener('mousedown', fastCheck);\n                    window.removeEventListener('mouseup', fastCheck);\n                    window.removeEventListener('keydown', fastCheck);\n                }\n                else {\n                    document.documentElement.detachEvent('onmousedown', fastCheck);\n                    document.documentElement.detachEvent('onmouseup', fastCheck);\n                    document.documentElement.detachEvent('onkeydown', fastCheck);\n                }\n            }\n        };\n        mirror.observers.push(new ObserverInfo(callback, observer));\n        return observer;\n    }\n    jsonpatch.observe = observe;\n    function generate(observer) {\n        var mirror;\n        for (var i = 0, ilen = beforeDict.length; i < ilen; i++) {\n            if (beforeDict[i].obj === observer.object) {\n                mirror = beforeDict[i];\n                break;\n            }\n        }\n        _generate(mirror.value, observer.object, observer.patches, \"\");\n        if (observer.patches.length) {\n            apply(mirror.value, observer.patches);\n        }\n        var temp = observer.patches;\n        if (temp.length > 0) {\n            observer.patches = [];\n            if (observer.callback) {\n                observer.callback(temp);\n            }\n        }\n        return temp;\n    }\n    jsonpatch.generate = generate;\n    // Dirty check if obj is different from mirror, generate patches and update mirror\n    function _generate(mirror, obj, patches, path) {\n        var newKeys = _objectKeys(obj);\n        var oldKeys = _objectKeys(mirror);\n        var changed = false;\n        var deleted = false;\n        //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n        for (var t = oldKeys.length - 1; t >= 0; t--) {\n            var key = oldKeys[t];\n            var oldVal = mirror[key];\n            if (obj.hasOwnProperty(key)) {\n                var newVal = obj[key];\n                if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null) {\n                    _generate(oldVal, newVal, patches, path + \"/\" + escapePathComponent(key));\n                }\n                else {\n                    if (oldVal != newVal) {\n                        changed = true;\n                        patches.push({ op: \"replace\", path: path + \"/\" + escapePathComponent(key), value: deepClone(newVal) });\n                    }\n                }\n            }\n            else {\n                patches.push({ op: \"remove\", path: path + \"/\" + escapePathComponent(key) });\n                deleted = true; // property has been deleted\n            }\n        }\n        if (!deleted && newKeys.length == oldKeys.length) {\n            return;\n        }\n        for (var t = 0; t < newKeys.length; t++) {\n            var key = newKeys[t];\n            if (!mirror.hasOwnProperty(key)) {\n                patches.push({ op: \"add\", path: path + \"/\" + escapePathComponent(key), value: deepClone(obj[key]) });\n            }\n        }\n    }\n    var _isArray;\n    if (Array.isArray) {\n        _isArray = Array.isArray;\n    }\n    else {\n        _isArray = function (obj) {\n            return obj.push && typeof obj.length === 'number';\n        };\n    }\n    //3x faster than cached /^\\d+$/.test(str)\n    function isInteger(str) {\n        var i = 0;\n        var len = str.length;\n        var charCode;\n        while (i < len) {\n            charCode = str.charCodeAt(i);\n            if (charCode >= 48 && charCode <= 57) {\n                i++;\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    /// Apply a json-patch operation on an object tree\n    function apply(tree, patches, validate) {\n        var result = false, p = 0, plen = patches.length, patch, key;\n        while (p < plen) {\n            patch = patches[p];\n            p++;\n            // Find the object\n            var path = patch.path || \"\";\n            var keys = path.split('/');\n            var obj = tree;\n            var t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n            var len = keys.length;\n            var existingPathFragment = undefined;\n            while (true) {\n                key = keys[t];\n                if (validate) {\n                    if (existingPathFragment === undefined) {\n                        if (obj[key] === undefined) {\n                            existingPathFragment = keys.slice(0, t).join('/');\n                        }\n                        else if (t == len - 1) {\n                            existingPathFragment = patch.path;\n                        }\n                        if (existingPathFragment !== undefined) {\n                            this.validator(patch, p - 1, tree, existingPathFragment);\n                        }\n                    }\n                }\n                t++;\n                if (key === undefined) {\n                    if (t >= len) {\n                        result = rootOps[patch.op].call(patch, obj, key, tree); // Apply patch\n                        break;\n                    }\n                }\n                if (_isArray(obj)) {\n                    if (key === '-') {\n                        key = obj.length;\n                    }\n                    else {\n                        if (validate && !isInteger(key)) {\n                            throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", p - 1, patch.path, patch);\n                        }\n                        key = parseInt(key, 10);\n                    }\n                    if (t >= len) {\n                        if (validate && patch.op === \"add\" && key > obj.length) {\n                            throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", p - 1, patch.path, patch);\n                        }\n                        result = arrOps[patch.op].call(patch, obj, key, tree); // Apply patch\n                        break;\n                    }\n                }\n                else {\n                    if (key && key.indexOf('~') != -1)\n                        key = key.replace(/~1/g, '/').replace(/~0/g, '~'); // escape chars\n                    if (t >= len) {\n                        result = objOps[patch.op].call(patch, obj, key, tree); // Apply patch\n                        break;\n                    }\n                }\n                obj = obj[key];\n            }\n        }\n        return result;\n    }\n    jsonpatch.apply = apply;\n    function compare(tree1, tree2) {\n        var patches = [];\n        _generate(tree1, tree2, patches, '');\n        return patches;\n    }\n    jsonpatch.compare = compare;\n    var JsonPatchError = (function (_super) {\n        __extends(JsonPatchError, _super);\n        function JsonPatchError(message, name, index, operation, tree) {\n            _super.call(this, message);\n            this.message = message;\n            this.name = name;\n            this.index = index;\n            this.operation = operation;\n            this.tree = tree;\n        }\n        return JsonPatchError;\n    })(OriginalError);\n    jsonpatch.JsonPatchError = JsonPatchError;\n    jsonpatch.Error = JsonPatchError;\n    /**\n     * Recursively checks whether an object has any undefined values inside.\n     */\n    function hasUndefined(obj) {\n        if (obj === undefined) {\n            return true;\n        }\n        if (typeof obj == \"array\" || typeof obj == \"object\") {\n            for (var i in obj) {\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n     * @param {object} operation - operation object (patch)\n     * @param {number} index - index of operation in the sequence\n     * @param {object} [tree] - object where the operation is supposed to be applied\n     * @param {string} [existingPathFragment] - comes along with `tree`\n     */\n    function validator(operation, index, tree, existingPathFragment) {\n        if (typeof operation !== 'object' || operation === null || _isArray(operation)) {\n            throw new JsonPatchError('Operation is not an object', 'OPERATION_NOT_AN_OBJECT', index, operation, tree);\n        }\n        else if (!objOps[operation.op]) {\n            throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, tree);\n        }\n        else if (typeof operation.path !== 'string') {\n            throw new JsonPatchError('Operation `path` property is not a string', 'OPERATION_PATH_INVALID', index, operation, tree);\n        }\n        else if ((operation.op === 'move' || operation.op === 'copy') && typeof operation.from !== 'string') {\n            throw new JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)', 'OPERATION_FROM_REQUIRED', index, operation, tree);\n        }\n        else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && operation.value === undefined) {\n            throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_REQUIRED', index, operation, tree);\n        }\n        else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && hasUndefined(operation.value)) {\n            throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED', index, operation, tree);\n        }\n        else if (tree) {\n            if (operation.op == \"add\") {\n                var pathLen = operation.path.split(\"/\").length;\n                var existingPathLen = existingPathFragment.split(\"/\").length;\n                if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                    throw new JsonPatchError('Cannot perform an `add` operation at the desired path', 'OPERATION_PATH_CANNOT_ADD', index, operation, tree);\n                }\n            }\n            else if (operation.op === 'replace' || operation.op === 'remove' || operation.op === '_get') {\n                if (operation.path !== existingPathFragment) {\n                    throw new JsonPatchError('Cannot perform the operation at a path that does not exist', 'OPERATION_PATH_UNRESOLVABLE', index, operation, tree);\n                }\n            }\n            else if (operation.op === 'move' || operation.op === 'copy') {\n                var existingValue = { op: \"_get\", path: operation.from, value: undefined };\n                var error = jsonpatch.validate([existingValue], tree);\n                if (error && error.name === 'OPERATION_PATH_UNRESOLVABLE') {\n                    throw new JsonPatchError('Cannot perform the operation from a path that does not exist', 'OPERATION_FROM_UNRESOLVABLE', index, operation, tree);\n                }\n            }\n        }\n    }\n    jsonpatch.validator = validator;\n    /**\n     * Validates a sequence of operations. If `tree` parameter is provided, the sequence is additionally validated against the object tree.\n     * If error is encountered, returns a JsonPatchError object\n     * @param sequence\n     * @param tree\n     * @returns {JsonPatchError|undefined}\n     */\n    function validate(sequence, tree) {\n        try {\n            if (!_isArray(sequence)) {\n                throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n            }\n            if (tree) {\n                tree = JSON.parse(JSON.stringify(tree)); //clone tree so that we can safely try applying operations\n                apply.call(this, tree, sequence, true);\n            }\n            else {\n                for (var i = 0; i < sequence.length; i++) {\n                    this.validator(sequence[i], i);\n                }\n            }\n        }\n        catch (e) {\n            if (e instanceof JsonPatchError) {\n                return e;\n            }\n            else {\n                throw e;\n            }\n        }\n    }\n    jsonpatch.validate = validate;\n})(jsonpatch || (jsonpatch = {}));\nif (typeof exports !== \"undefined\") {\n    exports.apply = jsonpatch.apply;\n    exports.observe = jsonpatch.observe;\n    exports.unobserve = jsonpatch.unobserve;\n    exports.generate = jsonpatch.generate;\n    exports.compare = jsonpatch.compare;\n    exports.validate = jsonpatch.validate;\n    exports.validator = jsonpatch.validator;\n    exports.JsonPatchError = jsonpatch.JsonPatchError;\n    exports.Error = jsonpatch.Error;\n}\n\n},{}],78:[function(require,module,exports){\n/*\n * to-markdown - an HTML to Markdown converter\n *\n * Copyright 2011+, Dom Christie\n * Licenced under the MIT licence\n *\n */\n\n'use strict';\n\nvar toMarkdown;\nvar converters;\nvar mdConverters = require('./lib/md-converters');\nvar gfmConverters = require('./lib/gfm-converters');\nvar HtmlParser = require('./lib/html-parser');\nvar collapse = require('collapse-whitespace');\n\n/*\n * Utilities\n */\n\nvar blocks = ['address', 'article', 'aside', 'audio', 'blockquote', 'body',\n  'canvas', 'center', 'dd', 'dir', 'div', 'dl', 'dt', 'fieldset', 'figcaption',\n  'figure', 'footer', 'form', 'frameset', 'h1', 'h2', 'h3', 'h4','h5', 'h6',\n  'header', 'hgroup', 'hr', 'html', 'isindex', 'li', 'main', 'menu', 'nav',\n  'noframes', 'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table',\n  'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul'\n];\n\nfunction isBlock(node) {\n  return blocks.indexOf(node.nodeName.toLowerCase()) !== -1;\n}\n\nvar voids = [\n  'area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input',\n  'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'\n];\n\nfunction isVoid(node) {\n  return voids.indexOf(node.nodeName.toLowerCase()) !== -1;\n}\n\nfunction htmlToDom(string) {\n  var tree = new HtmlParser().parseFromString(string, 'text/html');\n  collapse(tree.documentElement, isBlock);\n  return tree;\n}\n\n/*\n * Flattens DOM tree into single array\n */\n\nfunction bfsOrder(node) {\n  var inqueue = [node],\n      outqueue = [],\n      elem, children, i;\n\n  while (inqueue.length > 0) {\n    elem = inqueue.shift();\n    outqueue.push(elem);\n    children = elem.childNodes;\n    for (i = 0 ; i < children.length; i++) {\n      if (children[i].nodeType === 1) { inqueue.push(children[i]); }\n    }\n  }\n  outqueue.shift();\n  return outqueue;\n}\n\n/*\n * Contructs a Markdown string of replacement text for a given node\n */\n\nfunction getContent(node) {\n  var text = '';\n  for (var i = 0; i < node.childNodes.length; i++) {\n    if (node.childNodes[i].nodeType === 1) {\n      text += node.childNodes[i]._replacement;\n    }\n    else if (node.childNodes[i].nodeType === 3) {\n      text += node.childNodes[i].data;\n    }\n    else { continue; }\n  }\n  return text;\n}\n\n/*\n * Returns the HTML string of an element with its contents converted\n */\n\nfunction outer(node, content) {\n  return node.cloneNode(false).outerHTML.replace('><', '>'+ content +'<');\n}\n\nfunction canConvert(node, filter) {\n  if (typeof filter === 'string') {\n    return filter === node.nodeName.toLowerCase();\n  }\n  if (Array.isArray(filter)) {\n    return filter.indexOf(node.nodeName.toLowerCase()) !== -1;\n  }\n  else if (typeof filter === 'function') {\n    return filter.call(toMarkdown, node);\n  }\n  else {\n    throw new TypeError('`filter` needs to be a string, array, or function');\n  }\n}\n\nfunction isFlankedByWhitespace(side, node) {\n  var sibling, regExp, isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  }\n  else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    }\n    else if(sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked;\n}\n\nfunction flankingWhitespace(node) {\n  var leading = '', trailing = '';\n\n  if (!isBlock(node)) {\n    var hasLeading = /^[ \\r\\n\\t]/.test(node.innerHTML),\n        hasTrailing = /[ \\r\\n\\t]$/.test(node.innerHTML);\n\n    if (hasLeading && !isFlankedByWhitespace('left', node)) {\n      leading = ' ';\n    }\n    if (hasTrailing && !isFlankedByWhitespace('right', node)) {\n      trailing = ' ';\n    }\n  }\n\n  return { leading: leading, trailing: trailing };\n}\n\n/*\n * Finds a Markdown converter, gets the replacement, and sets it on\n * `_replacement`\n */\n\nfunction process(node) {\n  var replacement, content = getContent(node);\n\n  // Remove blank nodes\n  if (!isVoid(node) && !/A|TH|TD/.test(node.nodeName) && /^\\s*$/i.test(content)) {\n    node._replacement = '';\n    return;\n  }\n\n  for (var i = 0; i < converters.length; i++) {\n    var converter = converters[i];\n\n    if (canConvert(node, converter.filter)) {\n      if (typeof converter.replacement !== 'function') {\n        throw new TypeError(\n          '`replacement` needs to be a function that returns a string'\n        );\n      }\n\n      var whitespace = flankingWhitespace(node);\n\n      if (whitespace.leading || whitespace.trailing) {\n        content = content.trim();\n      }\n      replacement = whitespace.leading +\n                    converter.replacement.call(toMarkdown, content, node) +\n                    whitespace.trailing;\n      break;\n    }\n  }\n\n  node._replacement = replacement;\n}\n\ntoMarkdown = function (input, options) {\n  options = options || {};\n\n  if (typeof input !== 'string') {\n    throw new TypeError(input + ' is not a string');\n  }\n\n  // Escape potential ol triggers\n  input = input.replace(/(\\d+)\\. /g, '$1\\\\. ');\n\n  var clone = htmlToDom(input).body,\n      nodes = bfsOrder(clone),\n      output;\n\n  converters = mdConverters.slice(0);\n  if (options.gfm) {\n    converters = gfmConverters.concat(converters);\n  }\n\n  if (options.converters) {\n    converters = options.converters.concat(converters);\n  }\n\n  // Process through nodes in reverse (so deepest child elements are first).\n  for (var i = nodes.length - 1; i >= 0; i--) {\n    process(nodes[i]);\n  }\n  output = getContent(clone);\n\n  return output.replace(/^[\\t\\r\\n]+|[\\t\\r\\n\\s]+$/g, '')\n               .replace(/\\n\\s+\\n/g, '\\n\\n')\n               .replace(/\\n{3,}/g, '\\n\\n');\n};\n\ntoMarkdown.isBlock = isBlock;\ntoMarkdown.isVoid = isVoid;\ntoMarkdown.outer = outer;\n\nmodule.exports = toMarkdown;\n\n},{\"./lib/gfm-converters\":79,\"./lib/html-parser\":80,\"./lib/md-converters\":81,\"collapse-whitespace\":76}],79:[function(require,module,exports){\n'use strict';\n\nfunction cell(content, node) {\n  var index = Array.prototype.indexOf.call(node.parentNode.childNodes, node);\n  var prefix = ' ';\n  if (index === 0) { prefix = '| '; }\n  return prefix + content + ' |';\n}\n\nvar highlightRegEx = /highlight highlight-(\\S+)/;\n\nmodule.exports = [\n  {\n    filter: 'br',\n    replacement: function () {\n      return '\\n';\n    }\n  },\n  {\n    filter: ['del', 's', 'strike'],\n    replacement: function (content) {\n      return '~~' + content + '~~';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.type === 'checkbox' && node.parentNode.nodeName === 'LI';\n    },\n    replacement: function (content, node) {\n      return (node.checked ? '[x]' : '[ ]') + ' ';\n    }\n  },\n\n  {\n    filter: ['th', 'td'],\n    replacement: function (content, node) {\n      return cell(content, node);\n    }\n  },\n\n  {\n    filter: 'tr',\n    replacement: function (content, node) {\n      var borderCells = '';\n      var alignMap = { left: ':--', right: '--:', center: ':-:' };\n\n      if (node.parentNode.nodeName === 'THEAD') {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var align = node.childNodes[i].attributes.align;\n          var border = '---';\n\n          if (align) { border = alignMap[align.value] || border; }\n\n          borderCells += cell(border, node.childNodes[i]);\n        }\n      }\n      return '\\n' + content + (borderCells ? '\\n' + borderCells : '');\n    }\n  },\n\n  {\n    filter: 'table',\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: ['thead', 'tbody', 'tfoot'],\n    replacement: function (content) {\n      return content;\n    }\n  },\n\n  // Fenced code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' &&\n             node.firstChild &&\n             node.firstChild.nodeName === 'CODE';\n    },\n    replacement: function(content, node) {\n      return '\\n\\n```\\n' + node.firstChild.textContent + '\\n```\\n\\n';\n    }\n  },\n\n  // Syntax-highlighted code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' &&\n             node.parentNode.nodeName === 'DIV' &&\n             highlightRegEx.test(node.parentNode.className);\n    },\n    replacement: function (content, node) {\n      var language = node.parentNode.className.match(highlightRegEx)[1];\n      return '\\n\\n```' + language + '\\n' + node.textContent + '\\n```\\n\\n';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.nodeName === 'DIV' &&\n             highlightRegEx.test(node.className);\n    },\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  }\n];\n\n},{}],80:[function(require,module,exports){\n/*\n * Set up window for Node.js\n */\n\nvar _window = (typeof window !== 'undefined' ? window : this);\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHtmlNatively () {\n  var Parser = _window.DOMParser\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse;\n}\n\nfunction createHtmlParser () {\n  var Parser = function () {};\n  \n  // For Node.js environments\n  if (typeof document === 'undefined') {\n    var jsdom = require('jsdom');\n    Parser.prototype.parseFromString = function (string) {\n      return jsdom.jsdom(string, {\n        features: {\n          FetchExternalResources: [],\n          ProcessExternalResources: false\n        }\n      });\n    };\n  } else {\n    if (!shouldUseActiveX()) {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = document.implementation.createHTMLDocument('');\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc;\n      };\n    } else {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = new ActiveXObject('htmlfile');\n        doc.designMode = 'on'; // disable on-page scripts\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc;\n      };\n    }\n  }\n  return Parser;\n}\n\nfunction shouldUseActiveX () {\n  var useActiveX = false;\n\n  try {\n    document.implementation.createHTMLDocument('').open();\n  } catch (e) {\n    if (window.ActiveXObject) useActiveX = true;\n  }\n\n  return useActiveX;\n}\n\nmodule.exports = canParseHtmlNatively() ? _window.DOMParser : createHtmlParser()\n\n},{\"jsdom\":75}],81:[function(require,module,exports){\n'use strict';\n\nmodule.exports = [\n  {\n    filter: 'p',\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'br',\n    replacement: function () {\n      return '  \\n';\n    }\n  },\n\n  {\n    filter: ['h1', 'h2', 'h3', 'h4','h5', 'h6'],\n    replacement: function(content, node) {\n      var hLevel = node.nodeName.charAt(1);\n      var hPrefix = '';\n      for(var i = 0; i < hLevel; i++) {\n        hPrefix += '#';\n      }\n      return '\\n\\n' + hPrefix + ' ' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'hr',\n    replacement: function () {\n      return '\\n\\n* * *\\n\\n';\n    }\n  },\n\n  {\n    filter: ['em', 'i'],\n    replacement: function (content) {\n      return '_' + content + '_';\n    }\n  },\n\n  {\n    filter: ['strong', 'b'],\n    replacement: function (content) {\n      return '**' + content + '**';\n    }\n  },\n\n  // Inline code\n  {\n    filter: function (node) {\n      var hasSiblings = node.previousSibling || node.nextSibling;\n      var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n      return node.nodeName === 'CODE' && !isCodeBlock;\n    },\n    replacement: function(content) {\n      return '`' + content + '`';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.nodeName === 'A' && node.getAttribute('href');\n    },\n    replacement: function(content, node) {\n      var titlePart = node.title ? ' \"'+ node.title +'\"' : '';\n      return '[' + content + '](' + node.getAttribute('href') + titlePart + ')';\n    }\n  },\n\n  {\n    filter: 'img',\n    replacement: function(content, node) {\n      var alt = node.alt || '';\n      var src = node.getAttribute('src') || '';\n      var title = node.title || '';\n      var titlePart = title ? ' \"'+ title +'\"' : '';\n      return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : '';\n    }\n  },\n\n  // Code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' && node.firstChild.nodeName === 'CODE';\n    },\n    replacement: function(content, node) {\n      return '\\n\\n    ' + node.firstChild.textContent.replace(/\\n/g, '\\n    ') + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'blockquote',\n    replacement: function (content) {\n      content = content.trim();\n      content = content.replace(/\\n{3,}/g, '\\n\\n');\n      content = content.replace(/^/gm, '> ');\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'li',\n    replacement: function (content, node) {\n      content = content.replace(/^\\s+/, '').replace(/\\n/gm, '\\n    ');\n      var prefix = '*   ';\n      var parent = node.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, node) + 1;\n\n      prefix = /ol/i.test(parent.nodeName) ? index + '.  ' : '*   ';\n      return prefix + content;\n    }\n  },\n\n  {\n    filter: ['ul', 'ol'],\n    replacement: function (content, node) {\n      var strings = [];\n      for (var i = 0; i < node.childNodes.length; i++) {\n        strings.push(node.childNodes[i]._replacement);\n      }\n\n      if (/li/i.test(node.parentNode.nodeName)) {\n        return '\\n' + strings.join('\\n');\n      }\n      return '\\n\\n' + strings.join('\\n') + '\\n\\n';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return this.isBlock(node);\n    },\n    replacement: function (content, node) {\n      return '\\n\\n' + this.outer(node, content) + '\\n\\n';\n    }\n  },\n\n  // Anything else!\n  {\n    filter: function () {\n      return true;\n    },\n    replacement: function (content, node) {\n      return this.outer(node, content);\n    }\n  }\n];\n\n},{}],82:[function(require,module,exports){\n(function (global){\n\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],83:[function(require,module,exports){\n//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n\n},{\"./rng\":82}],84:[function(require,module,exports){\n/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"keygen\": true,\n  \"link\": true,\n  \"menuitem\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n\n},{}]},{},[3])\n\n","export default class AppCtrl {\n  constructor() {\n    this.date = Date.now();\n  }\n}\n","module.exports = '<navbar></navbar>\\n\\n<ng-view></ng-view>\\n\\n<footer class=\"footer\">\\n  <div class=\"container\">\\n    <div class=\"pull-left\">\\n      <small>\\n        &copy; {{ ::$ctrl.date | date:\\'yyyy\\' }} The Love is our Weapon Campaign\\n      </small>\\n    </div>\\n    <div class=\"pull-right\">\\n      <small>\\n        <ul class=\"list-inline\">\\n          <li>\\n            Need help?\\n            <a href=\"mailto:hello@loveisourweapon.com?subject=Hello!\">Say hello!</a>\\n          </li>\\n          <!-- TODO: add Help, Privacy & Terms links -->\\n          <!--<li><a href=\"#\">Help</a></li>\\n          <li><a href=\"#\">Privacy &amp; Terms</a></li>-->\\n        </ul>\\n      </small>\\n    </div>\\n  </div>\\n</footer>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport ngRoute from 'angular-route';\nimport uiSelect from 'ui-select';\nimport navbar from '../navbar';\n\n// Router dependencies\nimport { home, homeTpl } from '../home';\nimport { globalFeed, globalFeedTpl } from '../global-feed';\nimport { deed, deedTpl } from '../deed';\nimport { group, groupTpl } from '../group';\nimport { user, userTpl } from '../user';\nimport { confirmEmail, confirmEmailTpl } from '../confirm-email';\nimport { resetPassword, resetPasswordTpl } from '../reset-password';\n\n// Component dependencies\nimport AppCtrl from './AppCtrl';\nimport appTpl from './app.html';\n\nexport default angular.module('app', [\n  ngRoute,\n  uiSelect,\n  navbar,\n  home,\n  globalFeed,\n  deed,\n  group,\n  user,\n  confirmEmail,\n  resetPassword\n])\n  .component('app', {\n    controller: AppCtrl,\n    template: appTpl\n  })\n  .config(/* @ngInject */(\n    $compileProvider,\n    $httpProvider,\n    $routeProvider,\n    $locationProvider,\n    uiSelectConfig\n  ) => {\n    $routeProvider\n      .when('/', {\n        controller: 'HomeCtrl',\n        controllerAs: '$ctrl',\n        template: homeTpl\n      })\n      .when('/global', {\n        controller: 'GlobalFeedCtrl',\n        controllerAs: '$ctrl',\n        template: globalFeedTpl\n      })\n      .when('/d/:deed', {\n        controller: 'DeedCtrl',\n        controllerAs: '$ctrl',\n        template: deedTpl\n      })\n      .when('/g/:group', {\n        controller: 'GroupCtrl',\n        controllerAs: '$ctrl',\n        template: groupTpl\n      })\n      .when('/u/:user', {\n        controller: 'UserCtrl',\n        controllerAs: '$ctrl',\n        template: userTpl\n      })\n      .when('/confirm/:token', {\n        controller: 'ConfirmEmailCtrl',\n        controllerAs: '$ctrl',\n        template: confirmEmailTpl\n      })\n      .when('/reset/:token', {\n        controller: 'ResetPasswordCtrl',\n        controllerAs: '$ctrl',\n        template: resetPasswordTpl\n      })\n      .otherwise('/');\n\n    $compileProvider.debugInfoEnabled(false);\n    $httpProvider.useApplyAsync(true);\n    $locationProvider.html5Mode(true);\n\n    uiSelectConfig.theme = 'bootstrap';\n    uiSelectConfig.appendToBody = true;\n  })\n  .name;\n","import toMarkdown from 'to-markdown';\n\nexport default class CommentFormCtrl {\n  /* @ngInject */\n  constructor($element, $scope, $timeout, Alertify, User, Comment, Feed) {\n    Object.assign(this, { $element, $scope, $timeout, Alertify, User, Comment, Feed });\n\n    this.newComment = {\n      content: { text: '' }\n    };\n  }\n\n  /**\n   * All elements compiled and linked\n   */\n  $postLink() {\n    this.setupMediumEditor();\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n  $onDestroy() {\n    this.editor.destroy();\n  }\n\n  /**\n   * Check for and set the comment target and User's current group\n   *\n   * @param {object} comment\n   *\n   * @returns {object}\n   */\n  setGroupAndTarget(comment) {\n    comment.group = this.User.group ? this.User.group._id : null;\n    if (this.deed) {\n      comment.target = { deed: this.deed._id };\n    } else if (this.group) {\n      comment.target = { group: this.group._id };\n    } else if (this.comment) {\n      comment.target = { comment: this.comment._id };\n    } else if (this.act) {\n      comment.target = { act: this.act._id };\n    }\n\n    return comment;\n  }\n\n  /**\n   * Save the comment\n   *\n   * @param {object} comment\n   */\n  save(comment) {\n    comment = this.setGroupAndTarget(comment);\n\n    this.saving = true;\n    this.Comment.save(comment)\n      .then(() => {\n        this.Alertify.success('Comment saved');\n        this.Feed.update();\n        this.$timeout(() => this.editor.setContent(''));\n      })\n      .catch(() => this.Alertify.success('Failed saving comment'))\n      .then(() => this.saving = false);\n  }\n\n  /**\n   * Initialise the MediumEditor element, respond to input changes\n   *\n   * TODO: move MediumEditor setup and config to a component\n   */\n  setupMediumEditor() {\n    this.editor = new MediumEditor(this.$element.find('textarea'), {\n      placeholder: { text: this.placeholder || 'Enter your message...', hideOnClick: false },\n      toolbar: { buttons: ['bold', 'italic', 'underline', 'anchor', 'orderedlist', 'unorderedlist'] },\n      autoLink: true\n    });\n\n    this.editor.subscribe('editableInput', (event, editable) => {\n      this.$scope.$apply(() => {\n        this.newComment.content.text = toMarkdown(editable.innerHTML, {\n          converters: [{\n            // Remove spans and divs\n            filter: function (node) {\n              return node.nodeName === 'SPAN' || node.nodeName === 'DIV';\n            },\n            replacement: function (content) {\n              return content;\n            }\n          }]\n        });\n      });\n    });\n  }\n}\n","module.exports = '<form ng-submit=\"$ctrl.save($ctrl.newComment)\">\\n  <div class=\"form-group\">\\n    <div class=\"well well-sm medium-editor m-none\">\\n      <textarea ng-model=\"$ctrl.newComment.content.text\"></textarea>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary m-t-xs\"\\n            ng-disabled=\"!$ctrl.newComment.content.text\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n      Save\\n    </button>\\n  </div>\\n</form>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport Comment from '../../services/Comment';\nimport Feed from '../../services/Feed';\n\n// Component dependencies\nimport CommentFormCtrl from './CommentFormCtrl';\nimport commentFormTpl from './commentForm.html';\n\nexport default angular.module('app.components.commentForm', [\n  Alertify,\n  User,\n  Comment,\n  Feed\n])\n  .component('commentForm', {\n    controller: CommentFormCtrl,\n    template: commentFormTpl,\n    bindings: {\n      deed: '<',\n      group: '<',\n      comment: '<',\n      act: '<',\n      placeholder: '@'\n    }\n  })\n  .name;\n","export default class ConfirmEmailCtrl {\n  /* @ngInject */\n  constructor($rootScope, $routeParams, $location, Alertify, User) {\n    $rootScope.title = 'Confirming Email Address';\n\n    User.confirmEmail($routeParams.token)\n      .then(() => Alertify.success('Confirmed email address'))\n      .catch(() => Alertify.error('Failed confirming email address'))\n      .then(() => $location.url('/'));\n  }\n}\n","module.exports = '<jumbotron jumbo-background=\"\\'/images/header.jpg\\'\"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\">\\n      <i class=\"fa fa-fw fa-cog fa-2x fa-spin middle\"></i>\\n      Confirming your email address\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport jumbotron from '../jumbotron';\n\n// Component dependencies\nimport ConfirmEmailCtrl from './ConfirmEmailCtrl';\nimport template from './confirmEmail.html';\nexport let confirmEmailTpl = template;\n\nexport let confirmEmail = angular.module('app.component.confirmEmail', [\n  Alertify,\n  User,\n  jumbotron\n])\n  .controller('ConfirmEmailCtrl', ConfirmEmailCtrl)\n  .name;\n","import _ from 'lodash';\n\n// Include template files\nimport templateHorizontal from './deedListHorizontal.html';\nimport templateVertical from './deedListVertical.html';\n\nexport default class DeedListCtrl {\n  /* @ngInject */\n  constructor($location, $templateCache, Deed, Act) {\n    Object.assign(this, { $location, Deed, Act });\n\n    this.loading = true;\n    this.Deed.find({ fields: '_id,logo,title,urlTitle' })\n      .then(response => {\n        this.deeds = response.data;\n\n        _.each(this.deeds, deed => this.Act.count({ deed: deed._id }));\n      })\n      .catch(() => null)\n      .then(() => this.loading = false);\n\n    $templateCache.put('deedListHorizontal.html', templateHorizontal);\n    $templateCache.put('deedListVertical.html', templateVertical);\n  }\n\n  /**\n   * Get the name of the template\n   *\n   * @returns {string}\n   */\n  getTemplateName() {\n    return this.layout === 'vertical' ?\n      'deedListVertical.html' :\n      'deedListHorizontal.html';\n  }\n}\n","module.exports = '<div class=\"container container-pad-sm\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\" ng-hide=\"$ctrl.loading\">\\n      <div class=\"deed-wrapper\"\\n           ng-repeat=\"deed in $ctrl.deeds track by deed._id\"\\n           ng-click=\"$ctrl.$location.url(\\'/d/\\' + deed.urlTitle)\">\\n        <div class=\"deed-image\">\\n          <img ng-src=\"{{ ::deed.logo || \\'/images/deed.png\\' }}\"\\n               class=\"img-responsive img-circle\">\\n          <div class=\"deed-title-wrapper\">\\n            <div class=\"deed-title\">{{ ::deed.title }}</div>\\n          </div>\\n        </div>\\n        <div class=\"deed-text text-center\">\\n          <div class=\"deed-count\">{{ $ctrl.Act.counters[deed._id] | number }}</div>\\n          <div class=\"deed-subtext\">DEEDS DONE</div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-4x fa-spin\"></i>\\n      </p>\\n    </div>\\n  </div>\\n</div>\\n';","module.exports = '<div class=\"container-pad-sm\">\\n  <div class=\"deed-wrapper\"\\n       ng-class=\"{ \\'deed-current\\': deed._id === $ctrl.Deed.current._id }\"\\n       ng-repeat=\"deed in $ctrl.deeds track by deed._id\"\\n       ng-click=\"$ctrl.$location.url(\\'/d/\\' + deed.urlTitle)\">\\n    <div class=\"deed-image\">\\n      <img ng-src=\"{{ ::deed.logo || \\'/images/deed.png\\' }}\"\\n           class=\"img-responsive img-circle\">\\n    </div>\\n    <div class=\"deed-text\">\\n      <span class=\"deed-title\">{{ ::deed.title }}</span>\\n      <br>\\n      <span class=\"deed-count\">{{ $ctrl.Act.counters[deed._id] | number }}</span>\\n      <span class=\"deed-subtext\">DEEDS DONE</span>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport Deed from '../../services/Deed';\nimport Act from '../../services/Act';\n\n// Component dependencies\nimport DeedListCtrl from './DeedListCtrl';\n\nexport default angular.module('app.components.deedList', [\n  Deed,\n  Act\n])\n  .component('deedList', {\n    bindings: {\n      layout: '@'\n    },\n    controller: DeedListCtrl,\n    template: '<ng-include src=\"$ctrl.getTemplateName()\" />'\n  })\n  .name;\n","export default class DeedCtrl {\n  /* @ngInject */\n  constructor($rootScope, $routeParams, Alertify, User, Group, Deed, Act, Feed, Modal) {\n    Object.assign(this, { Alertify, User, Group, Deed, Act, Feed, Modal });\n\n    this.loadDeed($routeParams.deed)\n      .then(() => $rootScope.title = this.Deed.current ? this.Deed.current.title : null);\n  }\n\n  /**\n   * Load a deed by urlTitle\n   *\n   * @param {string} urlTitle\n   */\n  loadDeed(urlTitle) {\n    this.loading = true;\n    return this.Deed\n      .findOne({ urlTitle })\n      .then(deed => {\n        this.Deed.current = deed;\n        this.Act.count({ deed: deed._id });\n        this.Feed.update({ refresh: true });\n      })\n      .catch(error => {\n        this.error = error.message;\n        this.Deed.current = null;\n      })\n      .then(() => this.loading = false);\n  }\n\n  /**\n   * Register a deed as done\n   *\n   * @param {object} deed\n   * @param {object} [group=null]\n   */\n  done(deed, group = null) {\n    this.doing = true;\n    this.Act.done(deed, group)\n      .then(() => {\n        this.Act.count();\n        this.Act.count({ deed: deed._id });\n        this.Feed.update();\n        this.Alertify.success('Deed done!');\n      })\n      .catch(() => this.Alertify.error('Failed registering deed'))\n      .then(() => this.doing = false);\n  }\n}\n","module.exports = '<jumbotron jumbo-classes=\"videotron\">\\n  <jumbo-content>\\n    <div class=\"embed-responsive embed-responsive-16by9\">\\n      <youtube-video ng-if=\"$ctrl.Deed.current.videoUrl\"\\n                     video-url=\"$ctrl.Deed.current.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"deed-header\">\\n      <img ng-src=\"{{ $ctrl.Deed.current.logo || \\'/images/deed.png\\' }}\"\\n           class=\"img-responsive img-circle pull-left m-t-md m-r-sm\">\\n\\n      <h2 class=\"text-uppercase pull-left m-b-none\">\\n        {{ $ctrl.Deed.current.title }}\\n      </h2>\\n\\n      <h1 class=\"pull-right text-right m-b-none\">\\n        {{ $ctrl.Act.counters[$ctrl.Deed.current._id] | number }}\\n      </h1>\\n    </div>\\n  </jumbo-content>\\n</jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-3 col-sm-push-9 m-b-sm\">\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.done($ctrl.Deed.current, $ctrl.User.group)\"\\n                ng-if=\"$ctrl.User.isAuthenticated()\"\\n                ng-disabled=\"$ctrl.doing\">\\n          <img src=\"/images/logo-invert.png\" class=\"img-responsive img-btn\" ng-hide=\"$ctrl.doing\">\\n          <i class=\"fa fa-cog fa-lg fa-spin\" ng-show=\"$ctrl.doing\"></i>\\n          Done\\n        </button>\\n\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.Modal.openLogin()\"\\n                ng-if=\"!$ctrl.User.isAuthenticated()\">\\n          <i class=\"fa fa-fw fa-user\"></i>\\n          Login\\n        </button>\\n\\n        <deed-list layout=\"vertical\"></deed-list>\\n      </div>\\n\\n      <div class=\"col-sm-9 col-sm-pull-3\">\\n        <h2 class=\"m-t-none\">Devotional</h2>\\n        <div marked=\"$ctrl.Deed.current.content\" class=\"m-b-md\"></div>\\n\\n        <comment-form deed=\"$ctrl.Deed.current\"\\n                      placeholder=\"Leave a testimony...\"></comment-form>\\n\\n        <feed criteria=\"{ \\'target.deed\\': $ctrl.Deed.current._id }\"></feed>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport angularMarked from 'angular-marked';\nimport angularYoutube from 'angular-youtube-embed';\nimport uibs from 'angular-ui-bootstrap';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Deed from '../../services/Deed';\nimport Act from '../../services/Act';\nimport Feed from '../../services/Feed';\nimport Modal from '../../services/Modal';\nimport jumbotron from '../jumbotron';\nimport feed from '../feed';\nimport deedList from '../deed-list';\nimport commentForm from '../comment-form';\n\n// Component dependencies\nimport DeedCtrl from './DeedCtrl';\nimport template from './deed.html';\nexport let deedTpl = template;\n\nexport let deed = angular.module('app.components.deed', [\n  angularMarked,\n  angularYoutube,\n  uibs,\n  User,\n  Group,\n  Deed,\n  Act,\n  Feed,\n  Modal,\n  jumbotron,\n  feed,\n  deedList,\n  commentForm\n])\n  .controller('DeedCtrl', DeedCtrl)\n  .name;\n","import _ from 'lodash';\n\nexport default class FeedCtrl {\n  /* @ngInject */\n  constructor(User, Feed) {\n    Object.assign(this, { User, Feed });\n\n    this.feedItems = null;\n\n    this.feedUpdateOff = this.Feed.onUpdate((options) => {\n      if (options.clear || options.refresh) {\n        this.feedItems = null;\n\n        if (options.clear) return;\n      }\n\n      this.loadFeed(this.feedItems ? { after: this.feedItems[0]._id } : {});\n    });\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n  $onDestroy() {\n    this.feedUpdateOff();\n  }\n\n  /**\n   * Load feed items\n   *\n   * @param {object} [params={}]\n   */\n  loadFeed(params = {}) {\n    this.loading = true;\n    this.Feed.find(_.merge(params, this.criteria))\n      .then(response => {\n        if (_.has(params, 'before')) {\n          this.feedItems = this.feedItems.concat(response.data);\n        } else if (_.has(params, 'after')) {\n          this.feedItems = response.data.concat(this.feedItems);\n        } else {\n          this.feedItems = response.data;\n        }\n      })\n      .catch(() => null)\n      .then(() => this.loading = false);\n  }\n\n  /**\n   * Load more feed items if last feed item is in view\n   *\n   * @param {boolean} $inView\n   * @param {number}  $index\n   */\n  onInView($inView, $index) {\n    if ($index === this.feedItems.length - 1 && $inView) {\n      this.loadFeed({\n        before: this.feedItems[this.feedItems.length - 1]._id\n      });\n    }\n  }\n}\n","module.exports = '<div class=\"feed-refresh-button\">\\n  <button type=\"button\"\\n          ng-click=\"$ctrl.loadFeed({ after: $ctrl.feedItems[0]._id })\"\\n          ng-disabled=\"$ctrl.loading || $ctrl.feedItems === null\"\\n          class=\"btn btn-link\">\\n    <i class=\"fa fa-refresh fa-lg\"\\n       ng-class=\"{ \\'fa-spin\\': $ctrl.loadingFeed }\"></i>\\n  </button>\\n</div>\\n\\n<div class=\"feed-wrapper\">\\n  <div class=\"feed-item clearfix\"\\n       ng-repeat=\"item in $ctrl.feedItems track by item._id\"\\n       in-view=\"$ctrl.onInView($inview, $index)\"\\n       in-view-options=\"{ debounce: 100 }\">\\n    <div class=\"feed-item-type\">\\n      <span class=\"fa-stack fa-lg\">\\n        <i class=\"fa fa-circle fa-stack-2x text-muted\"></i>\\n        <i class=\"fa fa-stack-1x fa-inverse\"\\n           ng-class=\"{\\n             \\'fa-heart\\': item.act,\\n             \\'fa-quote-right\\': item.comment && item.target.deed,\\n             \\'fa-bullhorn\\': item.comment && item.target.group\\n           }\"></i>\\n      </span>\\n    </div>\\n\\n    <div class=\"feed-item-image\">\\n      <img ng-src=\"{{ ::item.user.picture || $ctrl.User.getDefaultUserImage(item.user._id) }}\"\\n           class=\"img-circle\">\\n    </div>\\n\\n    <div class=\"feed-item-content\">\\n      <h6 class=\"m-t-none\">\\n        <a ng-href=\"/u/{{ ::item.user._id }}\"\\n           ng-show=\"$ctrl.User.isLoggedInUser(item.user) || $ctrl.User.isMemberOfGroup(item.group)\">\\n          {{ ::item.user.firstName }}\\n        </a>\\n        <span ng-hide=\"$ctrl.User.isLoggedInUser(item.user) || $ctrl.User.isMemberOfGroup(item.group)\">Someone</span>\\n\\n        <span ng-if=\"::item.group && !item.target.group\">\\n          from\\n          <a ng-href=\"/g/{{ ::item.group.urlName }}\">{{ ::item.group.name }}</a>\\n        </span>\\n\\n        <span ng-if=\"::item.act\">did the act of love</span>\\n        <span ng-if=\"::item.comment && item.target.deed\">left a testimony on</span>\\n        <span ng-if=\"::item.comment && item.target.group\">wrote a message to</span>\\n\\n        <a ng-href=\"/d/{{ ::item.target.deed.urlTitle }}\"\\n           ng-if=\"::item.target.deed\">{{ ::item.target.deed.title }}</a>\\n\\n        <a ng-href=\"/g/{{ ::item.target.group.urlName }}\"\\n           ng-if=\"::item.target.group\">{{ ::item.target.group.name }}</a>\\n      </h6>\\n\\n      <div marked=\"::item.comment.content.text\"\\n           class=\"feed-item-comment\"\\n           ng-if=\"::item.comment.content.text\"></div>\\n\\n      <p class=\"small m-b-none\">\\n        <a href>\\n          {{ ::item.created | fromNow }}\\n        </a>\\n        &middot;\\n        {{ ::item.created | moment:\\'ddd, D MMM YYYY [at] HH:mm\\' }}\\n      </p>\\n    </div>\\n  </div><!-- .feed-item -->\\n\\n  <div class=\"feed-item feed-item-narrow text-center\"\\n       ng-show=\"$ctrl.loading || $ctrl.feedItems === null\">\\n    <i class=\"fa fa-ellipsis-h fa-2x\"></i>\\n  </div>\\n\\n  <div class=\"feed-item\"\\n       ng-show=\"$ctrl.feedItems.length === 0\">\\n    No feed items to show.\\n  </div>\\n</div><!-- .feed-wrapper -->\\n';","import angular from 'angular';\n\n// Module dependencies\nimport angularMarked from 'angular-marked';\nimport angularInView from 'angular-inview';\nimport momentFilters from '../../filters/moment';\nimport User from '../../services/User';\nimport Feed from '../../services/Feed';\n\n// Component dependencies\nimport FeedCtrl from './FeedCtrl';\nimport feedTpl from './feed.html';\n\nexport default angular.module('app.components.feed', [\n  angularMarked,\n  angularInView.name,\n  momentFilters,\n  User,\n  Feed\n])\n  .component('feed', {\n    controller: FeedCtrl,\n    template: feedTpl,\n    bindings: {\n      criteria: '<'\n    }\n  })\n  .name;\n","export default class GlobalFeedCtrl {\n  /* @ngInject */\n  constructor($rootScope, Feed) {\n    $rootScope.title = 'Global Activity Feed';\n\n    Feed.update({ refresh: true });\n  }\n}\n","module.exports = '<jumbotron jumbo-background=\"\\'/images/header.jpg\\'\"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\">\\n      <h3 class=\"m-t-none m-b-md\">\\n        <i class=\"fa fa-fw fa-list\"></i>\\n        Global Activity Feed\\n      </h3>\\n\\n      <feed criteria=\"{ \\'target.group\\': \\'null\\' }\"></feed>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport Feed from '../../services/Feed';\nimport jumbotron from '../jumbotron';\nimport feed from '../feed';\n\n// Component dependencies\nimport GlobalFeedCtrl from './GlobalFeedCtrl';\nimport template from './globalFeed.html';\nexport let globalFeedTpl = template;\n\nexport let globalFeed = angular.module('app.components.globalFeed', [\n  Feed,\n  jumbotron,\n  feed\n])\n  .controller('GlobalFeedCtrl', GlobalFeedCtrl)\n  .name;\n","import _ from 'lodash';\nimport seedrandom from 'seedrandom';\nimport jsonpatch from 'fast-json-patch';\n\nconst NUM_IMAGES = 6;\n\nexport default class GroupCtrl {\n  /* @ngInject */\n  constructor($rootScope, $routeParams, $location, Alertify, User, Group, Campaign, Act, Feed, Modal) {\n    Object.assign(this, { $location, Alertify, User, Group, Campaign, Act, Feed, Modal });\n\n    // Set a random jumbotron background image seeded by the group name\n    this.jumbotronBackground = `/images/header${Math.floor(seedrandom($routeParams.group)() * NUM_IMAGES)}.jpg`;\n    this.activeTab = 0;\n    this.campaign = null;\n\n    this.loadGroup($routeParams.group)\n      .then(() => $rootScope.title = this.Group.current ? this.Group.current.name : null);\n\n    this.loginOff = this.User.on('login', user => {\n      this.Feed.update({ refresh: true });\n      this.setCampaignAlert(this.campaign, this.Group.current, user);\n      if (this.User.isMemberOfGroup(this.Group.current)) this.activeTab = 1;\n    });\n    this.logoutOff = this.User.on('logout', () => {\n      this.Feed.update({ clear: true });\n      this.setCampaignAlert(this.campaign, this.Group.current, null);\n      this.activeTab = 0;\n    });\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n  $onDestroy() {\n    this.loginOff();\n    this.logoutOff();\n  }\n\n  /**\n   * Load a group by it's urlName\n   *\n   * @param {string} urlName\n   *\n   * @returns {Promise}\n   */\n  loadGroup(urlName) {\n    this.loading = true;\n    return this.Group.findOne({ urlName })\n      .then(group => {\n        this.Group.current = group;\n        if (this.User.isMemberOfGroup(this.Group.current)) this.activeTab = 1;\n        this.Act.count({ group: group._id });\n        this.loadCampaign(group);\n        if (this.User.isAuthenticated()) this.Feed.update({ refresh: true });\n      })\n      .catch(err => {\n        this.error = err.message;\n        this.Group.current = null;\n      })\n      .then(() => this.loading = false);\n  }\n\n  /**\n   * Load the active campaign\n   *\n   * @param {object} group\n   */\n  loadCampaign(group) {\n    this.Campaign.findOne({ group: group._id, active: true })\n      .catch(() => null)\n      .then(campaign => {\n        this.campaign = campaign;\n        if (this.campaign) {\n          this.Act.count({ campaign: this.campaign._id });\n          this.currentDeed = _.findLast(this.campaign.deeds, { published: true });\n          this.$location.search('setupCampaign', null);\n        } else {\n          if (_.has(this.$location.search(), 'setupCampaign')) {\n            this.editCampaign('create', this.Group.current)\n              .then(() => this.$location.search('setupCampaign', null));\n          }\n        }\n\n        this.setCampaignAlert(this.campaign, this.Group.current, this.User.current);\n      });\n  }\n\n  /**\n   * Show hint to setup a campaign if logged in as admin of group with no active campaign\n   *\n   * @param {object} campaign\n   * @param {object} group\n   * @param {object} user\n   *\n   * @returns {boolean}\n   */\n  setCampaignAlert(campaign, group, user) {\n    this.showCampaignAlert = (\n      _.isNull(campaign) &&\n      _.has(group, 'admins') &&\n      _.has(user, '_id') &&\n      ~group.admins.indexOf(user._id)\n    );\n  }\n\n  /**\n   * Create or edit a campaign for the current group\n   *\n   * @oaram {string} [action='create']\n   * @param {object} group\n   * @param {object} [campaign=null]\n   *\n   * @returns {Promise}\n   */\n  editCampaign(action = 'create', group, campaign = null) {\n    return this.Modal.openCampaignEdit(action, group, campaign)\n      .then(() => this.loadCampaign(group))\n      .catch(err => null);\n  }\n\n  /**\n   * Finish the current campaign\n   *\n   * @param {object} campaign\n   */\n  finishCampaign(campaign) {\n    this.Modal.openConfirm('<p>Are you sure you want to finish this campaign?</p>')\n      .then(() => {\n        let observer = jsonpatch.observe(campaign);\n        campaign.active = false;\n        campaign.dateEnd = new Date();\n        return this.Campaign.update(campaign, jsonpatch.generate(observer));\n      })\n      .then(() => this.Alertify.success('Finished campaign'))\n      .then(() => this.loadCampaign(this.Group.current))\n      .catch(() => campaign.active = true);\n  }\n\n  /**\n   * Set a deed as published/unpublished for a campaign\n   *\n   * @param {object}  campaign\n   * @param {object}  deed\n   * @param {boolean} [published=true]\n   */\n  setPublished(campaign, deed, published = true) {\n    let observer = jsonpatch.observe(campaign);\n    let campaignDeed = _.find(campaign.deeds, { deed : { _id : deed._id } });\n    campaignDeed.published = published;\n    this.Campaign.update(campaign, jsonpatch.generate(observer))\n      .then(() => this.Alertify.success(\n        `${published ? 'Published' : 'Unpublished'} deed <strong>${campaignDeed.deed.title}</strong>`\n      ))\n      .then(() => this.loadCampaign(this.Group.current))\n      .catch(() => campaignDeed.published = !published);\n  }\n\n  /**\n   * Add the current logged in user to this group\n   *\n   * @param {object} user\n   * @param {object} group\n   */\n  joinGroup(user, group) {\n    let observer = jsonpatch.observe(user);\n    user.groups.push(group._id);\n    this.User.update(user, jsonpatch.generate(observer))\n      .then(() => this.Alertify.success(`Joined group <strong>${group.name}</strong>`))\n      .then(() => this.User.group = group)\n      .then(() => this.activeTab = 1)\n      .catch(() => user.groups.splice(user.groups.indexOf(groups._id)));\n  }\n\n  /**\n   * Remove the user from the group\n   *\n   * @param {object} user\n   * @param {object} group\n   */\n  leaveGroup(user, group) {\n    if (group.owner === user._id) {\n      return this.Modal.openAlert(`\n        <p>You are the current owner of <strong>${group.name}</strong>.</p>\n        <p>You'll need to make someone else the owner before leaving.</p>\n      `);\n    } else if (this.Group.isAdmin(group, user)) {\n      return this.Modal.openAlert(`\n        <p>You are currently an admin of <strong>${group.name}</strong>.</p>\n        <p>You'll need to remove yourself as an admin before leaving.</p>\n      `);\n    } else {\n      return this.Modal.openConfirm(`<p>Are you sure you want to leave <strong>${group.name}</strong>?</p>`)\n        .then(() => {\n          let observer = jsonpatch.observe(user);\n          user.groups.splice(user.groups.indexOf(group._id));\n          return this.User.update(user, jsonpatch.generate(observer));\n        })\n        .then(() => this.Alertify.success(`Left group <strong>${group.name}</strong>`))\n        .then(() => this.activeTab = 0)\n        .catch(() => user.groups.push(group));\n    }\n  }\n}\n","module.exports = '<jumbotron jumbo-image=\"\\'/images/group.png\\'\"\\n           jumbo-background=\"::$ctrl.jumbotronBackground\">\\n  <jumbo-title>{{ $ctrl.Group.current.name }}</jumbo-title>\\n  <jumbo-text>\\n    <span class=\"f-lg\">\\n      {{ $ctrl.Act.counters[$ctrl.Group.current._id] | number }}\\n    </span>\\n    acts of love\\n  </jumbo-text>\\n</jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-4 col-md-3 col-sm-push-8 col-md-push-9 m-b-lg\">\\n        <div class=\"well well-sm\"\\n             ng-if=\"$ctrl.User.isMemberOfGroup($ctrl.Group.current) && $ctrl.campaign !== null\">\\n          <h5 class=\"text-center\">\\n            Current Campaign\\n            <br>\\n            <small>\\n              <span class=\\'f-lg\\'>\\n                {{ $ctrl.Act.counters[$ctrl.campaign._id] | number }}\\n              </span>\\n              acts of love\\n            </small>\\n          </h5>\\n\\n          <!-- TODO: move buttons to a directive -->\\n          <!-- Show buttons with publish/unpublish menu for admins -->\\n          <div class=\"btn-group btn-block\"\\n               ng-repeat=\"item in $ctrl.campaign.deeds\"\\n               ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            <a class=\"btn col-xs-10\"\\n               ng-class=\"{\\n                 \\'btn-primary\\': item.published,\\n                 \\'btn-default\\': !item.published,\\n                 \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n               }\"\\n               ng-href=\"/d/{{ ::item.deed.urlTitle }}\">\\n              {{ ::item.deed.title }}\\n            </a>\\n            <button type=\"button\"\\n                    class=\"btn dropdown-toggle col-xs-2\"\\n                    ng-class=\"{\\n                      \\'btn-primary\\': item.published,\\n                      \\'btn-default\\': !item.published,\\n                      \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n                    }\"\\n                    data-toggle=\"dropdown\"\\n                    aria-haspopup=\"true\"\\n                    aria-expanded=\"false\">\\n              <span class=\"caret\"></span>\\n              <span class=\"sr-only\">Toggle Dropdown</span>\\n            </button>\\n            <ul class=\"dropdown-menu dropdown-menu-right\">\\n              <li ng-hide=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, true)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-up\"></i>\\n                  Publish\\n                </a>\\n              </li>\\n              <li ng-show=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, false)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-down\"></i>\\n                  Unpublish\\n                </a>\\n              </li>\\n            </ul>\\n          </div>\\n          <div ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            <hr>\\n            <button type=\"button\"\\n                    class=\"btn btn-default btn-block\"\\n                    ng-click=\"$ctrl.editCampaign(\\'update\\', $ctrl.Group.current, $ctrl.campaign)\">\\n              <i class=\"fa fa-fw fa-edit\"></i>\\n              Update campaign\\n            </button>\\n            <button type=\"button\"\\n                    class=\"btn btn-default btn-block\"\\n                    ng-click=\"$ctrl.finishCampaign($ctrl.campaign)\">\\n              <i class=\"fa fa-fw fa-flag-checkered\"></i>\\n              Finish campaign\\n            </button>\\n          </div>\\n\\n          <!-- Show a normal button for non-admins -->\\n          <a class=\"btn btn-block\"\\n             ng-repeat=\"item in $ctrl.campaign.deeds\"\\n             ng-href=\"/d/{{ ::item.deed.urlTitle }}\"\\n             ng-class=\"{\\n               \\'btn-primary\\': item.published,\\n               \\'btn-default\\': !item.published,\\n               \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n             }\"\\n             ng-if=\"!$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            {{ ::item.deed.title }}\\n          </a>\\n        </div>\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.User.isAuthenticated() ?\\n                  $ctrl.joinGroup($ctrl.User.current, $ctrl.Group.current) :\\n                  $ctrl.Modal.openLogin()\"\\n                ng-if=\"!$ctrl.User.isMemberOfGroup($ctrl.Group.current)\">\\n          <i class=\"fa fa-fw fa-users\"></i>\\n          <span ng-hide=\"$ctrl.User.isAuthenticated()\">Login &amp; </span>\\n          Join us\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.editCampaign(\\'create\\', $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.showCampaignAlert\">\\n          <i class=\"fa fa-fw fa-bullhorn\"></i>\\n          Setup campaign\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.Modal.openGroupEdit(\\'update\\', $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n          <i class=\"fa fa-fw fa-edit\"></i>\\n          Update group\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.leaveGroup($ctrl.User.current, $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.User.isMemberOfGroup($ctrl.Group.current)\">\\n          <i class=\"fa fa-fw fa-sign-out\"></i>\\n          Leave group\\n        </button>\\n      </div>\\n\\n      <div class=\"col-sm-8 col-md-9 col-sm-pull-4 col-md-pull-3\">\\n        <uib-alert type=\"info\"\\n                   ng-show=\"$ctrl.showCampaignAlert\"\\n                   close=\"$ctrl.showCampaignAlert = false\">\\n          You haven\\'t got an active campaign, would you like to set one up now?&nbsp;\\n          <button class=\"btn btn-info btn-inline m-t-xxs p-xs\"\\n                  ng-click=\"$ctrl.editCampaign(\\'create\\', $ctrl.Group.current)\">\\n            Setup Campaign\\n          </button>\\n        </uib-alert>\\n\\n        <uib-tabset active=\"$ctrl.activeTab\"\\n                    type=\"pills\">\\n          <uib-tab>\\n            <uib-tab-heading>\\n              <i class=\"fa fa-fw fa-commenting\"></i>\\n              Welcome\\n            </uib-tab-heading>\\n\\n            <blockquote marked=\"$ctrl.Group.current.welcomeMessage\"\\n                        ng-show=\"$ctrl.Group.current.welcomeMessage\"></blockquote>\\n\\n            <div ng-hide=\"$ctrl.Group.current.welcomeMessage\">\\n              <h2>\\n                The Love is our Weapon Campaign is a youth movement that exists to\\n                change cities through the love of Jesus by doing strategic practical\\n                acts of love.\\n              </h2>\\n              <p>\\n                Thousands of people, doing thousands of acts of love, bringing\\n                change, value, healing and hope throughout cities and communities\\n                everywhere.\\n              </p>\\n            </div>\\n          </uib-tab>\\n\\n          <uib-tab>\\n            <uib-tab-heading>\\n              <i class=\"fa fa-fw fa-list\"></i>\\n              Activity Feed\\n            </uib-tab-heading>\\n\\n            <feed criteria=\"{ group: $ctrl.Group.current._id }\"\\n                  ng-show=\"$ctrl.User.isAuthenticated()\"></feed>\\n\\n            <p ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              You must <a ng-click=\"$ctrl.Modal.openLogin()\" href>login</a>\\n              to see {{ $ctrl.Group.current.name }}\\'s Activity Feed.\\n            </p>\\n          </uib-tab>\\n        </uib-tabset>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport angularMarked from 'angular-marked';\nimport uibs from 'angular-ui-bootstrap';\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Campaign from '../../services/Campaign';\nimport Act from '../../services/Act';\nimport Feed from '../../services/Feed';\nimport Modal from '../../services/Modal';\nimport jumbotron from '../jumbotron';\nimport feed from '../feed';\n\n// Component dependencies\nimport GroupCtrl from './GroupCtrl';\nimport template from './group.html';\nexport let groupTpl = template;\n\nexport let group = angular.module('app.components.group', [\n  angularMarked,\n  uibs,\n  Alertify,\n  User,\n  Group,\n  Campaign,\n  Act,\n  Feed,\n  Modal,\n  jumbotron,\n  feed\n])\n  .controller('GroupCtrl', GroupCtrl)\n  .name;\n","export default class HomeCtrl {\n  /* @ngInject */\n  constructor($rootScope, User, Modal) {\n    Object.assign(this, { User, Modal });\n\n    $rootScope.title = null;\n  }\n}\n","import _ from 'lodash';\n\nexport default class HomeFeedCtrl {\n  /* @ngInject */\n  constructor(User, Act, Feed) {\n    Object.assign(this, { User, Act });\n\n    if (this.User.isAuthenticated() && this.User.current) {\n      Feed.update({ refresh: true });\n      this.countAllGroupActs(this.User.current.groups);\n    }\n\n    this.loginOff = this.User.on('login', user => {\n      Feed.update({ refresh: true });\n      this.countAllGroupActs(user.groups);\n    });\n    this.logoutOff = this.User.on('logout', () => Feed.update({ clear: true }));\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n  $onDestroy() {\n    this.loginOff();\n    this.logoutOff();\n  }\n\n  /**\n   * Create a comma-separated list of group ID's\n   *\n   * @param {object[]} groups\n   *\n   * @returns {string|null}\n   */\n  listGroupIds(groups) {\n    return (groups && groups.length) ? _.map(groups, '_id').join(',') : null;\n  }\n\n  /**\n   * Count acts for a set of groups\n   *\n   * @param {object[]} groups\n   */\n  countAllGroupActs(groups) {\n    _.each(groups, group => this.Act.count({ group: group._id }));\n  }\n}\n","export default class WelcomeCtrl {\n  /* @ngInject */\n  constructor(User, Group, Act, Modal) {\n    Object.assign(this, { Act, Modal });\n\n    Group.find({ count: true })\n      .then(response => this.numberOfGroups = Number(response.data));\n\n    User.find({ count: true })\n      .then(response => this.numberOfUsers = Number(response.data));\n  }\n}\n","module.exports = '<jumbotron jumbo-background=\"\\'/images/header-home.jpg\\'\"\\n           jumbo-classes=\"videotron\">\\n  <jumbo-content class=\"Home__Header\">\\n    <div class=\"text-center\">\\n      <h1 class=\"m-none\">Love is our Weapon</h1>\\n      <p class=\"m-t-none\">Changing the world one deed at a time</p>\\n    </div>\\n\\n    <div class=\"embed-responsive embed-responsive-16by9\">\\n      <youtube-video video-id=\"\\'rzvGAGKw8sU\\'\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"text-center m-t-md\">\\n      <button type=\"button\"\\n              class=\"btn btn-primary btn-lg\"\\n              ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n        Start a Campaign\\n      </button>\\n    </div>\\n  </jumbo-content>\\n</jumbotron>\\n\\n<welcome ng-hide=\"$ctrl.User.isAuthenticated()\"></welcome>\\n\\n<home-feed ng-show=\"$ctrl.User.isAuthenticated()\"></home-feed>\\n';","module.exports = '<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-sm-4 col-sm-push-8 m-b-lg\">\\n      <h3 class=\"m-t-none m-b-md\">\\n        <i class=\"fa fa-users\"></i>\\n        Groups\\n      </h3>\\n      <div class=\"list-group group-list\">\\n        <a class=\"list-group-item clearfix\"\\n           ng-repeat=\"group in $ctrl.User.current.groups track by group._id\"\\n           ng-href=\"/g/{{ ::group.urlName }}\">\\n          <div class=\"group-list-img\">\\n            <img ng-src=\"{{ ::group.logo || \\'/images/group.png\\' }}\"\\n                 class=\"img-circle\">\\n          </div>\\n          <div class=\"group-list-content\">\\n            <h4 class=\"m-none\">{{ ::group.name }}</h4>\\n            <p class=\"m-b-none\">\\n              <span class=\\'f-lg\\'>\\n                {{ $ctrl.Act.counters[group._id] | number }}\\n              </span> acts of love\\n            </p>\\n          </div>\\n        </a>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-sm-8 col-sm-pull-4\">\\n      <h3 class=\"m-t-none m-b-md\">\\n        <i class=\"fa fa-fw fa-list\"></i>\\n        Activity Feed\\n      </h3>\\n\\n      <feed criteria=\"{\\n        user: $ctrl.User.current._id,\\n        group: $ctrl.listGroupIds($ctrl.User.current.groups)\\n      }\"></feed>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Act from '../../services/Act';\nimport Feed from '../../services/Feed';\nimport Modal from '../../services/Modal';\nimport jumbotron from '../jumbotron';\nimport feed from '../feed';\nimport deedList from '../deed-list';\n\n// Component dependencies\nimport HomeCtrl from './HomeCtrl';\nimport template from './home.html';\nimport WelcomeCtrl from './WelcomeCtrl';\nimport welcomeTpl from './welcome.html';\nimport HomeFeedCtrl from './HomeFeedCtrl';\nimport homeFeedTpl from './homeFeed.html';\n\nexport let homeTpl = template;\nexport let home = angular.module('app.components.home', [\n  User,\n  Group,\n  Act,\n  Feed,\n  Modal,\n  jumbotron,\n  feed,\n  deedList\n])\n  .controller('HomeCtrl', HomeCtrl)\n  .component('welcome', {\n    controller: WelcomeCtrl,\n    template: welcomeTpl\n  })\n  .component('homeFeed', {\n    controller: HomeFeedCtrl,\n    template: homeFeedTpl\n  })\n  .name;\n","module.exports = '<div class=\"Home__SignupLogin\">\\n  <div class=\"container container-pad-sm text-center\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h3 class=\"m-t-none\">Start changing your world today!</h3>\\n        <p>Sign up or login to join the Global Campaign or your local group campaign.</p>\\n        <p>\\n          <br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.Modal.openSignup()\">\\n            Sign up\\n          </button>\\n          &nbsp;&nbsp; or &nbsp;&nbsp;\\n          <button type=\"button\"\\n                  class=\"btn btn-default\"\\n                  ng-click=\"$ctrl.Modal.openLogin()\">\\n            Login\\n          </button>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__SignupLogin -->\\n\\n<deed-list></deed-list>\\n\\n<div class=\"Home__Welcome\">\\n  <div class=\"container container-pad\">\\n    <div class=\"row\">\\n      <div class=\"col-sm-9\">\\n        <h2>\\n          The Love is our Weapon Campaign is a youth movement that exists to\\n          change cities through the love of Jesus by doing strategic practical\\n          acts of love.\\n        </h2>\\n        <p>\\n          Thousands of people, doing thousands of acts of love, bringing\\n          change, value, healing and hope throughout cities and communities\\n          everywhere.\\n        </p>\\n        <p>\\n          <br><br><br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n            Start a Campaign for your Group!\\n          </button>\\n        </p>\\n      </div>\\n\\n      <div class=\"col-sm-3\">\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.Act.counters.global\">\\n            {{ $ctrl.Act.counters.global | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.Act.counters.global\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">acts of love</h4>\\n        <p class=\"m-t-none\">done around the world</p>\\n\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.numberOfGroups\">\\n            {{ $ctrl.numberOfGroups | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.numberOfGroups\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">groups</h4>\\n        <p class=\"m-t-none\">serving together</p>\\n\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.numberOfUsers\">\\n            {{ $ctrl.numberOfUsers | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.numberOfUsers\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">individuals</h4>\\n        <p class=\"m-t-none\">causing change</p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__Welcome -->\\n\\n<div class=\"Home__HowTo\">\\n  <div class=\"container\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h2 class=\"text-center\">\\n          Running a campaign is as easy as 1, 2, 3.\\n        </h2>\\n        <img src=\"images/welcome-laptop.png\">\\n        <ol>\\n          <li>\\n            Sign up<br>\\n            <small>\\n              All you have to do is enter your details and login to\\n              join a campaign!\\n            </small>\\n          </li>\\n          <li>Join or Start a Campaign</li>\\n          <li>Start changing your world!</li>\\n        </ol>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__HowTo -->\\n\\n<div class=\"Home__Spacer\"></div>\\n\\n<div class=\"Home__Footer\">\\n  <div class=\"container container-pad text-center\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h1>Love is our Weapon</h1>\\n        <p>\\n          <br><br><br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n            Start a Campaign\\n          </button>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__Footer -->\\n';","export default class JumbotronCtrl {\n  constructor() {\n    this.styles = {\n      'background-image': this.background ? `url(${this.background})` : 'none'\n    };\n  }\n}\n","import angular from 'angular';\n\n// Component dependencies\nimport JumbotronCtrl from './JumbotronCtrl';\nimport jumbotronTpl from './jumbotron.html';\n\nexport default angular.module('app.components.jumbotron', [])\n  .component('jumbotron', {\n    controller: JumbotronCtrl,\n    template: jumbotronTpl,\n    transclude: {\n      content: '?jumboContent',\n      title: '?jumboTitle',\n      text: '?jumboText'\n    },\n    bindings: {\n      image: '<jumboImage',\n      background: '<jumboBackground',\n      classes: '@jumboClasses'\n    }\n  })\n  .name;\n","module.exports = '<div class=\"jumbotron {{ $ctrl.classes }}\"\\n     ng-style=\"$ctrl.styles\">\\n  <div class=\"container\">\\n    <div ng-transclude=\"content\">\\n      <div class=\"jumbotron-image\"\\n           ng-if=\"$ctrl.image\">\\n        <img ng-src=\"{{ $ctrl.image }}\"\\n             class=\"img-responsive img-circle\">\\n      </div>\\n      <h1 class=\"jumbotron-title\"\\n          ng-transclude=\"title\"></h1>\\n      <p class=\"jumbotron-text\"\\n         ng-transclude=\"text\"></p>\\n    </div>\\n  </div>\\n</div>\\n';","/* global $ */\n\nconst MIN_QUERY_LENGTH = 3;\n\nexport default class NavbarCtrl {\n  /* @ngInject */\n  constructor($location, $q, User, Group, Deed, Act, Modal) {\n    Object.assign(this, { $location, $q, User, Group, Deed, Act, Modal });\n\n    this.choices = [];\n    this.selected = null;\n\n    this.Act.count();\n  }\n\n  /**\n   * Refresh list of groups and deeds using search query\n   *\n   * @param {string} query\n   *\n   * @returns {Promise|boolean}\n   */\n  refreshChoices(query) {\n    this.choices = [];\n\n    if (query.length < MIN_QUERY_LENGTH) {\n      return false;\n    }\n\n    return this.$q.all([\n      this.Group.search(query, { fields: '_id,name,urlName' }),\n      this.Deed.search(query, { fields: '_id,title,urlTitle' })\n    ])\n      .then(responses => this.choices = responses[0].data.concat(responses[1].data));\n  }\n\n  /**\n   * Group list of choices\n   *\n   * @param {object} item\n   *\n   * @returns {string}\n   */\n  groupChoices(item) {\n    return item.urlName ? 'Groups' : 'Deeds';\n  }\n\n  /**\n   * Redirect to the selected group or deed page\n   *\n   * @param {object} item\n   */\n  select(item) {\n    this.selected = null;\n    this.$location.path(item.urlName ? `/g/${item.urlName}` : `/d/${item.urlTitle}`);\n    this.collapseMenu();\n  }\n\n  /**\n   * Set the current user's group, redirect to group homepage\n   *\n   * @param {object} group\n   */\n  setUserGroup(group) {\n    this.User.group = group;\n    this.select(group);\n  }\n\n  /**\n   * Call the jQuery .collapse method\n   * TODO: should be in directive?\n   */\n  collapseMenu() {\n    $('#liow-navbar-collapse').collapse('hide');\n  }\n}\n","import angular from 'angular';\n\n// Module dependencies\nimport ngSanitize from 'angular-sanitize';\nimport uiSelect from 'ui-select';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Deed from '../../services/Deed';\nimport Act from '../../services/Act';\nimport Modal from '../../services/Modal';\n\n// Component dependencies\nimport NavbarCtrl from './NavbarCtrl';\nimport navbarTpl from './navbar.html';\n\nexport default angular.module('app.components.navbar', [\n  ngSanitize,\n  uiSelect,\n  User,\n  Group,\n  Deed,\n  Act,\n  Modal\n])\n  .component('navbar', {\n    controller: NavbarCtrl,\n    template: navbarTpl\n  })\n  .name;\n","module.exports = '<nav class=\"navbar navbar-default navbar-fixed-top\" id=\"liow-navbar\" role=\"navigation\">\\n  <div class=\"container\">\\n    <div class=\"navbar-header\">\\n      <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#liow-navbar-collapse\" aria-expanded=\"false\">\\n        <span class=\"sr-only\">Toggle navigation</span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n      </button>\\n\\n      <a class=\"navbar-brand\"\\n         ng-click=\"$ctrl.collapseMenu()\"\\n         title=\"Love is our Weapon\"\\n         href=\"/\">\\n        <img src=\"/images/logo-navbar.png\"\\n             alt=\"Love is our Weapon\">\\n        <div class=\"navbar-brand-label\">\\n          <span class=\"text-primary\">\\n            {{ $ctrl.Act.counters.global | number }}\\n          </span>\\n          <br><small>acts of love</small>\\n        </div>\\n      </a>\\n    </div>\\n\\n    <div class=\"collapse navbar-collapse\" id=\"liow-navbar-collapse\">\\n      <div class=\"navbar-divider navbar-left\"></div>\\n\\n      <form class=\"navbar-form navbar-left\" id=\"group-search\" role=\"search\">\\n        <div class=\"form-group\">\\n          <label class=\"input-group\">\\n            <div class=\"input-group-addon\"><i class=\"fa fa-search\"></i></div>\\n            <ui-select ng-model=\"$ctrl.selected\"\\n                       on-select=\"$ctrl.select($item)\"\\n                       append-to-body=\"false\">\\n              <ui-select-match placeholder=\"Find a group or deed...\">\\n                {{ $select.selected.name || $select.selected.title }}\\n              </ui-select-match>\\n              <ui-select-choices repeat=\"choice in $ctrl.choices\"\\n                                 group-by=\"$ctrl.groupChoices\"\\n                                 refresh=\"$ctrl.refreshChoices($select.search)\"\\n                                 refresh-delay=\"200\"\\n                                 position=\"down\">\\n                <div ng-bind-html=\"(choice.name || choice.title) | highlight:$select.search\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </label>\\n        </div>\\n      </form>\\n\\n      <ul class=\"nav navbar-nav navbar-right\">\\n        <li>\\n          <a ng-href=\"/global\"\\n             ng-click=\"$ctrl.collapseMenu()\"\\n             title=\"Global Activity Feed\">\\n            Global\\n          </a>\\n        </li>\\n        <li ng-show=\"$ctrl.User.isAuthenticated() && $ctrl.User.group\">\\n          <a ng-href=\"/g/{{ $ctrl.User.group.urlName }}\"\\n             ng-click=\"$ctrl.collapseMenu()\"\\n             title=\"{{ $ctrl.User.group.name }}\">\\n            Campaign\\n          </a>\\n        </li>\\n        <li class=\"dropdown\">\\n          <a class=\"dropdown-toggle user-dropdown\"\\n             data-toggle=\"dropdown\"\\n             role=\"button\"\\n             aria-haspopup=\"true\"\\n             aria-expanded=\"false\"\\n             href>\\n            <img ng-src=\"{{ $ctrl.User.current.picture || $ctrl.User.getDefaultUserImage($ctrl.User.current._id) }}\"\\n                 class=\"img-circle\">\\n            <span class=\"caret\"></span>\\n          </a>\\n          <ul class=\"dropdown-menu\">\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              {{ $ctrl.User.current.name }}\\n            </li>\\n            <li ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-href=\"/u/{{ $ctrl.User.current._id }}\"\\n                 ng-click=\"$ctrl.collapseMenu()\">\\n                <i class=\"fa fa-fw fa-user\"></i>\\n                Your Profile\\n              </a>\\n            </li>\\n            <li ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.User.logout() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-sign-out\"></i>\\n                Logout\\n              </a>\\n            </li>\\n            <li ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.Modal.openLogin() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-sign-in\"></i>\\n                Login\\n              </a>\\n            </li>\\n            <li ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.Modal.openSignup() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-user-plus\"></i>\\n                Sign up\\n              </a>\\n            </li>\\n            <li class=\"divider\" ng-show=\"$ctrl.User.isAuthenticated()\" role=\"separator\"></li>\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <i class=\"fa fa-fw fa-users\"></i>\\n              Groups\\n            </li>\\n            <li ng-repeat=\"group in $ctrl.User.current.groups track by group._id\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\"\\n                ng-class=\"{ \\'active\\': $ctrl.User.group._id === group._id }\">\\n              <a ng-click=\"$ctrl.setUserGroup(group)\" href>\\n                {{ group.name }}\\n              </a>\\n            </li>\\n            <li>\\n              <a ng-click=\"$ctrl.Modal.openGroupEdit() && $ctrl.collapseMenu()\" href>\\n                <i class=\"fa fa-fw fa-pencil-square-o\"></i>\\n                Group sign up\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\\n';","export default class ResetPasswordCtrl {\n  /* @ngInject */\n  constructor($rootScope, $routeParams, $location, Alertify, User, Modal) {\n    Object.assign(this, { $routeParams, $location, Alertify, User, Modal });\n\n    $rootScope.title = 'Reset Password';\n  }\n\n  /**\n   * Save the user's new password\n   *\n   * @param {string} password\n   * @param {string} token\n   */\n  save(password, token) {\n    this.saving = true;\n    this.User.resetPassword(password, token)\n      .then(() => this.Alertify.success('Password reset'))\n      .catch(() => this.Alertify.error('Password reset link has expired'))\n      .then(() => this.Modal.openLogin() && this.$location.url('/'));\n  }\n}\n","import angular from 'angular';\n\n// Module dependencies\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport jumbotron from '../jumbotron';\nimport directives from '../../directives';\n\n// Component dependencies\nimport ResetPasswordCtrl from './ResetPasswordCtrl';\nimport template from './resetPassword.html';\nexport let resetPasswordTpl = template;\n\nexport let resetPassword = angular.module('app.component.resetPassword', [\n    Alertify,\n    User,\n    jumbotron,\n    directives\n  ])\n  .controller('ResetPasswordCtrl', ResetPasswordCtrl)\n  .name;\n","module.exports = '<jumbotron jumbo-background=\"\\'/images/header.jpg\\'\"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12 col-sm-8 col-sm-push-2 col-md-6 col-md-push-3\">\\n      <h3>\\n        <i class=\"fa fa-fw fa-key\"></i>\\n        Reset your password\\n      </h3>\\n\\n      <form name=\"resetPassword\"\\n            ng-submit=\"$ctrl.form.$valid && $ctrl.save($ctrl.password, $ctrl.$routeParams.token)\"\\n            novalidate>\\n      <span ng-init=\"$ctrl.form = resetPassword\"></span>\\n\\n        <div class=\"form-group\"\\n             ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.password.$invalid }\">\\n          <label for=\"password\">Password</label>\\n          <input type=\"password\"\\n                 class=\"form-control\"\\n                 id=\"password\"\\n                 name=\"password\"\\n                 placeholder=\"Enter a new password...\"\\n                 ng-model=\"$ctrl.password\"\\n                 required\\n                 minlength=\"8\"\\n                 autofocus>\\n          <span class=\"help-block\"\\n                ng-show=\"$ctrl.form.password.$error.minlength\">\\n            Password must be at least 8 characters.\\n          </span>\\n        </div>\\n\\n        <div class=\"form-group\"\\n             ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.confirmPassword.$invalid }\">\\n          <label for=\"confirmPassword\">Confirm Password</label>\\n          <input type=\"password\"\\n                 class=\"form-control\"\\n                 id=\"confirmPassword\"\\n                 name=\"confirmPassword\"\\n                 placeholder=\"Enter the same password again...\"\\n                 ng-model=\"$ctrl.confirmPassword\"\\n                 required\\n                 same-as=\"$ctrl.password\">\\n          <span class=\"help-block\"\\n                  ng-show=\"$ctrl.form.confirmPassword.$error.sameAs\">\\n            Entered passwords must be the same.\\n          </span>\\n        </div>\\n\\n        <button type=\"submit\"\\n                class=\"btn btn-primary btn-block\"\\n                ng-disabled=\"$ctrl.form.$pristine || $ctrl.saving\">\\n          <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n          Submit\\n        </button>\\n      </form>\\n    </div>\\n  </div>\\n</div>\\n';","import seedrandom from 'seedrandom';\n\nconst NUM_IMAGES = 6;\n\nexport default class UserCtrl {\n  /* @ngInject */\n  constructor($rootScope, $routeParams, User, Act, Feed, Modal) {\n    Object.assign(this, { User, Act, Feed, Modal });\n\n    // Set a random jumbotron background image seeded by the user ID\n    this.jumbotronBackground = `/images/header${Math.floor(seedrandom($routeParams.user)() * NUM_IMAGES)}.jpg`;\n\n    this.loadUser($routeParams.user)\n      .then(() => $rootScope.title = this.user ?\n        this.user.firstName + (this.user.lastName ? ` ${this.user.lastName}` : '') :\n        null\n      );\n\n    this.loginOff = this.User.on('login', () => this.Feed.update({ refresh: true }));\n    this.logoutOff = this.User.on('logout', () => this.Feed.update({ clear: true }));\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n  $onDestroy() {\n    this.loginOff();\n    this.logoutOff();\n  }\n\n  /**\n   * Load a user by ID\n   *\n   * @param {string} userId\n   *\n   * @returns {Promise}\n   */\n  loadUser(userId) {\n    this.loading = true;\n    return this.User.findById(userId)\n      .then(response => {\n        this.user = response.data;\n        this.Act.count({ user: this.user._id });\n        if (this.User.isAuthenticated()) this.Feed.update(true);\n      })\n      .catch(() => {\n        this.error = 'User not found';\n        this.user = null;\n      })\n      .then(() => this.loading = false);\n  }\n}\n","import angular from 'angular';\n\n// Module dependencies\nimport User from '../../services/User';\nimport Act from '../../services/Act';\nimport Feed from '../../services/Feed';\nimport Modal from '../../services/Modal';\nimport jumbotron from '../jumbotron';\n\n// Component dependencies\nimport UserCtrl from './UserCtrl';\nimport template from './user.html';\nexport let userTpl = template;\n\nexport let user = angular.module('app.components.user', [\n  User,\n  Act,\n  Feed,\n  Modal,\n  jumbotron\n])\n  .controller('UserCtrl', UserCtrl)\n  .name;\n","module.exports = '<jumbotron jumbo-image=\"$ctrl.user.picture || $ctrl.User.getDefaultUserImage(item.user._id)\"\\n           jumbo-background=\"::$ctrl.jumbotronBackground\"\\n           jumbo-classes=\"jumbotron-small\">\\n  <jumbo-title>{{ ::$ctrl.user.name }}</jumbo-title>\\n  <jumbo-text>\\n    <span class=\"f-lg\">\\n      {{ $ctrl.Act.counters[$ctrl.user._id] | number }}\\n    </span>\\n    acts of love\\n  </jumbo-text>\\n</jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-xs-12\">\\n        <h3 class=\"m-t-none m-b-md\">\\n          <i class=\"fa fa-fw fa-list\"></i>\\n          Activity Feed\\n        </h3>\\n\\n        <feed criteria=\"{ user: $ctrl.user._id }\"\\n              ng-show=\"$ctrl.User.isAuthenticated()\"></feed>\\n\\n        <p ng-hide=\"$ctrl.User.isAuthenticated()\">\\n          You must <a ng-click=\"$ctrl.Modal.openLogin()\" href>login</a>\\n          to see {{ $ctrl.user.firstName }}\\'s Activity Feed.\\n        </p>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';","/* globals LIOW_CONFIG */\n\nimport _ from 'lodash';\nimport angular from 'angular';\n\nconst defaults = {\n  serverUrl: 'http://localhost:3000',\n  facebookClientId: 'FACEBOOK_CLIENT_ID'\n};\n\nexport default angular.module('app.config', [])\n  .constant('config', _.defaults(LIOW_CONFIG || {}, defaults))\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\nexport default angular.module('app.directives', [])\n  .directive('sameAs', () => {\n    return {\n      require: 'ngModel',\n      scope: {\n        'otherValue': '=sameAs'\n      },\n      link: (scope, elm, attrs, ctrl) => {\n        ctrl.$validators.sameAs = modelValue => modelValue === scope.otherValue;\n      }\n    };\n  })\n  .directive('autofocus', /* @ngInject */ $timeout => {\n    return {\n      restrict: 'A',\n      link: (scope, elm) => {\n        $timeout(() => {\n          let element = _.head(elm);\n\n          element.focus();\n          _.isFunction(element.select) && element.select();\n        })\n      }\n    }\n  })\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\nexport default angular.module('app.filters.lodash', [])\n  .filter('capitalize', () => _.capitalize)\n  .filter('kebabCase', () => _.kebabCase)\n  .name;\n","import moment from 'moment';\nimport angular from 'angular';\n\nexport default angular.module('app.filters.moment', [])\n  .filter('moment', () => {\n    return (dateString, format = 'DD/MM/YYYY') => {\n      if (!dateString) { return; }\n\n      return moment(dateString).format(format);\n    };\n  })\n  .filter('fromNow', () => {\n    return (dateString) => {\n      if (!dateString) { return; }\n\n      return moment(dateString).fromNow();\n    };\n  })\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nclass Act {\n  /* @ngInject */\n  constructor($http, config) {\n    Object.assign(this, { $http });\n\n    this.baseUrl = `${config.serverUrl}/acts`;\n    this.counters = {};\n  }\n\n  /**\n   * Count acts for global, a user, a group, a campaign or a deed\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  count(params = {}) {\n    params = _.defaults(params, { count: true });\n\n    return this.$http.get(this.baseUrl, { params })\n      .then(response => {\n        response.data = Number(response.data);\n\n        if (params.user) this.counters[params.user] = response.data;\n        else if (params.group) this.counters[params.group] = response.data;\n        else if (params.campaign) this.counters[params.campaign] = response.data;\n        else if (params.deed) this.counters[params.deed] = response.data;\n        else this.counters.global = response.data;\n\n        return response;\n      });\n  }\n\n  /**\n   * Register a deed as done\n   *\n   * @param {object} deed\n   * @param {object} [group=null]\n   *\n   * @returns {HttpPromise}\n   */\n  done(deed, group = null) {\n    return this.$http.post(this.baseUrl, {\n      deed: deed._id,\n      group: _.has(group, '_id') ? group._id : null\n    });\n  }\n}\n\nexport default angular.module('app.services.Act', [\n  config\n])\n  .service('Act', Act)\n  .name;\n","import angular from 'angular';\nimport alertify from 'alertify.js';\n\nexport default angular.module('app.services.Alertify', [])\n  .factory('Alertify', () => {\n    alertify\n      .theme('bootstrap')\n      .logPosition('top right');\n\n    return {\n\n      /**\n       * Show a normal log message\n       *\n       * @param {string} message\n       * @param {string} icon\n       *\n       * @returns {object}\n       */\n      log(message, icon = 'info-circle') {\n        return alertify\n          .setLogTemplate(input => `<i class=\"fa fa-fw fa-${icon}\"></i> ${input}`)\n          .log(message);\n      },\n\n      /**\n       * Show a green success message\n       *\n       * @param {string} message\n       * @param {string} icon\n       *\n       * @returns {object}\n       */\n      success(message, icon = 'check-circle') {\n        return alertify\n          .setLogTemplate(input => `<i class=\"fa fa-fw fa-${icon}\"></i> ${input}`)\n          .success(message);\n      },\n\n      /**\n       * Show a red error message\n       *\n       * @param {string} message\n       * @param {string} icon\n       *\n       * @returns {object}\n       */\n      error(message, icon = 'exclamation-circle') {\n        return alertify\n          .setLogTemplate(input => `<i class=\"fa fa-fw fa-${icon}\"></i> ${input}`)\n          .error(message);\n      }\n\n    };\n  })\n  .name;\n","import angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nclass Campaign {\n  /* @ngInject */\n  constructor($http, $q, config) {\n    Object.assign(this, { $http, $q });\n\n    this.baseUrl = `${config.serverUrl}/campaigns`;\n  }\n\n  /**\n   * Find campaigns by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single campaign by params\n   *\n   * @param {object} params\n   *\n   * @returns {Promise}\n   */\n  findOne(params) {\n    return this.$q((resolve, reject) => {\n      this.find(params)\n        .then(response => {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Campaign not found'));\n          }\n        })\n        .catch(() => reject(new Error('Failed connecting to server')));\n    });\n  }\n\n  /**\n   * Save a new or existing campaign\n   *\n   * @param {object} campaign\n   *\n   * @returns {HttpPromise}\n   */\n  save(campaign) {\n    if (_.has(campaign, '_id')) {\n      return this.$http.put(`${this.baseUrl}/${campaign._id}`, campaign);\n    } else {\n      return this.$http.post(this.baseUrl, campaign);\n    }\n  }\n\n  /**\n   * Update an existing campaign\n   *\n   * @param {object}   campaign\n   * @param {object[]} changes\n   *\n   * @returns {HttpPromise}\n   */\n  update(campaign, changes) {\n    return this.$http.patch(`${this.baseUrl}/${campaign._id}`, changes);\n  }\n}\n\nexport default angular.module('app.services.Campaign', [\n  config\n])\n  .service('Campaign', Campaign)\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nclass Comment {\n  /* @ngInject */\n  constructor($http, config) {\n    Object.assign(this, { $http });\n\n    this.baseUrl = config.serverUrl;\n  }\n\n  /**\n   * Save a comment\n   *\n   * @param {object} comment\n   */\n  save(comment) {\n    let method = _.has(comment, '_id') ? 'put' : 'post',\n        url = `/comments${_.has(comment, '_id') ? `/${comment._id}` : ''}`;\n\n    switch(true) {\n      case _.has(comment.target, 'deed'):\n        url = `/deeds/${comment.target.deed}${url}`;\n        break;\n      case _.has(comment.target, 'group'):\n        url = `/groups/${comment.target.group}${url}`;\n        break;\n      case _.has(comment.target, 'comment'):\n        url = `/comments/${comment.target.comment}${url}`;\n        break;\n      case _.has(comment.target, 'act'):\n        url = `/acts/${comment.target.acts}${url}`;\n        break;\n    }\n\n    return this.$http[method](`${this.baseUrl}${url}`, comment);\n  }\n}\n\nexport default angular.module('si.services.Comment', [\n  config\n])\n  .service('Comment', Comment)\n  .name;\n","import angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nlet currentDeed = null;\n\nclass Deed {\n  /* @ngInject */\n  constructor($http, $q, config) {\n    Object.assign(this, { $http, $q });\n\n    this.baseUrl = `${config.serverUrl}/deeds`;\n  }\n\n  /**\n   * Find deeds by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single deed by params\n   *\n   * @param {object} params\n   *\n   * @returns {Promise}\n   */\n  findOne(params) {\n    return this.$q((resolve, reject) => {\n      this.find(params)\n        .then(response => {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Deed not found'));\n          }\n        })\n        .catch(() => reject(new Error('Failed connecting to server')));\n    });\n  }\n\n  /**\n   * Search for deeds with a search query and optional params\n   *\n   * @param {string} query\n   * @param {object} params\n   *\n   * @returns {HttpPromise}\n   */\n  search(query, params) {\n    params = _.merge({ query }, params);\n\n    return this.find(params);\n  }\n\n  /**\n   * Get a deed by ID\n   *\n   * @param {string} deedId\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  get(deedId, params = {}) {\n    return this.$http.get(`${this.baseUrl}/${deedId}`, { params });\n  }\n\n  /**\n   * Set the current deed\n   *\n   * @param {object|null} deed\n   */\n  set current(deed) {\n    currentDeed = deed;\n  }\n\n  /**\n   * Get the current deed\n   *\n   * @returns {object|null}\n   */\n  get current() {\n    return currentDeed;\n  }\n}\n\nexport default angular.module('app.services.Deed', [\n  config\n])\n  .service('Deed', Deed)\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\nimport uuid from 'uuid';\n\n// Module dependencies\nimport config from '../config';\n\nconst FEED_UPDATE_DELAY = 80;\nlet listeners = {};\n\nclass Feed {\n  /* @ngInject */\n  constructor($http, $timeout, config) {\n    Object.assign(this, { $http, $timeout });\n\n    this.baseUrl = `${config.serverUrl}/feeds`;\n  }\n\n  /**\n   * Find a feed by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Subscribe to a Feed update\n   *\n   * @param {function} callback\n   *\n   * @returns {function}\n   */\n  onUpdate(callback) {\n    let id = uuid.v4();\n    listeners[id] = { callback };\n\n    return () => delete listeners[id];\n  }\n\n  /**\n   * Publish an async Feed update\n   *\n   * @param {object} [options={}]\n   */\n  update(options = {}) {\n    this.$timeout(() => {\n      _.forOwn(listeners, listener => listener.callback(options));\n    }, FEED_UPDATE_DELAY);\n  }\n}\n\nexport default angular.module('app.services.Feed', [\n  config\n])\n  .service('Feed', Feed)\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\nimport User from './User';\n\nlet currentGroup = null;\n\nclass Group {\n  /* @ngInject */\n  constructor($http, $q, config, User) {\n    Object.assign(this, { $http, $q, User });\n\n    this.baseUrl = `${config.serverUrl}/groups`;\n  }\n\n  /**\n   * Find groups by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single group by params\n   *\n   * @param {object} params\n   *\n   * @returns {Promise}\n   */\n  findOne(params) {\n    return this.$q((resolve, reject) => {\n      this.find(params)\n        .then(response => {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Group not found'));\n          }\n        })\n        .catch(() => reject(new Error('Failed connecting to server')));\n    });\n  }\n\n  /**\n   * Search for groups with a search query and optional params\n   *\n   * @param {string} query\n   * @param {object} params\n   *\n   * @returns {HttpPromise}\n   */\n  search(query, params) {\n    params = _.merge({ query }, params);\n\n    return this.find(params);\n  }\n\n  /**\n   * Save a new or existing group\n   *\n   * @param {object} group\n   *\n   * @returns {HttpPromise}\n   */\n  save(group) {\n    if (_.has(group, '_id')) {\n      return this.$http.put(`${this.baseUrl}/${group._id}`, group);\n    } else {\n      return this.$http.post(this.baseUrl, group);\n    }\n  }\n\n  /**\n   * Check if a user is an admin of a group\n   *\n   * @param {object} group\n   * @param {object} user\n   *\n   * @returns {boolean}\n   */\n  isAdmin(group, user) {\n    return _.has(group, 'admins') && _.has(user, '_id') && ~group.admins.indexOf(user._id);\n  }\n\n  /**\n   * Set the current group\n   *\n   * @param {object|null} group\n   */\n  set current(group) {\n    currentGroup = group;\n\n    // If the current user is a member of this group, make it their active group\n    if (this.User.current && _.find(this.User.current.groups, ['id', group._id])) {\n      this.User.group = group;\n    }\n  }\n\n  /**\n   * Get the current group\n   *\n   * @returns {object|null}\n   */\n  get current() {\n    return currentGroup;\n  }\n}\n\nexport default angular.module('app.services.Group', [\n  config,\n  User\n])\n  .service('Group', Group)\n  .name;\n","export default class AlertCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, title, message) {\n    Object.assign(this, { $uibModalInstance, title, message });\n  }\n}\n","module.exports = '<div class=\"modal-header\" ng-if=\"::$ctrl.title\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.close()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.title }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-bind-html=\"::$ctrl.message\"></div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.$uibModalInstance.close()\">\\n    OK\\n  </button>\\n</div><!-- .modal-footer -->\\n';","import _ from 'lodash';\n\nexport default class CampaignEditCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, Alertify, Campaign, Deed, Modal, action, group, campaign) {\n    Object.assign(this, { $uibModalInstance, Alertify, Campaign, Deed, Modal, action, group });\n\n    this.error = null;\n    this.deeds = [];\n\n    this.loadDeeds();\n    if (!campaign) {\n      this.resetFields();\n    } else {\n      this.campaign = _.cloneDeep(campaign);\n    }\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n  resetFields() {\n    this.campaign = {\n      group: this.group._id,\n      deeds: []\n    };\n  }\n\n  /**\n   * Save the Campaign\n   *\n   * @param {object} campaign\n   */\n  save(campaign) {\n    let toSave = _.cloneDeep(campaign);\n    _.forEach(toSave.deeds, item => item.deed = item.deed._id);\n\n    this.saving = true;\n    this.error = null;\n    this.Campaign.save(toSave)\n      .then(() => {\n        this.$uibModalInstance.close();\n        this.Alertify.success(`${_.capitalize(this.action)}d campaign`);\n      })\n      .catch(response => this.error = response.data.error)\n      .then(() => this.saving = false);\n  }\n\n  /**\n   * Load all of the deeds\n   * Note: in the future we might not want to preload ALL deeds\n   */\n  loadDeeds() {\n    this.loading = true;\n    this.Deed.find({ fields: '_id,title' })\n      .then(response => this.deeds = _.differenceBy(\n        _.map(response.data, deed => ({ deed })),\n        this.campaign.deeds,\n        'deed._id'\n      ))\n      .catch(response => this.error = response.data.error)\n      .then(() => this.loading = false)\n  }\n}\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.action | capitalize }} Campaign for {{ ::$ctrl.group.name }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\" ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or\\n    <a href=\"mailto:support@loveisourweapon.com\">contact us</a> about it.\\n  </uib-alert>\\n\\n  <div class=\"col-xs-12\">\\n    <p>\\n      Create a campaign by dragging deeds from the \\'Available Deeds\\' list into the \\'Your Campaign\\' list.\\n      You can also re-order deeds within your campaign.\\n    </p>\\n    <p>\\n      We recommend choosing 1 deed for each week of the campaign,\\n      so choosing 6 deeds would work best for a 6 week campaign.\\n      In our experience with youth groups, a 4-6 week campaign works best\\n      to keep up interest and engagement with the campaign.\\n    </p>\\n  </div>\\n\\n  <form name=\"campaignEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.save($ctrl.campaign)\">\\n    <span ng-init=\"$ctrl.form = campaignEdit\"></span>\\n\\n    <div class=\"form-group\">\\n      <div class=\"col-xs-6\">\\n        <h5>Available Deeds</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"item in $ctrl.deeds track by item.deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(item.deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ item.deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n\\n      <div class=\"col-xs-6\">\\n        <h5>Your Campaign</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.campaign.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"item in $ctrl.campaign.deeds track by item.deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(item.deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ item.deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.campaign)\"\\n          ng-disabled=\"$ctrl.loading || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ ::$ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';","export default class ConfirmCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, title, message) {\n    Object.assign(this, { $uibModalInstance, title, message });\n  }\n}\n","module.exports = '<div class=\"modal-header\" ng-if=\"::$ctrl.title\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.title }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-bind-html=\"::$ctrl.message\"></div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.$uibModalInstance.close()\">\\n    OK\\n  </button>\\n</div><!-- .modal-footer -->\\n';","export default class DeedPreviewCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, Deed, deedId) {\n    Object.assign(this, { $uibModalInstance, Deed });\n\n    this.error = null;\n\n    this.loadDeed(deedId);\n  }\n\n  /**\n   * Load the deed by ID\n   *\n   * @param {string} deedId\n   */\n  loadDeed(deedId) {\n    this.loading = true;\n    this.Deed.get(deedId)\n      .then(response => this.deed = response.data)\n      .catch(response => this.error = 'Deed not found')\n      .then(() => this.loading = false);\n  }\n}\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Preview Deed\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-hide=\"$ctrl.loading || $ctrl.error\">\\n    <div class=\"embed-responsive embed-responsive-16by9\"\\n         ng-show=\"$ctrl.deed.videoUrl\">\\n      <youtube-video video-url=\"$ctrl.deed.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"deed-header m-b-md\">\\n      <img src=\"/images/deed.png\" class=\"img-responsive img-circle pull-left m-t-xxs m-r-sm\">\\n      <h1 class=\"m-none\">\\n        {{ $ctrl.deed.title }}\\n      </h1>\\n      <p class=\"m-none\">\\n        <span class=\\'f-lg\\'>12,001</span> acts of love\\n      </p>\\n    </div>\\n\\n    <div marked=\"$ctrl.deed.content\"></div>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n    <p class=\"text-center\">\\n      <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n    </p>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n    <uib-alert type=\"danger\">\\n      <i class=\"fa fa-exclamation-triangle\"></i>\\n      {{ $ctrl.error }}\\n    </uib-alert>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Close\\n  </button>\\n</div><!-- .modal-footer -->\\n';","export default class ForgotPasswordCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, $timeout, Alertify, User, email) {\n    Object.assign(this, { $uibModalInstance, Alertify, User, email });\n\n    // If email passed in, set the form field $dirty\n    $timeout(() => this.email && this.form.email.$setDirty());\n  }\n\n  /**\n   * Send email password recovery link\n   *\n   * @param {string} email\n   */\n  send(email) {\n    this.sending = true;\n    this.User.sendForgotPassword(email)\n      .then(() => {\n        this.$uibModalInstance.close();\n        this.Alertify.success(`Sent password recovery email to <strong>${email}</strong>`);\n      })\n      .catch(() => this.Alertify.error('Failed sending password recovery email'))\n      .then(() => this.sending = false);\n  }\n}\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Forgot your password?\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <form name=\"forgotPassword\"\\n        ng-submit=\"$ctrl.form.$valid && $ctrl.send($ctrl.email)\"\\n        novalidate>\\n    <span ng-init=\"$ctrl.form = forgotPassword\"></span>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.email.$invalid }\">\\n      <label for=\"email\"\\n             class=\"control-label\">\\n        Your email address\\n      </label>\\n      <input type=\"email\"\\n             class=\"form-control\"\\n             id=\"email\"\\n             name=\"email\"\\n             placeholder=\"Email address...\"\\n             ng-model=\"$ctrl.email\"\\n             required\\n             autofocus>\\n      <span class=\"help-block\"\\n            ng-show=\"$ctrl.form.$submitted && $ctrl.form.email.$error.email\">\\n        Please enter a valid email address.\\n      </span>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary btn-block\"\\n            ng-disabled=\"$ctrl.form.$pristine || $ctrl.sending\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.sending\"></i>\\n      Email me a recovery link\\n    </button>\\n  </form>\\n</div><!-- .modal-body -->\\n';","import _ from 'lodash';\nimport toMarkdown from 'to-markdown';\nimport showdown from 'showdown';\nlet converter = new showdown.Converter();\n\nexport default class GroupEditCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, $scope, $timeout, $location, Alertify, User, Group, Modal, action, group, users) {\n    Object.assign(this, { $uibModalInstance, $scope, $timeout, $location, Alertify, User, Group, Modal, action, group, users });\n\n    this.error = null;\n    this.setupCampaign = this.group ? false : true;\n\n    if (this.group) {\n      this.group.welcomeMessage = converter.makeHtml(this.group.welcomeMessage);\n    } else if (this.User.current) {\n      this.resetFields();\n    }\n  }\n\n  /**\n   * All elements compiled and linked\n   */\n  $postLink() {\n    if (this.User.current) {\n      this.setupMediumEditor();\n    }\n  }\n\n  /**\n   * Scope is being destroyed\n   */\n  $onDestroy() {\n    this.editor.destroy();\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n  resetFields() {\n    this.users = [this.User.current];\n\n    this.group = {\n      name: '',\n      logo: undefined,\n      coverImage: undefined,\n      admins: [this.User.current._id],\n      welcomeMessage: ''\n    };\n  }\n\n  /**\n   * Initialise the MediumEditor element, respond to input changes\n   *\n   * TODO: move MediumEditor setup and config to a component\n   */\n  setupMediumEditor() {\n    this.$timeout(() => {\n      this.editor = new MediumEditor(document.querySelectorAll('#welcomeMessage'), {\n        placeholder: { text: 'Enter a welcome message...', hideOnClick: false },\n        toolbar: { buttons: ['bold', 'italic', 'underline', 'anchor', 'orderedlist', 'unorderedlist'] },\n        autoLink: true\n      });\n\n      this.editor.subscribe('editableInput', (event, editable) => {\n        this.$scope.$apply(() => {\n          this.group.welcomeMessage = toMarkdown(editable.innerHTML, {\n            converters: [{\n              // Remove spans and divs\n              filter: function (node) {\n                return node.nodeName === 'SPAN' || node.nodeName === 'DIV';\n              },\n              replacement: function (content) {\n                return content;\n              }\n            }]\n          });\n        });\n      });\n    });\n  }\n\n  /**\n   * Prompt user to login, then reset the form fields and setup the MediumEditor\n   *\n   * @param {string} type\n   */\n  openModal(type) {\n    this.Modal[type === 'login' ? 'openLogin' : 'openSignup'](false)\n      .then(() => this.User.loadCurrent())\n      .then(() => this.resetFields())\n      .then(() => this.setupMediumEditor())\n      .catch(() => null);\n  }\n\n  /**\n   * Save the Group\n   *\n   * @param {object} group\n   */\n  save(group) {\n    this.saving = true;\n    this.error = null;\n    this.Group.save(group)\n      .then(response => {\n        this.Group.current = response.data;\n        this.User.loadCurrent();\n\n        this.$location.path(`/g/${response.data.urlName}`);\n        this.$uibModalInstance.close();\n        this.Alertify.success(`${_.capitalize(this.action)}d group <strong>${this.Group.current.name}</strong>`);\n\n        if (this.setupCampaign) {\n          this.$location.search('setupCampaign', true);\n        }\n      })\n      .catch(response => this.error = response.data.error)\n      .then(() => this.saving = false);\n  }\n}\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ ::$ctrl.action | capitalize }} Group\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\"\\n             ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or\\n    <a href=\"mailto:support@loveisourweapon.com\">contact us</a> about it.\\n  </uib-alert>\\n\\n  <form name=\"groupEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.form.$valid && $ctrl.save($ctrl.group)\"\\n        ng-if=\"$ctrl.User.isAuthenticated()\"\\n        novalidate>\\n    <span ng-init=\"$ctrl.form = groupEdit\"></span>\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.name || $ctrl.error.errors.urlName }\">\\n      <label for=\"name\"\\n             class=\"col-xs-3 control-label\">\\n        Name\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"name\"\\n               name=\"name\"\\n               placeholder=\"Group name...\"\\n               ng-model=\"$ctrl.group.name\"\\n               required\\n               autofocus>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.name || $ctrl.error.errors.urlName\">\\n          https://loveisourweapon.com/g/{{ ($ctrl.group.name | kebabCase) || \\'...\\' }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.name\"\\n              ng-repeat=\"error in $ctrl.error.errors.name\">\\n          {{ error.message }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.urlName\"\\n              ng-repeat=\"error in $ctrl.error.errors.urlName\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.logo }\">\\n      <label for=\"logo\"\\n             class=\"col-xs-3 control-label\">\\n        Logo\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"logo\"\\n               name=\"logo\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.logo\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.logo\">\\n          Ideally 500px x 500px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.logo\"\\n              ng-repeat=\"error in $ctrl.error.errors.logo\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.coverImage }\">\\n      <label for=\"coverImage\"\\n             class=\"col-xs-3 control-label\">\\n        Cover Image\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"coverImage\"\\n               name=\"coverImage\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.coverImage\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.coverImage\">\\n          Ideally 1280px x 580px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.coverImage\"\\n              ng-repeat=\"error in $ctrl.error.errors.coverImage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.admins }\">\\n      <label for=\"logo\"\\n             class=\"col-xs-3 control-label\">\\n        Admins\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <ui-select multiple\\n                   id=\"admins\"\\n                   name=\"admins\"\\n                   ng-model=\"$ctrl.group.admins\"\\n                   ng-disabled=\"!$ctrl.group._id\">\\n          <ui-select-match placeholder=\"Select admins...\"\\n                           ui-lock-choice=\"$item._id === $ctrl.User.current._id || $item._id === $ctrl.group.owner\">\\n            <img ng-src=\"{{ $item.picture || $ctrl.User.getDefaultUserImage($item._id) }}\"\\n                 class=\"img-circle b-xs m-xxs\"\\n                 style=\"width: 22px;\">\\n            {{ $item.name }}\\n          </ui-select-match>\\n          <ui-select-choices repeat=\"user._id as user in $ctrl.users | filter: { name: $select.search }\">\\n            <div class=\"clearfix\">\\n              <img ng-src=\"{{ user.picture || $ctrl.User.getDefaultUserImage(user._id) }}\"\\n                   class=\"img-circle pull-left b-xs m-r-xs\"\\n                   style=\"width: 22px;\">\\n              <div ng-bind-html=\"user.name | highlight: $select.search\"></div>\\n            </div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.welcomeMessage }\">\\n      <label for=\"welcomeMessage\"\\n             class=\"col-xs-3 control-label\">\\n        Intro Message\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <div class=\"well well-sm medium-editor m-none\">\\n          <textarea id=\"welcomeMessage\"\\n                    ng-model=\"$ctrl.group.welcomeMessage\"></textarea>\\n        </div>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.welcomeMessage\">\\n          Select text to add links, bold, italics, etc.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.welcomeMessage\"\\n              ng-repeat=\"error in $ctrl.error.errors.welcomeMessage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <hr ng-hide=\"$ctrl.group._id\">\\n\\n    <div class=\"form-group\"\\n         ng-hide=\"$ctrl.group._id\">\\n      <div class=\"col-xs-9 col-xs-push-3\">\\n        <p>\\n          <switch id=\"setupCampaign\"\\n                  name=\"setupCampaign\"\\n                  ng-model=\"$ctrl.setupCampaign\"\\n                  class=\"m-r-xs\"></switch>\\n          <span ng-click=\"$ctrl.setupCampaign = !$ctrl.setupCampaign\">\\n            Setup your first campaign now?\\n          </span>\\n        </p>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n\\n  <div class=\"container-fluid\"\\n       ng-if=\"!$ctrl.User.isAuthenticated()\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <p>Please sign up or login to setup a new group</p>\\n        <p>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary\"\\n                  ng-click=\"$ctrl.openModal(\\'signup\\')\">\\n            Sign up\\n          </button>\\n          &nbsp;&nbsp; or &nbsp;&nbsp;\\n          <button type=\"button\"\\n                  class=\"btn btn-default\"\\n                  ng-click=\"$ctrl.openModal(\\'login\\')\">\\n            Login\\n          </button>\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.group)\"\\n          ng-disabled=\"!$ctrl.User.isAuthenticated() || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ ::$ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport ngRoute from 'angular-route';\nimport ngSanitize from 'angular-sanitize';\nimport angularDragula from 'angular-dragula';\nimport uibs from 'angular-ui-bootstrap';\nimport uiSelect from 'ui-select';\nimport angularMarked from 'angular-marked';\nimport angularYoutube from 'angular-youtube-embed';\nimport 'angular-ui-switch'; // Not browserified\nimport lodashFilters from '../../filters/lodash';\nimport directives from '../../directives';\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Campaign from '../../services/Campaign';\nimport Deed from '../../services/Deed';\n\n// Modal controllers & templates\nimport LoginCtrl from './login/LoginCtrl';\nimport loginTpl from './login/login.html';\nimport SignupCtrl from './signup/SignupCtrl';\nimport signupTpl from './signup/signup.html';\nimport ForgotPasswordCtrl from './forgot-password/ForgotPasswordCtrl';\nimport forgotPasswordTpl from './forgot-password/forgotPassword.html';\nimport GroupEditCtrl from './group-edit/GroupEditCtrl';\nimport groupEditTpl from './group-edit/groupEdit.html';\nimport CampaignEditCtrl from './campaign-edit/CampaignEditCtrl';\nimport campaignEditTpl from './campaign-edit/campaignEdit.html';\nimport DeedPreviewCtrl from './deed-preview/DeedPreviewCtrl';\nimport deedPreviewTpl from './deed-preview/deedPreview.html';\nimport AlertCtrl from './alert/AlertCtrl';\nimport alertTpl from './alert/alert.html';\nimport ConfirmCtrl from './confirm/ConfirmCtrl';\nimport confirmTpl from './confirm/confirm.html';\n\nclass Modal {\n  /* @ngInject */\n  constructor($uibModal, $q, User) {\n    Object.assign(this, { $uibModal, $q, User });\n\n    this.defaults = {\n      controllerAs: '$ctrl',\n      size: 'md'\n    };\n  }\n\n  /**\n   * Open the login modal\n   *\n   * @param {boolean} [canSwitch=true]\n   *\n   * @returns {Promise}\n   */\n  openLogin(canSwitch = true) {\n    return this.$uibModal.open(_.defaults({\n      controller: LoginCtrl,\n      template: loginTpl,\n      size: 'sm',\n      resolve: {\n        canSwitch: this.$q.resolve(canSwitch)\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the sign up modal\n   *\n   * @param {boolean} [canSwitch=true]\n   *\n   * @returns {Promise}\n   */\n  openSignup(canSwitch = true) {\n    return this.$uibModal.open(_.defaults({\n      controller: SignupCtrl,\n      template: signupTpl,\n      resolve: {\n        canSwitch: this.$q.resolve(canSwitch)\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the forgot password modal\n   *\n   * @param {string|null} [email=null]\n   *\n   * @returns {Promise}\n   */\n  openForgotPassword(email = null) {\n    return this.$uibModal.open(_.defaults({\n      controller: ForgotPasswordCtrl,\n      template: forgotPasswordTpl,\n      size: 'sm',\n      resolve: {\n        email: this.$q.resolve(email)\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the group edit modal\n   *\n   * @param {string} [action='create']\n   * @param {object} [group=null]\n   *\n   * @returns {Promise}\n   */\n  openGroupEdit(action = 'create', group = null) {\n    return this.$uibModal.open(_.defaults({\n      controller: GroupEditCtrl,\n      template: groupEditTpl,\n      resolve: {\n        action: this.$q.resolve(action),\n        group: this.$q.resolve(angular.copy(group)),\n        users: group ? this.User.find({ groups: group._id }).then(response => response.data) : null\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the campaign edit modal\n   *\n   * @param {string} [action='create']\n   * @param {object} group\n   * @param {object} [campaign=null]\n   *\n   * @returns {Promise}\n   */\n  openCampaignEdit(action = 'create', group, campaign = null) {\n    return this.$uibModal.open(_.defaults({\n      controller: CampaignEditCtrl,\n      template: campaignEditTpl,\n      resolve: {\n        action: this.$q.resolve(action),\n        group: this.$q.resolve(angular.copy(group)),\n        campaign: this.$q.resolve(angular.copy(campaign))\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the deed preview modal\n   *\n   * @param {string} deedId\n   *\n   * @returns {Promise}\n   */\n  openDeedPreview(deedId) {\n    return this.$uibModal.open(_.defaults({\n      controller: DeedPreviewCtrl,\n      template: deedPreviewTpl,\n      resolve: {\n        deedId: this.$q.resolve(deedId)\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open an alert modal\n   *\n   * @param {string} message\n   * @param {string} [title='']\n   *\n   * @returns {Promise}\n   */\n  openAlert(message, title = '') {\n    return this.$uibModal.open(_.defaults({\n      controller: AlertCtrl,\n      template: alertTpl,\n      size: 'sm',\n      resolve: {\n        message: this.$q.resolve(message),\n        title: this.$q.resolve(title)\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open a confirm modal\n   *\n   * @param {string} message\n   * @param {string} [title='']\n   *\n   * @returns {Promise}\n   */\n  openConfirm(message, title = '') {\n    return this.$uibModal.open(_.defaults({\n      controller: ConfirmCtrl,\n      template: confirmTpl,\n      size: 'sm',\n      resolve: {\n        message: this.$q.resolve(message),\n        title: this.$q.resolve(title)\n      }\n    }, this.defaults)).result;\n  }\n}\n\nexport default angular.module('app.services.Modal', [\n  ngRoute,\n  ngSanitize,\n  angularDragula(angular),\n  uibs,\n  uiSelect,\n  angularMarked,\n  angularYoutube,\n  'uiSwitch',\n  lodashFilters,\n  directives,\n  Alertify,\n  User,\n  Group,\n  Campaign,\n  Deed\n])\n  .service('Modal', Modal)\n  .name;\n\n// Fixes to UI Bootstrap Modal\nangular.module(uibs)\n  .directive('uibModalWindow', /* @ngInject */ $window => {\n    return {\n      priority: 1,\n      link: (scope, element) => {\n        // Set max-height on modal-body\n        let window = angular.element($window);\n        window.on('resize', setMaxHeight);\n        scope.$on('$destroy', () => window.off('resize', setMaxHeight));\n        setMaxHeight();\n\n        function setMaxHeight() {\n          element\n            .find('.modal-body')\n            .css({\n              maxHeight: window.height() * 0.85 - 80,\n              overflowY: 'auto'\n            });\n        }\n      }\n    }\n  });\n","import _ from 'lodash';\n\nexport default class LoginCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, $routeParams, Alertify, User, Group, Modal, canSwitch) {\n    Object.assign(this, { $uibModalInstance, Alertify, User, Group, Modal, canSwitch });\n\n    this.error = null;\n    this.joinGroup = null;\n    if (_.has($routeParams, 'group')) {\n      this.joinGroup = true;\n    }\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {boolean|null} joinGroup\n   */\n  authenticateFacebook(joinGroup) {\n    let userData = {};\n    if (joinGroup) {\n      userData.group = this.Group.current._id;\n    }\n\n    this.loggingIn = true;\n    this.User.authenticateFacebook(userData)\n      .then(() => {\n        if (joinGroup) {\n          this.User.group = this.Group.current;\n        }\n\n        this.$uibModalInstance.close();\n        this.Alertify.success('Signed in');\n      })\n      .catch(() => this.Alertify.error('Failed signing in'))\n      .then(() => this.loggingIn = false);\n  }\n\n  /**\n   * Authenticate user with email and password\n   *\n   * @param {string}       email\n   * @param {string}       password\n   * @param {boolean|null} joinGroup\n   */\n  authenticateEmail(email, password, joinGroup) {\n    this.loggingIn = true;\n    this.User.authenticateEmail(email, password, joinGroup ? this.Group.current : null)\n      .then(response => {\n        if (joinGroup) {\n          this.User.group = this.Group.current;\n        }\n\n        this.$uibModalInstance.close();\n        this.Alertify.success('Signed in' + (!response.data.confirmed ? '. Please confirm your email address' : ''));\n      })\n      .catch(response => this.error = response.data.message)\n      .then(() => this.loggingIn = false);\n  }\n\n  /**\n   * Send confirm email address email\n   */\n  sendConfirmEmail(email) {\n    this.sending = true;\n    this.User.sendConfirmEmail(email)\n      .then(() => this.Alertify.success(`Sent confirmation email to <strong>${email}</strong>`))\n      .catch(() => this.Alertify.error('Failed sending confirmation email'))\n      .then(() => this.sending = false);\n  }\n}\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Login\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div ng-if=\"$ctrl.joinGroup !== null\">\\n    <p>\\n      <switch id=\"joinGroup\"\\n              name=\"joinGroup\"\\n              ng-model=\"$ctrl.joinGroup\"\\n              class=\"m-r-xs\"></switch>\\n      Join {{ ::$ctrl.Group.current.name }}\\n    </p>\\n    <hr>\\n  </div>\\n\\n  <p>\\n    <button ng-click=\"$ctrl.authenticateFacebook($ctrl.joinGroup)\"\\n            class=\"btn btn-facebook btn-block\"\\n            ng-disabled=\"$ctrl.loggingIn\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.loggingIn\"></i>\\n      <i class=\"fa fa-fw fa-facebook-official\" ng-hide=\"$ctrl.loggingIn\"></i>\\n      Sign in with Facebook\\n    </button>\\n  </p>\\n\\n  <hr>\\n\\n  <form ng-submit=\"$ctrl.authenticateEmail($ctrl.email, $ctrl.password, $ctrl.joinGroup)\">\\n    <uib-alert type=\"danger\"\\n               class=\"p-sm\"\\n               ng-show=\"$ctrl.error\">\\n      <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n      {{ $ctrl.error }}\\n      <span ng-show=\"$ctrl.error.indexOf(\\'Please confirm\\') === 0\">\\n        <i class=\"fa fa-fw fa-blank\"></i>\\n        <a ng-click=\"$ctrl.sendConfirmEmail($ctrl.email)\" href>\\n          Re-send confirmation email?\\n          <i ng-show=\"$ctrl.sending\" class=\"fa fa-cog fa-spin\"></i>\\n        </a>\\n      </span>\\n    </uib-alert>\\n\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\">\\n          <i class=\"fa fa-fw fa-at\"></i>\\n        </div>\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"email\"\\n               name=\"email\"\\n               ng-model=\"$ctrl.email\"\\n               placeholder=\"Email\"\\n               autofocus>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\">\\n          <i class=\"fa fa-fw fa-key\"></i>\\n        </div>\\n        <input type=\"password\"\\n               class=\"form-control\"\\n               id=\"password\"\\n               name=\"password\"\\n               ng-model=\"$ctrl.password\"\\n               placeholder=\"Password\">\\n      </div>\\n      <span class=\"help-block\">\\n        <a ng-click=\"$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openForgotPassword($ctrl.email)\" href>\\n          Forgot your password?\\n        </a>\\n      </span>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary btn-block\"\\n            ng-disabled=\"!$ctrl.email || !$ctrl.password || $ctrl.loggingIn\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.loggingIn\"></i>\\n      Login\\n    </button>\\n  </form>\\n\\n  <div ng-show=\"::$ctrl.canSwitch\">\\n    <hr>\\n    <p>\\n      Don\\'t have an account yet?\\n      <a ng-click=\"$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openSignup()\" href>Sign up now</a>\\n    </p>\\n  </div>\\n</div><!-- .modal-body -->\\n';","export default class SignupCtrl {\n  /* @ngInject */\n  constructor($uibModalInstance, $routeParams, Alertify, User, Group, Modal, canSwitch) {\n    Object.assign(this, { $uibModalInstance, Alertify, User, Group, Modal, canSwitch });\n\n    this.error = null;\n    this.joinGroup = null;\n    if (_.has($routeParams, 'group')) {\n      this.joinGroup = true;\n    }\n\n    this.resetFields();\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n  resetFields() {\n    this.user = {\n      email: '',\n      password: '',\n      firstName: '',\n      lastName: '',\n      picture: undefined\n    };\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {boolean|null} joinGroup\n   */\n  authenticateFacebook(joinGroup) {\n    let userData = {};\n    if (joinGroup) {\n      userData.group = this.Group.current._id;\n    }\n\n    this.saving = true;\n    this.User.authenticateFacebook(userData)\n      .then(() => {\n        if (joinGroup) {\n          this.User.group = this.Group.current;\n        }\n\n        this.$uibModalInstance.close();\n        this.Alertify.success('Signed in');\n      })\n      .catch(() => this.Alertify.error('Failed signing in'))\n      .then(() => this.saving = false);\n  }\n\n  /**\n   * Save the User\n   *\n   * @param {object} user\n   * @param {boolean} joinGroup\n   */\n  save(user, joinGroup) {\n    if (joinGroup) {\n      user.groups = [this.Group.current._id];\n    }\n\n    this.saving = true;\n    this.error = null;\n    this.User.save(user)\n      .then(() => {\n        if (joinGroup) {\n          this.User.group = this.Group.current;\n        }\n\n        this.Alertify.success('Signed up. Please confirm your email address');\n        return this.User.authenticateEmail(user.email, user.password);\n      })\n      .then(() => this.$uibModalInstance.close())\n      .catch(response => this.error = response.data.error)\n      .then(() => this.saving = false);\n  }\n}\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Sign up\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div ng-if=\"$ctrl.joinGroup !== null\">\\n    <p>\\n      <switch id=\"joinGroup\"\\n              name=\"joinGroup\"\\n              ng-model=\"$ctrl.joinGroup\"\\n              class=\"m-r-xs\"></switch>\\n      Join {{ ::$ctrl.Group.current.name }}\\n    </p>\\n    <hr>\\n  </div>\\n\\n  <p>\\n    <button ng-click=\"$ctrl.authenticateFacebook($ctrl.joinGroup)\"\\n            class=\"btn btn-facebook btn-block\"\\n            ng-disabled=\"$ctrl.saving\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n      <i class=\"fa fa-fw fa-facebook-official\" ng-hide=\"$ctrl.saving\"></i>\\n      Sign up with Facebook\\n    </button>\\n  </p>\\n\\n  <hr>\\n\\n  <form name=\"userEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.form.$valid && $ctrl.save($ctrl.user, $ctrl.joinGroup)\"\\n        novalidate>\\n    <span ng-init=\"$ctrl.form = userEdit\"></span>\\n\\n    <uib-alert type=\"danger\"\\n               ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n      <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n      Failed sending request. Please try again or\\n      <a href=\"mailto:support@loveisourweapon.com\">contact us</a> about it.\\n    </uib-alert>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.email || ($ctrl.form.$submitted && $ctrl.form.email.$invalid) }\">\\n      <label for=\"email\"\\n             class=\"col-xs-3 control-label\">\\n        Email\\n      </label>\\n      <div class=\"col-xs-8\">\\n        <input type=\"email\"\\n               class=\"form-control\"\\n               id=\"email\"\\n               name=\"email\"\\n               placeholder=\"Email address...\"\\n               ng-model=\"$ctrl.user.email\"\\n               required\\n               autofocus>\\n        <span class=\"help-block\"\\n              ng-show=\"!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.email.$error.email\">\\n          Please enter a valid email address.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.email\"\\n              ng-repeat=\"error in $ctrl.error.errors.email\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n    ng-class=\"{ \\'has-error\\': $ctrl.form.$submitted && $ctrl.form.firstName.$invalid }\">\\n      <label for=\"firstName\"\\n             class=\"col-xs-3 control-label\">\\n        Name\\n      </label>\\n      <div class=\"col-xs-4\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"firstName\"\\n               name=\"firstName\"\\n               placeholder=\"First...\"\\n               ng-model=\"$ctrl.user.firstName\"\\n               required>\\n      </div>\\n      <div class=\"col-xs-4\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"lastName\"\\n               name=\"lastName\"\\n               placeholder=\"Last...\"\\n               ng-model=\"$ctrl.user.lastName\">\\n      </div>\\n      <span class=\"help-block col-xs-8 col-xs-push-3\"\\n            ng-show=\"$ctrl.form.$submitted && $ctrl.form.firstName.$error.required\">\\n        First name is required.\\n      </span>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.password || ($ctrl.form.$submitted && $ctrl.form.password.$invalid) }\">\\n      <label for=\"password\"\\n             class=\"col-xs-3 control-label\">\\n        Password\\n      </label>\\n      <div class=\"col-xs-8\">\\n        <input type=\"password\"\\n               class=\"form-control\"\\n               id=\"password\"\\n               name=\"password\"\\n               placeholder=\"Enter a password...\"\\n               ng-model=\"$ctrl.user.password\"\\n               required\\n               minlength=\"8\">\\n        <span class=\"help-block\"\\n              ng-show=\"!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.password.$error.required\">\\n          Password is required.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"!$ctrl.error.errors.email && $ctrl.form.$submitted && $ctrl.form.password.$error.minlength\">\\n          Password must be at least 8 characters.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.password\"\\n              ng-repeat=\"error in $ctrl.error.errors.password\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.picture }\">\\n      <label for=\"picture\"\\n             class=\"col-xs-3 control-label\">\\n        Picture\\n      </label>\\n      <div class=\"col-xs-8\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"picture\"\\n               name=\"picture\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.user.picture\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.picture\">\\n          Ideally 200px x 200px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.picture\"\\n              ng-repeat=\"error in $ctrl.error.errors.picture\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\"\\n            class=\"btn btn-primary btn-block\"\\n            ng-disabled=\"$ctrl.form.$pristine || $ctrl.saving\">\\n      <i class=\"fa fa-fw fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n      Sign up\\n    </button>\\n  </form>\\n\\n  <div ng-show=\"::$ctrl.canSwitch\">\\n    <hr>\\n    <p>\\n      Already have an account?\\n      <a ng-click=\"$ctrl.$uibModalInstance.dismiss() && $ctrl.Modal.openLogin()\" href>Login now</a>\\n    </p>\\n  </div>\\n</div><!-- .modal-body -->\\n';","import _ from 'lodash';\nimport angular from 'angular';\nimport uuid from 'uuid';\nimport seedrandom from 'seedrandom';\n\n// Module dependencies\nimport config from '../config';\nimport satellizer from 'satellizer';\nimport Alertify from './Alertify';\n\nconst NUM_IMAGES = 12;\nvar defaultImagesDict = {};\n\nlet currentUser = null;\nlet currentGroup = null;\nlet listeners = {};\n\nclass User {\n  /* @ngInject */\n  constructor($auth, $http, $q, config, Alertify) {\n    Object.assign(this, { $auth, $http, $q, Alertify });\n\n    this.baseUrl = `${config.serverUrl}/users`;\n    this.authUrl = `${config.serverUrl}/auth`;\n\n    this.loadCurrent().catch(() => null);\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {object} [userData={}]\n   *\n   * @returns {Promise}\n   */\n  authenticateFacebook(userData = {}) {\n    return this.$auth.authenticate('facebook', userData)\n      .then(response => {\n        this.$auth.setToken(response.data.token);\n        return this.loadCurrent();\n      });\n  }\n\n  /**\n   * Authenticate user with email and password\n   *\n   * @param {string} email\n   * @param {string} password\n   * @param {object} [group=null]\n   *\n   * @returns {Promise}\n   */\n  authenticateEmail(email, password, group = null) {\n    if (!email || !password) {\n      return this.$q.reject({ data: { message: 'Email and/or password not provided' } });\n    }\n\n    let userData = { email, password };\n    if (_.has(group, '_id')) {\n      userData.group = group._id;\n    }\n\n    return this.$auth.login(userData)\n      .then(response => {\n        this.$auth.setToken(response.data.token);\n        return this.loadCurrent();\n      });\n  }\n\n  /**\n   * Logout the current user\n   *\n   * @returns {Promise}\n   */\n  logout() {\n    return this.$auth.logout()\n      .then(() => {\n        currentUser = null;\n        currentGroup = null;\n        this.pub('logout');\n        this.Alertify.success('Logged out');\n      });\n  }\n\n  /**\n   * Get the current user from the server\n   *\n   * @returns {Promise}\n   */\n  loadCurrent() {\n    if (!this.isAuthenticated()) {\n      return this.$q.reject('Not logged in')\n    }\n\n    return this.$http.get(`${this.baseUrl}/me`)\n      .then(response => {\n        currentUser = response.data;\n        this.pub('login', currentUser);\n\n        // Set the current group as the users first group\n        if (currentUser.groups.length) {\n          currentGroup = currentUser.groups[0];\n        }\n\n        return response;\n      });\n  }\n\n  /**\n   * Find users by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single user by Id\n   *\n   * @param {string} userId\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  findById(userId, params) {\n    return this.$http.get(`${this.baseUrl}/${userId}`, { params });\n  }\n\n  /**\n   * Save a new or existing user\n   *\n   * @param {object} user\n   *\n   * @returns {HttpPromise}\n   */\n  save(user) {\n    if (_.has(user, '_id')) {\n      return this.$http.put(`${this.baseUrl}/${user._id}`, user);\n    } else {\n      return this.$http.post(this.baseUrl, user);\n    }\n  }\n\n  /**\n   * Update an existing user\n   *\n   * @param {object}   user\n   * @param {object[]} changes\n   *\n   * @returns {Promise}\n   */\n  update(user, changes) {\n    return this.$http.patch(`${this.baseUrl}/${user._id}`, changes)\n      .then(response => this.loadCurrent());\n  }\n\n  /**\n   * Check if there is a currently logged in user\n   *\n   * @returns {boolean}\n   */\n  isAuthenticated() {\n    return this.$auth.isAuthenticated();\n  }\n\n  /**\n   * Check if the user is the currently logged in user\n   *\n   * @param {object} user\n   *\n   * @returns {boolean}\n   */\n  isLoggedInUser(user) {\n    return currentUser && currentUser._id === user._id;\n  }\n\n  /**\n   * Check if the current user is a member of a group\n   *\n   * @param {object} group\n   *\n   * @returns {boolean}\n   */\n  isMemberOfGroup(group) {\n    return (\n      _.has(currentUser, 'groups') &&\n      _.some(currentUser.groups, userGroup => userGroup._id === (_.has(group, '_id') ? group._id : group))\n    );\n  }\n\n  /**\n   * Check if the current user has a common group\n   *\n   * @param {object[]} groups\n   *\n   * @returns {boolean}\n   */\n  hasCommonGroup(groups) {\n    return _.some(groups, this.isMemberOfGroup);\n  }\n\n  /**\n   * Send forgot password email\n   *\n   * @param {string} email\n   *\n   * @returns {HttpPromise}\n   */\n  sendForgotPassword(email) {\n    return this.$http.get(`${this.authUrl}/forgot`, { params: { email } });\n  }\n\n  /**\n   * Reset user's password\n   *\n   * @param {string} password\n   * @param {string} token\n   *\n   * @returns {HttpPromise}\n   */\n  resetPassword(password, token) {\n    return this.$http.post(`${this.authUrl}/reset`, { password, token });\n  }\n\n  /**\n   * Send confirm email address email\n   *\n   * @param {string} email\n   *\n   * @returns {HttpPromise}\n   */\n  sendConfirmEmail(email) {\n    return this.$http.get(`${this.authUrl}/confirm`, { params: { email } });\n  }\n\n  /**\n   * Confirm email address with token\n   *\n   * @param {string} token\n   *\n   * @returns {HttpPromise}\n   */\n  confirmEmail(token) {\n    return this.$http.post(`${this.authUrl}/confirm`, { token });\n  }\n\n  /**\n   * Get a default user image seeded by userId\n   *\n   * @param {string} userId\n   *\n   * @returns {string}\n   */\n  getDefaultUserImage(userId) {\n    if (!userId) { return `/images/user0.png`; }\n\n    if (!_.has(defaultImagesDict, userId)) {\n      defaultImagesDict[userId] = Math.floor(seedrandom(userId)() * NUM_IMAGES);\n    }\n\n    return `/images/user${defaultImagesDict[userId]}.png`;\n  }\n\n  /**\n   * Subscribe to a User update\n   *\n   * @param {string}   key\n   * @param {function} callback\n   *\n   * @returns {function}\n   */\n  on(key, callback) {\n    let id = uuid.v4();\n    listeners[id] = { key, callback };\n\n    return () => delete listeners[id];\n  }\n\n  /**\n   * Publish a User update\n   *\n   * @param {string} key\n   * @param {*}      [data=null]\n   */\n  pub(key, data = null) {\n    _.forOwn(listeners, listener => {\n      if (listener.key === key) {\n        listener.callback(data);\n      }\n    });\n  }\n\n  /**\n   * Get the current logged in user\n   *\n   * @returns {object|null}\n   */\n  get current() {\n    return currentUser;\n  }\n\n  /**\n   * Set the current group of the logged in user\n   *\n   * @param {object|null} group\n   */\n  set group(group) {\n    currentGroup = group;\n  }\n\n  /**\n   * Get the current group of the logged in user\n   *\n   * @returns {object|null}\n   */\n  get group() {\n    return currentGroup;\n  }\n}\n\nexport default angular.module('app.services.User', [\n  config,\n  satellizer,\n  Alertify\n])\n  .config(/* @ngInject */($authProvider, config) => {\n    $authProvider.loginUrl = `${config.serverUrl}/auth/login`;\n    $authProvider.signupUrl = `${config.serverUrl}/auth/signup`;\n    $authProvider.facebook({\n      clientId: config.facebookClientId,\n      url: `${config.serverUrl}/auth/facebook`\n    });\n  })\n  .service('User', User)\n  .name;\n","/**\n * This file automatically generated from `build.js`.\n * Do not manually edit.\n */\n\nmodule.exports = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"blockquote\",\n  \"canvas\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"main\",\n  \"nav\",\n  \"noscript\",\n  \"ol\",\n  \"output\",\n  \"p\",\n  \"pre\",\n  \"section\",\n  \"table\",\n  \"tfoot\",\n  \"ul\",\n  \"video\"\n];\n","'use strict';\n\nvar voidElements = require('void-elements');\nObject.keys(voidElements).forEach(function (name) {\n  voidElements[name.toUpperCase()] = 1;\n});\n\nvar blockElements = {};\nrequire('block-elements').forEach(function (name) {\n  blockElements[name.toUpperCase()] = 1;\n});\n\n/**\n * isBlockElem(node) determines if the given node is a block element.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nfunction isBlockElem(node) {\n  return !!(node && blockElements[node.nodeName]);\n}\n\n/**\n * isVoid(node) determines if the given node is a void element.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nfunction isVoid(node) {\n  return !!(node && voidElements[node.nodeName]);\n}\n\n/**\n * whitespace(elem [, isBlock]) removes extraneous whitespace from an\n * the given element. The function isBlock may optionally be passed in\n * to determine whether or not an element is a block element; if none\n * is provided, defaults to using the list of block elements provided\n * by the `block-elements` module.\n *\n * @param {Node} elem\n * @param {Function} blockTest\n */\nfunction collapseWhitespace(elem, isBlock) {\n  if (!elem.firstChild || elem.nodeName === 'PRE') return;\n\n  if (typeof isBlock !== 'function') {\n    isBlock = isBlockElem;\n  }\n\n  var prevText = null;\n  var prevVoid = false;\n\n  var prev = null;\n  var node = next(prev, elem);\n\n  while (node !== elem) {\n    if (node.nodeType === 3) {\n      // Node.TEXT_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) && !prevVoid && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue;\n      }\n\n      node.data = text;\n      prevText = node;\n    } else if (node.nodeType === 1) {\n      // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        prevVoid = false;\n      } else if (isVoid(node)) {\n        // Avoid trimming space around non-block, non-BR void elements.\n        prevText = null;\n        prevVoid = true;\n      }\n    } else {\n      node = remove(node);\n      continue;\n    }\n\n    var nextNode = next(prev, node);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove(node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next;\n}\n\n/**\n * next(prev, current) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @return {Node}\n */\nfunction next(prev, current) {\n  if (prev && prev.parentNode === current || current.nodeName === 'PRE') {\n    return current.nextSibling || current.parentNode;\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode;\n}\n\nmodule.exports = collapseWhitespace;\n","/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * json-patch-duplex.js version: 0.5.7\n * (c) 2013 Joachim Wester\n * MIT license\n */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar OriginalError = Error;\nvar jsonpatch;\n(function (jsonpatch) {\n    var _objectKeys = function (obj) {\n        if (_isArray(obj)) {\n            var keys = new Array(obj.length);\n            for (var k = 0; k < keys.length; k++) {\n                keys[k] = \"\" + k;\n            }\n            return keys;\n        }\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var i in obj) {\n            if (obj.hasOwnProperty(i)) {\n                keys.push(i);\n            }\n        }\n        return keys;\n    };\n    function _equals(a, b) {\n        switch (typeof a) {\n            case 'undefined': //backward compatibility, but really I think we should return false\n            case 'boolean':\n            case 'string':\n            case 'number':\n                return a === b;\n            case 'object':\n                if (a === null)\n                    return b === null;\n                if (_isArray(a)) {\n                    if (!_isArray(b) || a.length !== b.length)\n                        return false;\n                    for (var i = 0, l = a.length; i < l; i++)\n                        if (!_equals(a[i], b[i]))\n                            return false;\n                    return true;\n                }\n                var bKeys = _objectKeys(b);\n                var bLength = bKeys.length;\n                if (_objectKeys(a).length !== bLength)\n                    return false;\n                for (var i = 0; i < bLength; i++)\n                    if (!_equals(a[i], b[i]))\n                        return false;\n                return true;\n            default:\n                return false;\n        }\n    }\n    /* We use a Javascript hash to store each\n     function. Each hash entry (property) uses\n     the operation identifiers specified in rfc6902.\n     In this way, we can map each patch operation\n     to its dedicated function in efficient way.\n     */\n    /* The operations applicable to an object */\n    var objOps = {\n        add: function (obj, key) {\n            obj[key] = this.value;\n            return true;\n        },\n        remove: function (obj, key) {\n            delete obj[key];\n            return true;\n        },\n        replace: function (obj, key) {\n            obj[key] = this.value;\n            return true;\n        },\n        move: function (obj, key, tree) {\n            var temp = { op: \"_get\", path: this.from };\n            apply(tree, [temp]);\n            apply(tree, [\n                { op: \"remove\", path: this.from }\n            ]);\n            apply(tree, [\n                { op: \"add\", path: this.path, value: temp.value }\n            ]);\n            return true;\n        },\n        copy: function (obj, key, tree) {\n            var temp = { op: \"_get\", path: this.from };\n            apply(tree, [temp]);\n            apply(tree, [\n                { op: \"add\", path: this.path, value: temp.value }\n            ]);\n            return true;\n        },\n        test: function (obj, key) {\n            return _equals(obj[key], this.value);\n        },\n        _get: function (obj, key) {\n            this.value = obj[key];\n        }\n    };\n    /* The operations applicable to an array. Many are the same as for the object */\n    var arrOps = {\n        add: function (arr, i) {\n            arr.splice(i, 0, this.value);\n            return true;\n        },\n        remove: function (arr, i) {\n            arr.splice(i, 1);\n            return true;\n        },\n        replace: function (arr, i) {\n            arr[i] = this.value;\n            return true;\n        },\n        move: objOps.move,\n        copy: objOps.copy,\n        test: objOps.test,\n        _get: objOps._get\n    };\n    /* The operations applicable to object root. Many are the same as for the object */\n    var rootOps = {\n        add: function (obj) {\n            rootOps.remove.call(this, obj);\n            for (var key in this.value) {\n                if (this.value.hasOwnProperty(key)) {\n                    obj[key] = this.value[key];\n                }\n            }\n            return true;\n        },\n        remove: function (obj) {\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    objOps.remove.call(this, obj, key);\n                }\n            }\n            return true;\n        },\n        replace: function (obj) {\n            apply(obj, [\n                { op: \"remove\", path: this.path }\n            ]);\n            apply(obj, [\n                { op: \"add\", path: this.path, value: this.value }\n            ]);\n            return true;\n        },\n        move: objOps.move,\n        copy: objOps.copy,\n        test: function (obj) {\n            return (JSON.stringify(obj) === JSON.stringify(this.value));\n        },\n        _get: function (obj) {\n            this.value = obj;\n        }\n    };\n    var observeOps = {\n        add: function (patches, path) {\n            var patch = {\n                op: \"add\",\n                path: path + escapePathComponent(this.name),\n                value: this.object[this.name] };\n            patches.push(patch);\n        },\n        'delete': function (patches, path) {\n            var patch = {\n                op: \"remove\",\n                path: path + escapePathComponent(this.name)\n            };\n            patches.push(patch);\n        },\n        update: function (patches, path) {\n            var patch = {\n                op: \"replace\",\n                path: path + escapePathComponent(this.name),\n                value: this.object[this.name]\n            };\n            patches.push(patch);\n        }\n    };\n    function escapePathComponent(str) {\n        if (str.indexOf('/') === -1 && str.indexOf('~') === -1)\n            return str;\n        return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n    }\n    function _getPathRecursive(root, obj) {\n        var found;\n        for (var key in root) {\n            if (root.hasOwnProperty(key)) {\n                if (root[key] === obj) {\n                    return escapePathComponent(key) + '/';\n                }\n                else if (typeof root[key] === 'object') {\n                    found = _getPathRecursive(root[key], obj);\n                    if (found != '') {\n                        return escapePathComponent(key) + '/' + found;\n                    }\n                }\n            }\n        }\n        return '';\n    }\n    function getPath(root, obj) {\n        if (root === obj) {\n            return '/';\n        }\n        var path = _getPathRecursive(root, obj);\n        if (path === '') {\n            throw new OriginalError(\"Object not found in root\");\n        }\n        return '/' + path;\n    }\n    var beforeDict = [];\n    var Mirror = (function () {\n        function Mirror(obj) {\n            this.observers = [];\n            this.obj = obj;\n        }\n        return Mirror;\n    })();\n    var ObserverInfo = (function () {\n        function ObserverInfo(callback, observer) {\n            this.callback = callback;\n            this.observer = observer;\n        }\n        return ObserverInfo;\n    })();\n    function getMirror(obj) {\n        for (var i = 0, ilen = beforeDict.length; i < ilen; i++) {\n            if (beforeDict[i].obj === obj) {\n                return beforeDict[i];\n            }\n        }\n    }\n    function getObserverFromMirror(mirror, callback) {\n        for (var j = 0, jlen = mirror.observers.length; j < jlen; j++) {\n            if (mirror.observers[j].callback === callback) {\n                return mirror.observers[j].observer;\n            }\n        }\n    }\n    function removeObserverFromMirror(mirror, observer) {\n        for (var j = 0, jlen = mirror.observers.length; j < jlen; j++) {\n            if (mirror.observers[j].observer === observer) {\n                mirror.observers.splice(j, 1);\n                return;\n            }\n        }\n    }\n    function unobserve(root, observer) {\n        observer.unobserve();\n    }\n    jsonpatch.unobserve = unobserve;\n    function deepClone(obj) {\n        if (typeof obj === \"object\") {\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        }\n        else {\n            return obj; //no need to clone primitives\n        }\n    }\n    function observe(obj, callback) {\n        var patches = [];\n        var root = obj;\n        var observer;\n        var mirror = getMirror(obj);\n        if (!mirror) {\n            mirror = new Mirror(obj);\n            beforeDict.push(mirror);\n        }\n        else {\n            observer = getObserverFromMirror(mirror, callback);\n        }\n        if (observer) {\n            return observer;\n        }\n        observer = {};\n        mirror.value = deepClone(obj);\n        if (callback) {\n            observer.callback = callback;\n            observer.next = null;\n            var intervals = this.intervals || [100, 1000, 10000, 60000];\n            if (intervals.push === void 0) {\n                throw new OriginalError(\"jsonpatch.intervals must be an array\");\n            }\n            var currentInterval = 0;\n            var dirtyCheck = function () {\n                generate(observer);\n            };\n            var fastCheck = function () {\n                clearTimeout(observer.next);\n                observer.next = setTimeout(function () {\n                    dirtyCheck();\n                    currentInterval = 0;\n                    observer.next = setTimeout(slowCheck, intervals[currentInterval++]);\n                }, 0);\n            };\n            var slowCheck = function () {\n                dirtyCheck();\n                if (currentInterval == intervals.length)\n                    currentInterval = intervals.length - 1;\n                observer.next = setTimeout(slowCheck, intervals[currentInterval++]);\n            };\n            if (typeof window !== 'undefined') {\n                if (window.addEventListener) {\n                    window.addEventListener('mousedown', fastCheck);\n                    window.addEventListener('mouseup', fastCheck);\n                    window.addEventListener('keydown', fastCheck);\n                }\n                else {\n                    document.documentElement.attachEvent('onmousedown', fastCheck);\n                    document.documentElement.attachEvent('onmouseup', fastCheck);\n                    document.documentElement.attachEvent('onkeydown', fastCheck);\n                }\n            }\n            observer.next = setTimeout(slowCheck, intervals[currentInterval++]);\n        }\n        observer.patches = patches;\n        observer.object = obj;\n        observer.unobserve = function () {\n            generate(observer);\n            clearTimeout(observer.next);\n            removeObserverFromMirror(mirror, observer);\n            if (typeof window !== 'undefined') {\n                if (window.removeEventListener) {\n                    window.removeEventListener('mousedown', fastCheck);\n                    window.removeEventListener('mouseup', fastCheck);\n                    window.removeEventListener('keydown', fastCheck);\n                }\n                else {\n                    document.documentElement.detachEvent('onmousedown', fastCheck);\n                    document.documentElement.detachEvent('onmouseup', fastCheck);\n                    document.documentElement.detachEvent('onkeydown', fastCheck);\n                }\n            }\n        };\n        mirror.observers.push(new ObserverInfo(callback, observer));\n        return observer;\n    }\n    jsonpatch.observe = observe;\n    function generate(observer) {\n        var mirror;\n        for (var i = 0, ilen = beforeDict.length; i < ilen; i++) {\n            if (beforeDict[i].obj === observer.object) {\n                mirror = beforeDict[i];\n                break;\n            }\n        }\n        _generate(mirror.value, observer.object, observer.patches, \"\");\n        if (observer.patches.length) {\n            apply(mirror.value, observer.patches);\n        }\n        var temp = observer.patches;\n        if (temp.length > 0) {\n            observer.patches = [];\n            if (observer.callback) {\n                observer.callback(temp);\n            }\n        }\n        return temp;\n    }\n    jsonpatch.generate = generate;\n    // Dirty check if obj is different from mirror, generate patches and update mirror\n    function _generate(mirror, obj, patches, path) {\n        var newKeys = _objectKeys(obj);\n        var oldKeys = _objectKeys(mirror);\n        var changed = false;\n        var deleted = false;\n        //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n        for (var t = oldKeys.length - 1; t >= 0; t--) {\n            var key = oldKeys[t];\n            var oldVal = mirror[key];\n            if (obj.hasOwnProperty(key)) {\n                var newVal = obj[key];\n                if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null) {\n                    _generate(oldVal, newVal, patches, path + \"/\" + escapePathComponent(key));\n                }\n                else {\n                    if (oldVal != newVal) {\n                        changed = true;\n                        patches.push({ op: \"replace\", path: path + \"/\" + escapePathComponent(key), value: deepClone(newVal) });\n                    }\n                }\n            }\n            else {\n                patches.push({ op: \"remove\", path: path + \"/\" + escapePathComponent(key) });\n                deleted = true; // property has been deleted\n            }\n        }\n        if (!deleted && newKeys.length == oldKeys.length) {\n            return;\n        }\n        for (var t = 0; t < newKeys.length; t++) {\n            var key = newKeys[t];\n            if (!mirror.hasOwnProperty(key)) {\n                patches.push({ op: \"add\", path: path + \"/\" + escapePathComponent(key), value: deepClone(obj[key]) });\n            }\n        }\n    }\n    var _isArray;\n    if (Array.isArray) {\n        _isArray = Array.isArray;\n    }\n    else {\n        _isArray = function (obj) {\n            return obj.push && typeof obj.length === 'number';\n        };\n    }\n    //3x faster than cached /^\\d+$/.test(str)\n    function isInteger(str) {\n        var i = 0;\n        var len = str.length;\n        var charCode;\n        while (i < len) {\n            charCode = str.charCodeAt(i);\n            if (charCode >= 48 && charCode <= 57) {\n                i++;\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    /// Apply a json-patch operation on an object tree\n    function apply(tree, patches, validate) {\n        var result = false, p = 0, plen = patches.length, patch, key;\n        while (p < plen) {\n            patch = patches[p];\n            p++;\n            // Find the object\n            var path = patch.path || \"\";\n            var keys = path.split('/');\n            var obj = tree;\n            var t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n            var len = keys.length;\n            var existingPathFragment = undefined;\n            while (true) {\n                key = keys[t];\n                if (validate) {\n                    if (existingPathFragment === undefined) {\n                        if (obj[key] === undefined) {\n                            existingPathFragment = keys.slice(0, t).join('/');\n                        }\n                        else if (t == len - 1) {\n                            existingPathFragment = patch.path;\n                        }\n                        if (existingPathFragment !== undefined) {\n                            this.validator(patch, p - 1, tree, existingPathFragment);\n                        }\n                    }\n                }\n                t++;\n                if (key === undefined) {\n                    if (t >= len) {\n                        result = rootOps[patch.op].call(patch, obj, key, tree); // Apply patch\n                        break;\n                    }\n                }\n                if (_isArray(obj)) {\n                    if (key === '-') {\n                        key = obj.length;\n                    }\n                    else {\n                        if (validate && !isInteger(key)) {\n                            throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", p - 1, patch.path, patch);\n                        }\n                        key = parseInt(key, 10);\n                    }\n                    if (t >= len) {\n                        if (validate && patch.op === \"add\" && key > obj.length) {\n                            throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", p - 1, patch.path, patch);\n                        }\n                        result = arrOps[patch.op].call(patch, obj, key, tree); // Apply patch\n                        break;\n                    }\n                }\n                else {\n                    if (key && key.indexOf('~') != -1)\n                        key = key.replace(/~1/g, '/').replace(/~0/g, '~'); // escape chars\n                    if (t >= len) {\n                        result = objOps[patch.op].call(patch, obj, key, tree); // Apply patch\n                        break;\n                    }\n                }\n                obj = obj[key];\n            }\n        }\n        return result;\n    }\n    jsonpatch.apply = apply;\n    function compare(tree1, tree2) {\n        var patches = [];\n        _generate(tree1, tree2, patches, '');\n        return patches;\n    }\n    jsonpatch.compare = compare;\n    var JsonPatchError = (function (_super) {\n        __extends(JsonPatchError, _super);\n        function JsonPatchError(message, name, index, operation, tree) {\n            _super.call(this, message);\n            this.message = message;\n            this.name = name;\n            this.index = index;\n            this.operation = operation;\n            this.tree = tree;\n        }\n        return JsonPatchError;\n    })(OriginalError);\n    jsonpatch.JsonPatchError = JsonPatchError;\n    jsonpatch.Error = JsonPatchError;\n    /**\n     * Recursively checks whether an object has any undefined values inside.\n     */\n    function hasUndefined(obj) {\n        if (obj === undefined) {\n            return true;\n        }\n        if (typeof obj == \"array\" || typeof obj == \"object\") {\n            for (var i in obj) {\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    /**\n     * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n     * @param {object} operation - operation object (patch)\n     * @param {number} index - index of operation in the sequence\n     * @param {object} [tree] - object where the operation is supposed to be applied\n     * @param {string} [existingPathFragment] - comes along with `tree`\n     */\n    function validator(operation, index, tree, existingPathFragment) {\n        if (typeof operation !== 'object' || operation === null || _isArray(operation)) {\n            throw new JsonPatchError('Operation is not an object', 'OPERATION_NOT_AN_OBJECT', index, operation, tree);\n        }\n        else if (!objOps[operation.op]) {\n            throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, tree);\n        }\n        else if (typeof operation.path !== 'string') {\n            throw new JsonPatchError('Operation `path` property is not a string', 'OPERATION_PATH_INVALID', index, operation, tree);\n        }\n        else if ((operation.op === 'move' || operation.op === 'copy') && typeof operation.from !== 'string') {\n            throw new JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)', 'OPERATION_FROM_REQUIRED', index, operation, tree);\n        }\n        else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && operation.value === undefined) {\n            throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_REQUIRED', index, operation, tree);\n        }\n        else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && hasUndefined(operation.value)) {\n            throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED', index, operation, tree);\n        }\n        else if (tree) {\n            if (operation.op == \"add\") {\n                var pathLen = operation.path.split(\"/\").length;\n                var existingPathLen = existingPathFragment.split(\"/\").length;\n                if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                    throw new JsonPatchError('Cannot perform an `add` operation at the desired path', 'OPERATION_PATH_CANNOT_ADD', index, operation, tree);\n                }\n            }\n            else if (operation.op === 'replace' || operation.op === 'remove' || operation.op === '_get') {\n                if (operation.path !== existingPathFragment) {\n                    throw new JsonPatchError('Cannot perform the operation at a path that does not exist', 'OPERATION_PATH_UNRESOLVABLE', index, operation, tree);\n                }\n            }\n            else if (operation.op === 'move' || operation.op === 'copy') {\n                var existingValue = { op: \"_get\", path: operation.from, value: undefined };\n                var error = jsonpatch.validate([existingValue], tree);\n                if (error && error.name === 'OPERATION_PATH_UNRESOLVABLE') {\n                    throw new JsonPatchError('Cannot perform the operation from a path that does not exist', 'OPERATION_FROM_UNRESOLVABLE', index, operation, tree);\n                }\n            }\n        }\n    }\n    jsonpatch.validator = validator;\n    /**\n     * Validates a sequence of operations. If `tree` parameter is provided, the sequence is additionally validated against the object tree.\n     * If error is encountered, returns a JsonPatchError object\n     * @param sequence\n     * @param tree\n     * @returns {JsonPatchError|undefined}\n     */\n    function validate(sequence, tree) {\n        try {\n            if (!_isArray(sequence)) {\n                throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n            }\n            if (tree) {\n                tree = JSON.parse(JSON.stringify(tree)); //clone tree so that we can safely try applying operations\n                apply.call(this, tree, sequence, true);\n            }\n            else {\n                for (var i = 0; i < sequence.length; i++) {\n                    this.validator(sequence[i], i);\n                }\n            }\n        }\n        catch (e) {\n            if (e instanceof JsonPatchError) {\n                return e;\n            }\n            else {\n                throw e;\n            }\n        }\n    }\n    jsonpatch.validate = validate;\n})(jsonpatch || (jsonpatch = {}));\nif (typeof exports !== \"undefined\") {\n    exports.apply = jsonpatch.apply;\n    exports.observe = jsonpatch.observe;\n    exports.unobserve = jsonpatch.unobserve;\n    exports.generate = jsonpatch.generate;\n    exports.compare = jsonpatch.compare;\n    exports.validate = jsonpatch.validate;\n    exports.validator = jsonpatch.validator;\n    exports.JsonPatchError = jsonpatch.JsonPatchError;\n    exports.Error = jsonpatch.Error;\n}\n","/*\n * to-markdown - an HTML to Markdown converter\n *\n * Copyright 2011+, Dom Christie\n * Licenced under the MIT licence\n *\n */\n\n'use strict';\n\nvar toMarkdown;\nvar converters;\nvar mdConverters = require('./lib/md-converters');\nvar gfmConverters = require('./lib/gfm-converters');\nvar HtmlParser = require('./lib/html-parser');\nvar collapse = require('collapse-whitespace');\n\n/*\n * Utilities\n */\n\nvar blocks = ['address', 'article', 'aside', 'audio', 'blockquote', 'body',\n  'canvas', 'center', 'dd', 'dir', 'div', 'dl', 'dt', 'fieldset', 'figcaption',\n  'figure', 'footer', 'form', 'frameset', 'h1', 'h2', 'h3', 'h4','h5', 'h6',\n  'header', 'hgroup', 'hr', 'html', 'isindex', 'li', 'main', 'menu', 'nav',\n  'noframes', 'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table',\n  'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul'\n];\n\nfunction isBlock(node) {\n  return blocks.indexOf(node.nodeName.toLowerCase()) !== -1;\n}\n\nvar voids = [\n  'area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input',\n  'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'\n];\n\nfunction isVoid(node) {\n  return voids.indexOf(node.nodeName.toLowerCase()) !== -1;\n}\n\nfunction htmlToDom(string) {\n  var tree = new HtmlParser().parseFromString(string, 'text/html');\n  collapse(tree.documentElement, isBlock);\n  return tree;\n}\n\n/*\n * Flattens DOM tree into single array\n */\n\nfunction bfsOrder(node) {\n  var inqueue = [node],\n      outqueue = [],\n      elem, children, i;\n\n  while (inqueue.length > 0) {\n    elem = inqueue.shift();\n    outqueue.push(elem);\n    children = elem.childNodes;\n    for (i = 0 ; i < children.length; i++) {\n      if (children[i].nodeType === 1) { inqueue.push(children[i]); }\n    }\n  }\n  outqueue.shift();\n  return outqueue;\n}\n\n/*\n * Contructs a Markdown string of replacement text for a given node\n */\n\nfunction getContent(node) {\n  var text = '';\n  for (var i = 0; i < node.childNodes.length; i++) {\n    if (node.childNodes[i].nodeType === 1) {\n      text += node.childNodes[i]._replacement;\n    }\n    else if (node.childNodes[i].nodeType === 3) {\n      text += node.childNodes[i].data;\n    }\n    else { continue; }\n  }\n  return text;\n}\n\n/*\n * Returns the HTML string of an element with its contents converted\n */\n\nfunction outer(node, content) {\n  return node.cloneNode(false).outerHTML.replace('><', '>'+ content +'<');\n}\n\nfunction canConvert(node, filter) {\n  if (typeof filter === 'string') {\n    return filter === node.nodeName.toLowerCase();\n  }\n  if (Array.isArray(filter)) {\n    return filter.indexOf(node.nodeName.toLowerCase()) !== -1;\n  }\n  else if (typeof filter === 'function') {\n    return filter.call(toMarkdown, node);\n  }\n  else {\n    throw new TypeError('`filter` needs to be a string, array, or function');\n  }\n}\n\nfunction isFlankedByWhitespace(side, node) {\n  var sibling, regExp, isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  }\n  else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    }\n    else if(sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked;\n}\n\nfunction flankingWhitespace(node) {\n  var leading = '', trailing = '';\n\n  if (!isBlock(node)) {\n    var hasLeading = /^[ \\r\\n\\t]/.test(node.innerHTML),\n        hasTrailing = /[ \\r\\n\\t]$/.test(node.innerHTML);\n\n    if (hasLeading && !isFlankedByWhitespace('left', node)) {\n      leading = ' ';\n    }\n    if (hasTrailing && !isFlankedByWhitespace('right', node)) {\n      trailing = ' ';\n    }\n  }\n\n  return { leading: leading, trailing: trailing };\n}\n\n/*\n * Finds a Markdown converter, gets the replacement, and sets it on\n * `_replacement`\n */\n\nfunction process(node) {\n  var replacement, content = getContent(node);\n\n  // Remove blank nodes\n  if (!isVoid(node) && !/A|TH|TD/.test(node.nodeName) && /^\\s*$/i.test(content)) {\n    node._replacement = '';\n    return;\n  }\n\n  for (var i = 0; i < converters.length; i++) {\n    var converter = converters[i];\n\n    if (canConvert(node, converter.filter)) {\n      if (typeof converter.replacement !== 'function') {\n        throw new TypeError(\n          '`replacement` needs to be a function that returns a string'\n        );\n      }\n\n      var whitespace = flankingWhitespace(node);\n\n      if (whitespace.leading || whitespace.trailing) {\n        content = content.trim();\n      }\n      replacement = whitespace.leading +\n                    converter.replacement.call(toMarkdown, content, node) +\n                    whitespace.trailing;\n      break;\n    }\n  }\n\n  node._replacement = replacement;\n}\n\ntoMarkdown = function (input, options) {\n  options = options || {};\n\n  if (typeof input !== 'string') {\n    throw new TypeError(input + ' is not a string');\n  }\n\n  // Escape potential ol triggers\n  input = input.replace(/(\\d+)\\. /g, '$1\\\\. ');\n\n  var clone = htmlToDom(input).body,\n      nodes = bfsOrder(clone),\n      output;\n\n  converters = mdConverters.slice(0);\n  if (options.gfm) {\n    converters = gfmConverters.concat(converters);\n  }\n\n  if (options.converters) {\n    converters = options.converters.concat(converters);\n  }\n\n  // Process through nodes in reverse (so deepest child elements are first).\n  for (var i = nodes.length - 1; i >= 0; i--) {\n    process(nodes[i]);\n  }\n  output = getContent(clone);\n\n  return output.replace(/^[\\t\\r\\n]+|[\\t\\r\\n\\s]+$/g, '')\n               .replace(/\\n\\s+\\n/g, '\\n\\n')\n               .replace(/\\n{3,}/g, '\\n\\n');\n};\n\ntoMarkdown.isBlock = isBlock;\ntoMarkdown.isVoid = isVoid;\ntoMarkdown.outer = outer;\n\nmodule.exports = toMarkdown;\n","'use strict';\n\nfunction cell(content, node) {\n  var index = Array.prototype.indexOf.call(node.parentNode.childNodes, node);\n  var prefix = ' ';\n  if (index === 0) { prefix = '| '; }\n  return prefix + content + ' |';\n}\n\nvar highlightRegEx = /highlight highlight-(\\S+)/;\n\nmodule.exports = [\n  {\n    filter: 'br',\n    replacement: function () {\n      return '\\n';\n    }\n  },\n  {\n    filter: ['del', 's', 'strike'],\n    replacement: function (content) {\n      return '~~' + content + '~~';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.type === 'checkbox' && node.parentNode.nodeName === 'LI';\n    },\n    replacement: function (content, node) {\n      return (node.checked ? '[x]' : '[ ]') + ' ';\n    }\n  },\n\n  {\n    filter: ['th', 'td'],\n    replacement: function (content, node) {\n      return cell(content, node);\n    }\n  },\n\n  {\n    filter: 'tr',\n    replacement: function (content, node) {\n      var borderCells = '';\n      var alignMap = { left: ':--', right: '--:', center: ':-:' };\n\n      if (node.parentNode.nodeName === 'THEAD') {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var align = node.childNodes[i].attributes.align;\n          var border = '---';\n\n          if (align) { border = alignMap[align.value] || border; }\n\n          borderCells += cell(border, node.childNodes[i]);\n        }\n      }\n      return '\\n' + content + (borderCells ? '\\n' + borderCells : '');\n    }\n  },\n\n  {\n    filter: 'table',\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: ['thead', 'tbody', 'tfoot'],\n    replacement: function (content) {\n      return content;\n    }\n  },\n\n  // Fenced code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' &&\n             node.firstChild &&\n             node.firstChild.nodeName === 'CODE';\n    },\n    replacement: function(content, node) {\n      return '\\n\\n```\\n' + node.firstChild.textContent + '\\n```\\n\\n';\n    }\n  },\n\n  // Syntax-highlighted code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' &&\n             node.parentNode.nodeName === 'DIV' &&\n             highlightRegEx.test(node.parentNode.className);\n    },\n    replacement: function (content, node) {\n      var language = node.parentNode.className.match(highlightRegEx)[1];\n      return '\\n\\n```' + language + '\\n' + node.textContent + '\\n```\\n\\n';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.nodeName === 'DIV' &&\n             highlightRegEx.test(node.className);\n    },\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  }\n];\n","/*\n * Set up window for Node.js\n */\n\nvar _window = (typeof window !== 'undefined' ? window : this);\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHtmlNatively () {\n  var Parser = _window.DOMParser\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse;\n}\n\nfunction createHtmlParser () {\n  var Parser = function () {};\n  \n  // For Node.js environments\n  if (typeof document === 'undefined') {\n    var jsdom = require('jsdom');\n    Parser.prototype.parseFromString = function (string) {\n      return jsdom.jsdom(string, {\n        features: {\n          FetchExternalResources: [],\n          ProcessExternalResources: false\n        }\n      });\n    };\n  } else {\n    if (!shouldUseActiveX()) {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = document.implementation.createHTMLDocument('');\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc;\n      };\n    } else {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = new ActiveXObject('htmlfile');\n        doc.designMode = 'on'; // disable on-page scripts\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc;\n      };\n    }\n  }\n  return Parser;\n}\n\nfunction shouldUseActiveX () {\n  var useActiveX = false;\n\n  try {\n    document.implementation.createHTMLDocument('').open();\n  } catch (e) {\n    if (window.ActiveXObject) useActiveX = true;\n  }\n\n  return useActiveX;\n}\n\nmodule.exports = canParseHtmlNatively() ? _window.DOMParser : createHtmlParser()\n","'use strict';\n\nmodule.exports = [\n  {\n    filter: 'p',\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'br',\n    replacement: function () {\n      return '  \\n';\n    }\n  },\n\n  {\n    filter: ['h1', 'h2', 'h3', 'h4','h5', 'h6'],\n    replacement: function(content, node) {\n      var hLevel = node.nodeName.charAt(1);\n      var hPrefix = '';\n      for(var i = 0; i < hLevel; i++) {\n        hPrefix += '#';\n      }\n      return '\\n\\n' + hPrefix + ' ' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'hr',\n    replacement: function () {\n      return '\\n\\n* * *\\n\\n';\n    }\n  },\n\n  {\n    filter: ['em', 'i'],\n    replacement: function (content) {\n      return '_' + content + '_';\n    }\n  },\n\n  {\n    filter: ['strong', 'b'],\n    replacement: function (content) {\n      return '**' + content + '**';\n    }\n  },\n\n  // Inline code\n  {\n    filter: function (node) {\n      var hasSiblings = node.previousSibling || node.nextSibling;\n      var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n      return node.nodeName === 'CODE' && !isCodeBlock;\n    },\n    replacement: function(content) {\n      return '`' + content + '`';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.nodeName === 'A' && node.getAttribute('href');\n    },\n    replacement: function(content, node) {\n      var titlePart = node.title ? ' \"'+ node.title +'\"' : '';\n      return '[' + content + '](' + node.getAttribute('href') + titlePart + ')';\n    }\n  },\n\n  {\n    filter: 'img',\n    replacement: function(content, node) {\n      var alt = node.alt || '';\n      var src = node.getAttribute('src') || '';\n      var title = node.title || '';\n      var titlePart = title ? ' \"'+ title +'\"' : '';\n      return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : '';\n    }\n  },\n\n  // Code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' && node.firstChild.nodeName === 'CODE';\n    },\n    replacement: function(content, node) {\n      return '\\n\\n    ' + node.firstChild.textContent.replace(/\\n/g, '\\n    ') + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'blockquote',\n    replacement: function (content) {\n      content = content.trim();\n      content = content.replace(/\\n{3,}/g, '\\n\\n');\n      content = content.replace(/^/gm, '> ');\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'li',\n    replacement: function (content, node) {\n      content = content.replace(/^\\s+/, '').replace(/\\n/gm, '\\n    ');\n      var prefix = '*   ';\n      var parent = node.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, node) + 1;\n\n      prefix = /ol/i.test(parent.nodeName) ? index + '.  ' : '*   ';\n      return prefix + content;\n    }\n  },\n\n  {\n    filter: ['ul', 'ol'],\n    replacement: function (content, node) {\n      var strings = [];\n      for (var i = 0; i < node.childNodes.length; i++) {\n        strings.push(node.childNodes[i]._replacement);\n      }\n\n      if (/li/i.test(node.parentNode.nodeName)) {\n        return '\\n' + strings.join('\\n');\n      }\n      return '\\n\\n' + strings.join('\\n') + '\\n\\n';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return this.isBlock(node);\n    },\n    replacement: function (content, node) {\n      return '\\n\\n' + this.outer(node, content) + '\\n\\n';\n    }\n  },\n\n  // Anything else!\n  {\n    filter: function () {\n      return true;\n    },\n    replacement: function (content, node) {\n      return this.outer(node, content);\n    }\n  }\n];\n","\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"keygen\": true,\n  \"link\": true,\n  \"menuitem\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n"],"sourceRoot":"/source/"}